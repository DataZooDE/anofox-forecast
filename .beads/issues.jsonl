{"id":"forecast-extension-05t","title":"Add documentation for ts_cv_split","description":"Document API, parameters, examples, and best practices for handling data leakage in time series CV.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-09T11:48:02.148978859+01:00","created_by":"simonm","updated_at":"2026-01-09T14:50:07.37423794+01:00","closed_at":"2026-01-09T14:50:07.37423794+01:00","close_reason":"Added comprehensive documentation for ts_cv_split covering API, examples, window types, data leakage prevention, and best practices","dependencies":[{"issue_id":"forecast-extension-05t","depends_on_id":"forecast-extension-g2i","type":"blocks","created_at":"2026-01-09T11:48:14.832299398+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-0cj","title":"Investigate BOCPD posterior update logic","description":"Debug the detect_changepoints_bocpd function in changepoint.rs. Trace through the algorithm with a simple test case (100→10 step change) to identify where the posterior probabilities become constant. Check:\n- Predictive probability computation (lines 240-269)\n- Run length distribution update (lines 272-284)\n- Normalization step (lines 287-293)\n- Sufficient statistics update (lines 303-316)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T11:08:36.48790186+01:00","created_by":"simonm","updated_at":"2026-01-13T11:21:18.59053384+01:00","closed_at":"2026-01-13T11:21:18.59053384+01:00","close_reason":"Root cause identified: P(r=0) is always ~hazard due to normalization. P(r=1) is the correct metric for 'changepoint just happened'"}
{"id":"forecast-extension-0do","title":"Add unit test for BOCPD with obvious step change","description":"Create a failing test that reproduces the bug: series with values [100]*12 + [10]*12 should detect a changepoint at index 12 with high probability. This test should initially fail and pass after the fix.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T11:08:51.07099228+01:00","created_by":"simonm","updated_at":"2026-01-13T11:21:19.405473004+01:00","closed_at":"2026-01-13T11:21:19.405473004+01:00","close_reason":"Added test_detect_changepoints_bocpd_step_change test","dependencies":[{"issue_id":"forecast-extension-0do","depends_on_id":"forecast-extension-0cj","type":"blocks","created_at":"2026-01-13T11:09:07.855051307+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-0ny","title":"Doc: Mask \u0026 Fill diagram for Example 5","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:30:11.559990361+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.621424946+01:00","closed_at":"2026-01-10T19:34:00.621424946+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-0ny","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:30:23.46567788+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-0ny","depends_on_id":"forecast-extension-3l0","type":"blocks","created_at":"2026-01-10T19:30:24.799444121+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-110","title":"Doc: Troubleshooting/FAQ section","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:30:13.791906325+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.645977064+01:00","closed_at":"2026-01-10T19:34:00.645977064+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-110","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:30:23.520189125+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-110","depends_on_id":"forecast-extension-soy","type":"blocks","created_at":"2026-01-10T19:30:24.860468787+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-12ww","title":"Remove redundant fill functions","description":"Remove ts_fill_gaps_operator_by, ts_fill_gaps_native, ts_fill_forward_native, ts_fill_forward_operator after consolidation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:18:19.007942187+01:00","created_by":"simonm","updated_at":"2026-01-23T13:01:50.918765841+01:00","closed_at":"2026-01-23T13:01:50.918765841+01:00","close_reason":"Refactored fill macros to use native streaming implementations. Memory reduced from 181MB to 12MB (ts_fill_gaps_by) and 127MB to 13MB (ts_fill_forward_by). Tests pass.","dependencies":[{"issue_id":"forecast-extension-12ww","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.463158936+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-12ww","depends_on_id":"forecast-extension-8v04","type":"blocks","created_at":"2026-01-23T12:19:22.504153414+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-12ww","depends_on_id":"forecast-extension-dipl","type":"blocks","created_at":"2026-01-23T12:19:22.54911523+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-1j1","title":"Design exogenous variable API for ts_forecast","description":"## Approved API Design\n\n### Scalar Function\n```sql\n_ts_forecast_exog(values, horizon, model, xreg, future_xreg)\n-- Types:\n--   values: LIST\u003cDOUBLE\u003e           -- y values\n--   horizon: INTEGER               -- forecast horizon\n--   model: VARCHAR                 -- model name (AutoARIMA, ARIMAX, etc.)\n--   xreg: LIST\u003cLIST\u003cDOUBLE\u003e\u003e       -- historical X [n_regressors][n_obs]\n--   future_xreg: LIST\u003cLIST\u003cDOUBLE\u003e\u003e -- future X [n_regressors][horizon]\n```\n\n### Table Macros\n\n#### Option 1: Future X from table (primary use case)\n```sql\n-- Single series with future X from table\nts_forecast_exog(source, date_col, target_col, xreg_cols, \n                 future_source, future_date_col, future_xreg_cols,\n                 method, horizon, params)\n\n-- Grouped series with future X from table\nts_forecast_exog_by(source, group_col, date_col, target_col, xreg_cols,\n                    future_source, future_date_col, future_xreg_cols,\n                    method, horizon, params, frequency='1d')\n```\n\n### Example Usage\n\n#### Historical data table\n```sql\nCREATE TABLE sales_data AS\nSELECT * FROM (VALUES\n    ('A', '2024-01-01'::DATE, 100, 20.0, 0),\n    ('A', '2024-01-02'::DATE, 120, 22.0, 1),\n    ('A', '2024-01-03'::DATE, 115, 19.0, 0)\n) AS t(store_id, date, sales, temperature, promotion);\n```\n\n#### Future exogenous table (e.g., weather forecast + planned promos)\n```sql\nCREATE TABLE future_features AS\nSELECT * FROM (VALUES\n    ('A', '2024-01-04'::DATE, 21.0, 1),\n    ('A', '2024-01-05'::DATE, 23.0, 0),\n    ('A', '2024-01-06'::DATE, 20.0, 1)\n) AS t(store_id, date, temperature, promotion);\n```\n\n#### Forecast with exogenous from tables\n```sql\nSELECT * FROM ts_forecast_exog_by(\n    'sales_data',                    -- historical data\n    'store_id',                      -- group column\n    'date',                          -- date column\n    'sales',                         -- target column\n    ['temperature', 'promotion'],    -- X columns (same names in both tables)\n    'future_features',               -- future X source table\n    'date',                          -- future date column (for ordering)\n    ['temperature', 'promotion'],    -- future X columns\n    'AutoARIMA',                     -- model\n    3,                               -- horizon\n    {},                              -- params\n    '1d'                             -- frequency\n);\n```\n\n### Alternative: Inline future X (for simple cases)\n```sql\n-- Using literal arrays when future X is simple\nts_forecast_exog_by(\n    'sales_data', 'store_id', 'date', 'sales',\n    ['temp', 'promo'],\n    NULL,                            -- no future table\n    NULL,\n    [[21, 23, 20], [1, 0, 1]],       -- inline future X arrays\n    'AutoARIMA', 3, {}, '1d'\n)\n```\n\n### Supported Models\nARIMA, ARIMAX, SARIMA, SARIMAX, AutoARIMA, OptimizedTheta, DynamicTheta, MFLES\n\n### Validation Rules\n1. len(future_xreg) == horizon (from table rows or array length)\n2. xreg_cols and future_xreg_cols must have same length\n3. Column names in xreg_cols must exist in source table\n4. Column names in future_xreg_cols must exist in future_source table\n5. For grouped: future_source must have matching group_col values\n6. Model must support exog (error otherwise)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T22:12:33.688945038+01:00","created_by":"simonm","updated_at":"2026-01-08T22:23:50.72034317+01:00","closed_at":"2026-01-08T22:23:50.72034317+01:00","close_reason":"API design approved"}
{"id":"forecast-extension-1nr","title":"Fix ts_detect_changepoints returning constant prior instead of posteriors","description":"GitHub Issue #71: ts_detect_changepoints returns constant changepoint_probability (1/hazard_lambda) for all observations instead of updating posteriors based on data. The BOCPD algorithm is not detecting changepoints even in synthetic data with obvious structural breaks.\n\nRoot cause: The posterior update step in the BOCPD implementation is not being executed properly.\n\nAcceptance criteria:\n- Changepoint probability varies based on data likelihood\n- Obvious changepoints (e.g., 100→10 step change) are detected\n- is_changepoint=true at transition points","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-13T11:08:04.104125987+01:00","created_by":"simonm","updated_at":"2026-01-23T14:34:17.446770282+01:00","closed_at":"2026-01-23T14:34:17.446770282+01:00","close_reason":"All subtasks complete: investigation done, unit tests added, fix applied (P(r=1) instead of P(r=0)), SQL integration tests added","comments":[{"id":10,"issue_id":"forecast-extension-1nr","author":"simonm","text":"GitHub Issue: https://github.com/DataZooDE/anofox-forecast/issues/71\nBranch: fix/71-changepoint-posterior-update\n\nSubtasks created:\n1. forecast-extension-0cj: Investigate BOCPD posterior update logic (READY)\n2. forecast-extension-0do: Add unit test for BOCPD with obvious step change\n3. forecast-extension-vyl: Fix BOCPD posterior probability computation\n4. forecast-extension-p48: Add SQL integration test for ts_detect_changepoints","created_at":"2026-01-13T10:10:02Z"}]}
{"id":"forecast-extension-1q6h","title":"Profile ts_changepoints_by CPU/memory usage","description":"Lower priority candidate. Profile CPU and memory usage for changepoint detection function.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T12:25:11.811191633+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.795134759+01:00","closed_at":"2026-01-23T12:36:18.795134759+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-1q6h","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:25:11.848292158+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-1q6h","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:25:19.879770151+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-1rh","title":"Update C++ extension for exogenous variables","description":"Extend ts_forecast.cpp to handle exogenous data: (1) Accept additional columns for X regressors, (2) Accept future_X parameter (LIST or subquery), (3) Validate future_X length matches horizon, (4) Pass data to Rust FFI layer","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:10.782164761+01:00","created_by":"simonm","updated_at":"2026-01-08T22:47:53.794958148+01:00","closed_at":"2026-01-08T22:47:53.794958148+01:00","close_reason":"Implemented C++ extension: _ts_forecast_exog scalar function, ts_forecast_exog and ts_forecast_exog_by macros","dependencies":[{"issue_id":"forecast-extension-1rh","depends_on_id":"forecast-extension-h4w","type":"blocks","created_at":"2026-01-08T22:16:35.244810242+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-1rh","depends_on_id":"forecast-extension-lk0","type":"blocks","created_at":"2026-01-08T22:33:31.177876531+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-1ub","title":"Test forecast parameters (confidence_level, seasonal_period, auto_detect_seasonality)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:41.604058088+01:00","created_by":"simonm","updated_at":"2026-01-08T16:34:31.648410718+01:00","closed_at":"2026-01-08T16:34:31.648410718+01:00","close_reason":"Added comprehensive tests for forecast parameters including confidence_level, seasonal_period, auto_detect, MAP params interface, and frequency parameter"}
{"id":"forecast-extension-1ys","title":"Performance study: MSTL/STL bottleneck with large datasets (100k series)","description":"Investigate performance bottlenecks in MSTL and STL decomposition when processing large datasets (100k+ time series). Determine whether improvements are needed in the DuckDB extension layer or in the underlying Rust crates (augurs-mstl, augurs-seasons). Deliverables: performance profile, identification of bottlenecks, recommendations for optimization.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T10:05:28.148767365+01:00","created_by":"simonm","updated_at":"2026-01-13T10:12:40.812146539+01:00","closed_at":"2026-01-13T10:12:40.812146539+01:00","close_reason":"Performance study complete. See commit 908d816 and docs/PERFORMANCE_STUDY.md","comments":[{"id":9,"issue_id":"forecast-extension-1ys","author":"simonm","text":"Performance analysis complete. Key findings:\n\nMSTL decomposition is NOT the bottleneck - it scales linearly O(n) and processes 10k series in ~23ms.\n\nPeriod detection is the bottleneck with 3 critical O(n^2) methods:\n1. SAZED: Uses naive DFT instead of FFT (642ms vs 186us for n=2000)\n2. SSA: Power iteration for eigenvalues (1.05s for n=2000)\n3. Matrix Profile: Naive distance computation (665ms for n=2000)\n\nRecommendations:\n- Replace SAZED DFT with FFT (biggest impact, easiest fix)\n- Use faer eigendecomposition for SSA\n- Implement STOMP algorithm for Matrix Profile\n- Document fast vs slow methods for users\n\nSee docs/PERFORMANCE_STUDY.md for full analysis.","created_at":"2026-01-13T09:11:45Z"}]}
{"id":"forecast-extension-24o6","title":"Profile ts_decompose_by memory usage","description":"Medium priority candidate. Profile CPU and memory usage for decomposition function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:17:57.62101632+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.758384988+01:00","closed_at":"2026-01-23T12:36:18.758384988+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-24o6","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.110268336+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-24o6","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:16.030021099+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-27i","title":"Add feature extraction examples","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T14:07:09.146036509+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.140403265+01:00","closed_at":"2026-01-13T14:35:03.140403265+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-2em","title":"Fix ts_detect_peaks n/m parameter swap in fdars-core call","description":"The detect_peaks and analyze_peak_timing functions passed n and m parameters in wrong order to fdars-core.\n\n**Root Cause:**\nfdars-core's detect_peaks expects: `data, n_samples, m_timepoints, argvals`\nWe were passing: `values, n, 1, argvals` (treating n as samples, m=1 timepoints)\nShould be: `values, 1, n, argvals` (1 sample, n timepoints)\n\n**Fix:**\nIn `crates/anofox-fcst-core/src/peaks.rs`:\n- Changed `fdars_detect_peaks(values, n, 1, ...)` to `fdars_detect_peaks(values, 1, n, ...)`\n- Changed `fdars_analyze_peak_timing(values, n, 1, ...)` to `fdars_analyze_peak_timing(values, 1, n, ...)`\n\n**Verification:**\n- Test case `[1.0, 3.0, 2.0, 5.0, 1.0, 4.0, 2.0]` now returns n_peaks=2 instead of 0\n- All 135 Rust tests pass\n- All 1845 DuckDB assertions pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T22:16:23.794065033+01:00","created_by":"simonm","updated_at":"2026-01-09T22:23:18.041264252+01:00","closed_at":"2026-01-09T22:23:18.041264252+01:00","close_reason":"Fixed n/m parameter swap in fdars-core calls. Commit 5d850cc."}
{"id":"forecast-extension-2f9n","title":"Update ts_backtest_auto to use STRUCT params","description":"Refactor ts_backtest_auto macro to use param_value helper for mixed-type parameter extraction. Test with method/gap/clip_horizon syntax. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:39.43835318+01:00","created_by":"simonm","updated_at":"2026-01-17T20:34:23.243347073+01:00","closed_at":"2026-01-17T20:34:23.243347073+01:00","close_reason":"ts_backtest_auto updated in ts_macros.cpp:1507-1528","dependencies":[{"issue_id":"forecast-extension-2f9n","depends_on_id":"forecast-extension-viff","type":"blocks","created_at":"2026-01-17T20:23:25.066700146+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-2f9n","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:41.064807227+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-2hi","title":"Write mixed batch isolation tests - key test for 10k series resilience","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T17:48:59.386193943+01:00","created_by":"simonm","updated_at":"2026-01-08T19:08:17.675602528+01:00","closed_at":"2026-01-08T19:08:17.675602528+01:00","close_reason":"Added mixed batch isolation tests with 250 assertions covering 10k series resilience","dependencies":[{"issue_id":"forecast-extension-2hi","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:18.001775511+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-2omp","title":"Update anofox-forecast to v0.4.1","description":"Update Cargo.toml dependency:\n- Change anofox-forecast = \"0.3.2\" to anofox-forecast = \"0.4.1\"\n- Run cargo build to verify compilation\n- Run existing tests to check for regressions\n\nRelated: GH #93","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-16T12:04:40.14511578+01:00","created_by":"simonm","updated_at":"2026-01-16T12:07:04.874075564+01:00","closed_at":"2026-01-16T12:07:04.874075564+01:00","close_reason":"Updated to v0.4.1, all 51 tests pass"}
{"id":"forecast-extension-2vj","title":"Fix ts_peaks.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:27.157291643+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.371801963+01:00","closed_at":"2026-01-08T20:26:45.371801963+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-38f","title":"Fix ts_changepoints.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:25.945915811+01:00","created_by":"simonm","updated_at":"2026-01-08T20:20:53.940009168+01:00","closed_at":"2026-01-08T20:20:53.940009168+01:00","close_reason":"Fixed 3 changepoint detection functions"}
{"id":"forecast-extension-3in","title":"Add test for ts_fill_forward_operator","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-08T15:29:37.324622465+01:00","created_by":"simonm","updated_at":"2026-01-08T17:12:59.762494073+01:00","closed_at":"2026-01-08T17:12:59.762494073+01:00","close_reason":"Added comprehensive tests for ts_fill_forward macro (note: ts_fill_forward_operator native function has a bug that causes it to hang - tests use the working ts_fill_forward macro instead)"}
{"id":"forecast-extension-3j5c","title":"Update examples for consolidated fill APIs","description":"Update examples in /examples directory to use the consolidated fill function APIs.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T12:18:20.574191974+01:00","created_by":"simonm","updated_at":"2026-01-23T14:02:35.58064472+01:00","closed_at":"2026-01-23T14:02:35.58064472+01:00","close_reason":"Examples already use correct public APIs (ts_fill_gaps_by, ts_fill_forward_by). No references to removed ts_fill_gaps_operator_by or internal native functions.","dependencies":[{"issue_id":"forecast-extension-3j5c","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.473041799+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-3j5c","depends_on_id":"forecast-extension-12ww","type":"blocks","created_at":"2026-01-23T12:19:24.021714971+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-3l0","title":"Example 5: Unknown vs Known Features (Mask \u0026 Fill)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:28:14.277422631+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.581116779+01:00","closed_at":"2026-01-10T19:34:00.581116779+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-3l0","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:28:23.036109486+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-3l0","depends_on_id":"forecast-extension-5r7","type":"blocks","created_at":"2026-01-10T19:28:24.074156583+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-3mn","title":"Refactor Conformal Prediction API (Learn/Apply Pattern)","description":"Replace existing conformal scalar functions with new Learn/Apply pattern API. Implements CalibrationProfile struct, supports symmetric/asymmetric/adaptive methods, vectorized alphas for multiple coverage levels. Adds evaluation metrics and difficulty score bridge to Part 1. See plan: ~/.claude/plans/lexical-cuddling-wilkinson.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-14T22:19:01.077859679+01:00","created_by":"simonm","updated_at":"2026-01-23T14:34:04.396078693+01:00","closed_at":"2026-01-23T14:34:04.396078693+01:00","close_reason":"All subtasks complete: ts_conformal_learn, ts_conformal_apply, ts_difficulty_score, ts_conformalize implemented; deprecated v1 API removed"}
{"id":"forecast-extension-3omm","title":"Convert ts_cv_split_by to native streaming","description":"Memory: 212 MB (high). Convert to table_in_out streaming pattern.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T14:45:39.319580442+01:00","created_by":"simonm","updated_at":"2026-01-23T15:23:53.677092666+01:00","closed_at":"2026-01-23T15:23:53.677092666+01:00","close_reason":"Implemented native streaming for ts_cv_split_by. Memory reduced from ~35.7MB to ~18.9MB (47% reduction). Verified 100% result match with 143K rows."}
{"id":"forecast-extension-3tt","title":"Add scenario expression support for unknown features","description":"Extend ts_fill_unknown to support scenario expressions like CASE WHEN month(date) = 12 THEN 1 ELSE 0 END for simulation studies.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:48:00.267025861+01:00","created_by":"simonm","updated_at":"2026-01-09T14:15:25.832543087+01:00","closed_at":"2026-01-09T14:15:25.832543087+01:00","close_reason":"Implemented ts_mark_unknown helper function that marks rows as known/unknown, enabling users to apply custom scenario expressions via standard SQL CASE statements.","dependencies":[{"issue_id":"forecast-extension-3tt","depends_on_id":"forecast-extension-e1p","type":"blocks","created_at":"2026-01-09T11:48:13.2528125+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-3v0","title":"ts_forecast_by: Test Multiple Seasonality Models (MFLES, MSTL, TBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:12.493342423+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.620640456+01:00","closed_at":"2026-01-08T15:52:30.620640456+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-3x2","title":"Test State Space and ARIMA Models (ETS, ARIMA)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:37.284167311+01:00","created_by":"simonm","updated_at":"2026-01-08T16:16:16.190990865+01:00","closed_at":"2026-01-08T16:16:16.190990865+01:00","close_reason":"Added comprehensive tests for State Space and ARIMA models (ETS, ARIMA) in test/sql/ts_forecast_statespace.test. All 22 test files pass with 875 assertions."}
{"id":"forecast-extension-44a0","title":"Add unit tests for ETS model parameter","description":"TDD: Write tests first for ETS model parameter handling.\n\nTest cases:\n1. Default behavior (no model param) uses AAA\n2. Explicit model='AAA' works\n3. Explicit model='MNM' works  \n4. Damped variants work (AAdA, MAdM)\n5. Invalid spec returns error (XYZ)\n6. Unstable spec rejected (MAA, MAdA)\n7. Case sensitivity handling\n\nRelated: GH #93","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-16T12:04:28.906813472+01:00","created_by":"simonm","updated_at":"2026-01-16T12:09:49.17378078+01:00","closed_at":"2026-01-16T12:09:49.17378078+01:00","close_reason":"Tests written in test/sql/ts_forecast_ets_model.test - 14/15 pass, 1 fails as expected (invalid spec test)","dependencies":[{"issue_id":"forecast-extension-44a0","depends_on_id":"forecast-extension-2omp","type":"blocks","created_at":"2026-01-16T12:04:49.75820094+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-46bo","title":"Profile ts_cv_forecast_by memory usage","description":"High priority candidate. Profile CPU and memory usage with large dataset, identify LIST() aggregations and bottlenecks.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T12:17:50.984206891+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.634385493+01:00","closed_at":"2026-01-23T12:36:18.634385493+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-46bo","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.064842279+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-46bo","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:15.835206656+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-4bg2","title":"Make ts_detect_changepoints_by robust for edge cases","description":"Handle edge cases gracefully: return 0 changepoints for series with \u003c3 points instead of failing. Document this behavior in API docs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T21:37:10.705100579+01:00","created_by":"simonm","updated_at":"2026-01-23T21:37:31.961670048+01:00","closed_at":"2026-01-23T21:37:31.961670048+01:00","close_reason":"Already handled: series with \u003c3 points return 0 changepoints gracefully. Also fixed MaxThreads=1 to prevent BatchedDataCollection merge errors."}
{"id":"forecast-extension-4c7","title":"Test Auto Selection Models (AutoETS, AutoARIMA, AutoTheta, AutoMFLES, AutoMSTL, AutoTBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:28.342878669+01:00","created_by":"simonm","updated_at":"2026-01-08T16:28:47.020296692+01:00","closed_at":"2026-01-08T16:28:47.020296692+01:00","close_reason":"Added comprehensive tests for Auto Selection Models (AutoETS, AutoARIMA, AutoTheta, AutoMFLES, AutoMSTL, AutoTBATS)"}
{"id":"forecast-extension-4df","title":"Add CI environment detection to telemetry init","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:32:08.954153378+01:00","created_by":"simonm","updated_at":"2026-01-09T23:35:29.508343228+01:00","closed_at":"2026-01-09T23:35:29.508343228+01:00","close_reason":"Closed"}
{"id":"forecast-extension-4dn","title":"Create ts_backtest_auto wrapper macro","description":"Create a high-level wrapper macro for the 80% use case.\n\n## Problem\nThe 3-step process (Generate -\u003e Materialize -\u003e Join) is flexible but brittle for common use cases.\n\n## Solution\nCreate `ts_backtest_auto` macro:\n\n```sql\nSELECT * FROM ts_backtest_auto(\n    table_name := 'source',\n    time_col := 'date',\n    target_col := 'sales',\n    horizon := 7,\n    folds := 5,\n    gap := 0\n);\n```\n\nReturns: A table with `forecast`, `actual`, `error`, `fold_id`.\n\n## Benefits\n- Most users just want error metrics\n- No manual split table management\n- Lower barrier to entry","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-10T14:24:51.939286345+01:00","created_by":"simonm","updated_at":"2026-01-10T16:23:59.213077042+01:00","closed_at":"2026-01-10T16:23:59.213077042+01:00","close_reason":"Implemented ts_backtest_auto macro - one-liner backtest with tests and documentation","dependencies":[{"issue_id":"forecast-extension-4dn","depends_on_id":"forecast-extension-qwe","type":"blocks","created_at":"2026-01-10T14:25:05.769654549+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-4dn","depends_on_id":"forecast-extension-woy","type":"blocks","created_at":"2026-01-10T14:25:07.15817615+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-4dn","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:22.472184823+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-4mo","title":"Implement conformal prediction core algorithms in anofox-forecast crate","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-12T14:19:02.075253667+01:00","created_by":"simonm","updated_at":"2026-01-12T15:03:13.038798072+01:00","closed_at":"2026-01-12T15:03:13.038798072+01:00","close_reason":"External crates anofox-forecast and anofox-regression already have conformal prediction support","dependencies":[{"issue_id":"forecast-extension-4mo","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:19.25764425+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-4uo","title":"Implement ts_combine_keys macro","description":"Create table macro to combine multiple ID columns into single unique_id. Parameters: table, id_columns[], date, value, options MAP.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T20:35:49.816829005+01:00","created_by":"simonm","updated_at":"2026-01-13T20:49:22.449161949+01:00","closed_at":"2026-01-13T20:49:22.449161949+01:00","close_reason":"Implemented and tested ts_combine_keys macro","dependencies":[{"issue_id":"forecast-extension-4uo","depends_on_id":"forecast-extension-mu1","type":"blocks","created_at":"2026-01-13T20:36:00.860754135+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-50uj","title":"Profile ts_detect_periods_by CPU/memory usage","description":"Lower priority candidate. Profile CPU and memory usage for period detection function.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T12:25:09.194975084+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.771460886+01:00","closed_at":"2026-01-23T12:36:18.771460886+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-50uj","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:25:09.228880986+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-50uj","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:25:19.806085075+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-56h","title":"Demonstrate ts_cv_split() for backtest folds","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.504442245+01:00","created_by":"simonm","updated_at":"2026-01-10T00:00:15.145068132+01:00","closed_at":"2026-01-10T00:00:15.145068132+01:00","close_reason":"Created examples/02_ts_cv_split_demo.sql demonstrating: ts_cv_generate_folds, ts_cv_split_folds, ts_cv_split with expanding/fixed windows, joining back features for forecasting"}
{"id":"forecast-extension-56y","title":"Support integer date columns in ts_fill_gaps and related functions","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T15:42:01.830548562+01:00","created_by":"simonm","updated_at":"2026-01-09T17:25:38.332613772+01:00","closed_at":"2026-01-09T17:25:38.332613772+01:00","close_reason":"INTEGER/BIGINT date column support implemented in ts_fill_gaps_native and ts_fill_forward_native. Both functions handle INTEGER/BIGINT columns with raw integer frequency (e.g., '1' for sequential integers). Verified with tests.","dependencies":[{"issue_id":"forecast-extension-56y","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.211903871+01:00","created_by":"simonm"}],"comments":[{"id":1,"issue_id":"forecast-extension-56y","author":"simonm","text":"## Problem\n\nCurrently ts_fill_gaps, ts_fill_forward, ts_fill_gaps_operator, and related functions only support DATE/TIMESTAMP date columns. When an integer column is passed as the date column, the function fails with:\n\nConversion Error: Unimplemented type for cast (INTEGER -\u003e TIMESTAMP)\n\n## Use Cases\n\n1. Unix timestamps - Seconds/milliseconds since epoch stored as INTEGER/BIGINT\n2. Sequential integers - Simple 1, 2, 3... representing time periods\n3. Custom epoch - Days/hours from a custom start date\n\n## Proposed Solution\n\nDetect integer date columns and handle them appropriately:\n- For sequential integers: Use integer arithmetic instead of generate_series\n- For Unix timestamps: Auto-convert to TIMESTAMP internally\n- Consider adding a date_type parameter to specify interpretation\n\n## Affected Functions\n\n- ts_fill_gaps\n- ts_fill_forward\n- ts_fill_gaps_operator\n- ts_forecast_by\n- ts_forecast_exog_by\n\n## Workaround\n\nUsers can currently cast integer dates before calling the function.","created_at":"2026-01-09T14:42:20Z"},{"id":8,"issue_id":"forecast-extension-56y","author":"simonm","text":"## Note on Architecture\n\nThe Rust `fill_gaps()` and `fill_forward()` functions already work with `i64` dates.\n\nFor INTEGER date column support:\n- The C++ wrapper just needs to pass INTEGER values directly as i64\n- No Rust changes needed - just C++ type handling\n\nThis task can be closed once forecast-extension-e2n is done, as INTEGER support comes naturally from the i64-based Rust implementation.","created_at":"2026-01-09T15:00:27Z"}]}
{"id":"forecast-extension-5f8","title":"Update API docs for CV/backtesting params MAP refactor","description":"Update docs/API_REFERENCE.md Cross-Validation \u0026 Backtesting section after the params MAP refactoring is complete.\n\nFunctions to update:\n- ts_cv_split\n- ts_cv_generate_folds\n- ts_fill_unknown\n\nEnsure documentation shows:\n- New signatures with params MAP\n- Example usage with MAP{}\n- Example usage with options: MAP{'window_type': 'fixed'}\n- Consistent style with forecasting section","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T01:13:42.716895787+01:00","created_by":"simonm","updated_at":"2026-01-10T10:39:02.679784457+01:00","closed_at":"2026-01-10T10:39:02.679784457+01:00","close_reason":"Updated API documentation for ts_cv_split, ts_cv_generate_folds, and ts_fill_unknown to use params MAP pattern","dependencies":[{"issue_id":"forecast-extension-5f8","depends_on_id":"forecast-extension-drm","type":"blocks","created_at":"2026-01-10T01:13:49.700597879+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-5f8","depends_on_id":"forecast-extension-hlp","type":"blocks","created_at":"2026-01-10T01:13:49.733562729+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-5f8","depends_on_id":"forecast-extension-y1x","type":"blocks","created_at":"2026-01-10T01:13:49.767400908+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-5fi","title":"Test Exponential Smoothing Models (Holt, HoltWinters, SeasonalES, SeasonalESOptimized, SeasonalWindowAverage)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:33.261004861+01:00","created_by":"simonm","updated_at":"2026-01-08T16:08:34.649370705+01:00","closed_at":"2026-01-08T16:08:34.649370705+01:00","close_reason":"Added comprehensive tests for exponential smoothing models (Holt, HoltWinters, SeasonalES, SeasonalESOptimized, SeasonalWindowAverage) in test/sql/ts_forecast_exp_smoothing.test. All 20 test files pass with 707 assertions."}
{"id":"forecast-extension-5iu","title":"Implement or document integer frequency support","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:52.201284358+01:00","created_by":"simonm","updated_at":"2026-01-09T15:30:49.242756738+01:00","closed_at":"2026-01-09T15:30:49.242756738+01:00","close_reason":"Integer frequency support implemented - accepts pure integers (as days), Polars-style, and DuckDB INTERVAL formats","dependencies":[{"issue_id":"forecast-extension-5iu","depends_on_id":"forecast-extension-kx8","type":"blocks","created_at":"2026-01-09T14:56:01.175748039+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-5p4","title":"[GH#50] Fix BOCPD marking first/last observations as changepoints","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T21:23:47.933487225+01:00","created_by":"simonm","updated_at":"2026-01-08T21:57:51.718638065+01:00","closed_at":"2026-01-08T21:57:51.718638065+01:00","close_reason":"Bug was already fixed in Rust rewrite. Added 10 regression tests and updated documentation."}
{"id":"forecast-extension-5r7","title":"Example 4: Advanced Composable Pipeline (step-by-step)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:28:13.531324613+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.570855138+01:00","closed_at":"2026-01-10T19:34:00.570855138+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-5r7","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:28:23.001730536+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-5r7","depends_on_id":"forecast-extension-qcb","type":"blocks","created_at":"2026-01-10T19:28:24.045432164+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-5v0","title":"Implement ts_aggregate_hierarchy macro","description":"Main function: combine keys AND create aggregated series at all hierarchy levels. Defaults: all aggregation levels, separator='|'.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T20:35:50.824259542+01:00","created_by":"simonm","updated_at":"2026-01-13T20:52:17.029619617+01:00","closed_at":"2026-01-13T20:52:17.029619617+01:00","close_reason":"Implemented and tested ts_aggregate_hierarchy macro","dependencies":[{"issue_id":"forecast-extension-5v0","depends_on_id":"forecast-extension-4uo","type":"blocks","created_at":"2026-01-13T20:36:00.894462616+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-60vn","title":"Profile ts_fill_gaps_native vs ts_fill_gaps_by","description":"Compare CPU and memory usage between native table_in_out implementation and SQL macro. Document before/after metrics for PR description.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T12:18:13.379200793+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.647595042+01:00","closed_at":"2026-01-23T12:36:18.647595042+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-60vn","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.414929437+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-60vn","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:30.600650383+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-67dv","title":"Benchmark execution speed on M5 dataset","description":"Compare execution time for AutoARIMA on M5 dataset: DuckDB+anofox_forecast vs Python+statsforecast","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T14:34:56.897263994+01:00","created_by":"simonm","updated_at":"2026-01-26T15:29:50.862949841+01:00","closed_at":"2026-01-26T15:29:50.862949841+01:00","close_reason":"Benchmarks complete: 1M rows - DuckDB 23.7x faster, memory similar"}
{"id":"forecast-extension-68yk","title":"Create ts_detrend_by table macro","description":"Add ts_detrend_by table macro following the same pattern as other _by macros. Support params: method ('linear', 'quadratic', 'cubic', 'auto'). Return columns: id, trend, detrended, method, coefficients, rss, n_params. Files: src/macros/ts_macros.cpp","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T21:10:05.576202583+01:00","created_by":"simonm","updated_at":"2026-01-22T21:21:10.63568145+01:00","closed_at":"2026-01-22T21:21:10.63568145+01:00","close_reason":"Implemented ts_detrend_by table macro"}
{"id":"forecast-extension-69h","title":"Fix ts_periods.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:25.662640436+01:00","created_by":"simonm","updated_at":"2026-01-08T20:18:32.900173694+01:00","closed_at":"2026-01-08T20:18:32.900173694+01:00","close_reason":"Fixed all 12 period detection functions to return NULL instead of throwing"}
{"id":"forecast-extension-6a8","title":"Fix ts_data_quality.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:28.065204333+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.391333902+01:00","closed_at":"2026-01-08T20:26:45.391333902+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-6cc2","title":"Add leading/trailing stats: n_zeros_start, n_zeros_end, plateau_size, plateau_size_nonzero","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T07:39:43.903053759+01:00","created_by":"simonm","updated_at":"2026-01-16T07:49:58.469304519+01:00","closed_at":"2026-01-16T07:49:58.469304519+01:00","close_reason":"Implemented in PR for issue #86"}
{"id":"forecast-extension-6gt","title":"Fix ts_decomposition.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:28.3742221+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.397479853+01:00","closed_at":"2026-01-08T20:26:45.397479853+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-6nx","title":"Implement ts_interval_width utility","description":"ts_interval_width(lowers[], uppers[]) -\u003e DOUBLE[]. Convenience function returning upper - lower per element.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-14T22:21:28.042786078+01:00","created_by":"simonm","updated_at":"2026-01-17T20:19:35.846624524+01:00","closed_at":"2026-01-17T20:19:35.846624524+01:00","close_reason":"ts_interval_width implemented in ts_macros.cpp and anofox-fcst-ffi"}
{"id":"forecast-extension-6rir","title":"GH#95: Refactor params API to STRUCT + restructure docs","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-17T20:20:29.113584395+01:00","created_by":"simonm","updated_at":"2026-01-17T21:13:45.162078816+01:00","closed_at":"2026-01-17T21:13:45.162078816+01:00","close_reason":"Completed: STRUCT params API implemented (PR#96) and docs restructured (api/ and guides/ directories)"}
{"id":"forecast-extension-750","title":"Enable parallel fold execution via fold_id grouping","description":"Structure forecasting to accept fold_id as a grouping key for parallel execution.\n\n## Problem\nCurrent integration implies looping through folds:\n`WHERE split = 'train' AND fold_id = 1`\nThis forces serial execution in the application layer.\n\n## Solution\nDuckDB shines at vectorization. Structure forecasting function to accept fold_id as a grouping key alongside group_col:\n\n```sql\n-- Run ALL folds for ALL groups in one massive parallel query\nSELECT * FROM ts_forecast_by(\n    'cv_splits',\n    group_cols=['category', 'fold_id'], -- Group by fold too!\n    ...\n);\n```\n\n## Benefits\n- DuckDB parallelizes Fold 1 on Thread A, Fold 2 on Thread B automatically\n- No application-layer loop required\n- Better resource utilization","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T14:24:50.84976559+01:00","created_by":"simonm","updated_at":"2026-01-10T15:20:50.763075565+01:00","closed_at":"2026-01-10T15:20:50.763075565+01:00","close_reason":"Added ts_cv_forecast_by macro for parallel fold execution with tests, example, and documentation","dependencies":[{"issue_id":"forecast-extension-750","depends_on_id":"forecast-extension-g4b","type":"blocks","created_at":"2026-01-10T14:25:09.085905187+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-750","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:21.489170895+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-79q","title":"Add gap filling examples","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T14:07:09.287534943+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.167771768+01:00","closed_at":"2026-01-13T14:35:03.167771768+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-7a1","title":"Add forecasting examples","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T14:07:09.110236296+01:00","created_by":"simonm","updated_at":"2026-01-23T14:34:47.660973741+01:00","closed_at":"2026-01-23T14:34:47.660973741+01:00","close_reason":"Comprehensive forecasting examples already implemented with synthetic_forecasting_examples.sql covering 7 sections: basic forecasting, model comparison, seasonal models, MSTL, intermittent demand, exogenous variables, and quality comparison"}
{"id":"forecast-extension-7cg","title":"Test Multiple Seasonality Models (MFLES, MSTL, TBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:39.397323256+01:00","created_by":"simonm","updated_at":"2026-01-08T16:24:18.102280626+01:00","closed_at":"2026-01-08T16:24:18.102280626+01:00","close_reason":"Added comprehensive tests for Multiple Seasonality Models (MFLES, MSTL, TBATS) in test/sql/ts_forecast_multi_seasonal.test. All 24 test files pass with 1054 assertions."}
{"id":"forecast-extension-7cw","title":"Add tests for advanced period detection methods (ts_autoperiod, ts_lomb_scargle)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:29:34.106009311+01:00","created_by":"simonm","updated_at":"2026-01-08T16:37:55.012892562+01:00","closed_at":"2026-01-08T16:37:55.012892562+01:00","close_reason":"Added comprehensive tests for advanced period detection methods (ts_autoperiod, ts_cfd_autoperiod, ts_lomb_scargle)"}
{"id":"forecast-extension-7j55","title":"Add value-based stats: n_nan, n_unique_values, is_constant","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T07:39:42.934927819+01:00","created_by":"simonm","updated_at":"2026-01-16T07:49:58.45622896+01:00","closed_at":"2026-01-16T07:49:58.45622896+01:00","close_reason":"Implemented in PR for issue #86"}
{"id":"forecast-extension-7jv","title":"Implement ts_prepare_regression_input","description":"Create the 'Adapter' for anofox-statistics models.\n\n**Logic:**\n- Create sub-macro/function that takes (cv_split_table, original_data)\n- If row is in TEST split, force target to NULL (to trigger prediction)\n- If row is in TRAIN split, keep original target\n- Always keep features\n- Exclude gaps/embargoes (WHERE split IN ('train', 'test'))\n\n```sql\nSELECT\n    t.group_col,\n    t.date_col,\n    CASE WHEN s.split = 'test' THEN NULL ELSE t.target_col END as target,\n    t.feature_1, t.feature_2...\nFROM original_data t\nJOIN cv_split_table s ON t.date = s.date AND t.group = s.group\nWHERE s.split IN ('train', 'test')\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T17:07:57.971119816+01:00","created_by":"simonm","updated_at":"2026-01-10T17:17:46.254633806+01:00","closed_at":"2026-01-10T17:17:46.254633806+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-7jv","depends_on_id":"forecast-extension-ebn","type":"blocks","created_at":"2026-01-10T17:08:11.293231499+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-7jv","depends_on_id":"forecast-extension-b0t","type":"blocks","created_at":"2026-01-10T17:08:13.984245167+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-7mpf","title":"Implement ETS model parameter parsing","description":"Parse 'model' parameter from params MAP for ETS forecasting:\n- Extract model value from ForecastOptions/params\n- Default to 'AAA' when not specified\n- Pass to ETSSpec::from_notation() in Rust FFI layer\n- Handle validation errors gracefully\n\nRelated: GH #93","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T12:04:41.459318112+01:00","created_by":"simonm","updated_at":"2026-01-17T20:19:20.637575659+01:00","closed_at":"2026-01-17T20:19:20.637575659+01:00","close_reason":"ETS model parameter parsing implemented with is_valid_ets_notation, ETSSpec::from_notation, and is_valid() validation in forecast.rs:1095-1140","dependencies":[{"issue_id":"forecast-extension-7mpf","depends_on_id":"forecast-extension-44a0","type":"blocks","created_at":"2026-01-16T12:04:49.794986818+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-7ps","title":"Create batch error isolation test file ts_forecast_error_isolation.test","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:48:57.220036597+01:00","created_by":"simonm","updated_at":"2026-01-08T19:06:00.465435107+01:00","closed_at":"2026-01-08T19:06:00.465435107+01:00","close_reason":"Created test file with 122 assertions covering batch error isolation scenarios","dependencies":[{"issue_id":"forecast-extension-7ps","depends_on_id":"forecast-extension-fnq","type":"blocks","created_at":"2026-01-08T17:49:17.942415032+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-7qy3","title":"Implement Cross-Encoder Reranking","description":"## Context\nSenior Rust Engineer task for leann-rs (high-performance vector database and RAG engine).\nStack: Rust 1.88+, candle-core, surrealdb/hnsw, tokio.\n\n## Target Modules\n- leann-embed (Model)\n- leann-search (Pipeline)\n\n## Implementation Steps\n\n### 1. Dependency Update\nAdd candle-transformers with bert support to `leann-embed/Cargo.toml`.\n\n### 2. Model Struct\nCreate `Reranker` struct in leann-embed:\n- Load cross-encoder model (recommend mixedbread-ai/mxbai-rerank-xsmall-v1)\n- Implement: `pub fn compute_score(\u0026self, query: \u0026str, documents: \u0026[\u0026str]) -\u003e Result\u003cVec\u003cf32\u003e\u003e`\n\n### 3. Search Pipeline Update\nModify search function in leann-search:\n- Phase 1 (Recall): Fetch N=50 results using existing HNSW/BM25 index\n- Phase 2 (Precision): Pass 50 candidates to Reranker::compute_score\n- Phase 3 (Filter): Sort by new score, return top K=5\n\n### 4. CLI Flag\nUpdate leann-cli to accept `--rerank` flag (bool) to toggle this step.\n\n## Constraints\n- Prioritize local inference (leann-embed + Candle) over external APIs\n- Maintain zero-copy principles and high performance","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-19T16:23:22.038173286+01:00","created_by":"simonm","updated_at":"2026-01-19T16:23:48.266305305+01:00","deleted_at":"2026-01-19T16:23:48.266305305+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"forecast-extension-7s3","title":"Add conformal prediction examples and documentation","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-12T14:19:07.622501259+01:00","created_by":"simonm","updated_at":"2026-01-17T20:19:36.701076876+01:00","closed_at":"2026-01-17T20:19:36.701076876+01:00","close_reason":"Conformal prediction examples in examples/conformal_prediction/ with README.md and synthetic_conformal_examples.sql","dependencies":[{"issue_id":"forecast-extension-7s3","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:24.189851579+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-7s3","depends_on_id":"forecast-extension-uok","type":"blocks","created_at":"2026-01-12T14:19:28.335648114+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-8dd","title":"ts_forecast_by: Test parameters via MAP (confidence_level, seasonal_period)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:15.974724151+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.63610543+01:00","closed_at":"2026-01-08T15:52:30.63610543+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-8nz","title":"Add period detection examples","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T14:07:09.238624449+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.196332957+01:00","closed_at":"2026-01-13T14:35:03.196332957+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-8oy8","title":"Profile ts_quality_report CPU/memory usage","description":"Profile CPU and memory usage for quality report function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:40.328083926+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:30.905076565+01:00","closed_at":"2026-01-23T12:36:30.905076565+01:00","close_reason":"Conformal and some data quality functions skipped - require different input format. See PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-8oy8","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.079250751+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-8oy8","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:51.073147949+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-8v04","title":"Refactor ts_fill_gaps_by to use table_in_out","description":"If profiling shows table_in_out is more efficient, refactor ts_fill_gaps_by to use it internally. Preserve column names and types.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:18:16.895030716+01:00","created_by":"simonm","updated_at":"2026-01-23T13:01:50.893272831+01:00","closed_at":"2026-01-23T13:01:50.893272831+01:00","close_reason":"Refactored fill macros to use native streaming implementations. Memory reduced from 181MB to 12MB (ts_fill_gaps_by) and 127MB to 13MB (ts_fill_forward_by). Tests pass.","dependencies":[{"issue_id":"forecast-extension-8v04","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.438255287+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-8v04","depends_on_id":"forecast-extension-ayfl","type":"blocks","created_at":"2026-01-23T12:19:20.718785787+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-8v04","depends_on_id":"forecast-extension-vrnw","type":"blocks","created_at":"2026-01-23T12:36:37.741961861+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-92f6","title":"Profile ts_conformal_by CPU/memory usage","description":"Profile CPU and memory usage for conformal prediction function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:31.506756035+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:30.835400666+01:00","closed_at":"2026-01-23T12:36:30.835400666+01:00","close_reason":"Conformal and some data quality functions skipped - require different input format. See PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-92f6","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.018226201+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-92f6","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:50.856588428+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-95f","title":"Make unknown feature masking proactive/fail-safe","description":"Change unknown feature handling from reactive to proactive.\n\n## Problem\nCurrent `ts_fill_unknown` is reactive - you have to remember to call it after the split.\n\n## Solution\nMake it proactive:\n- When defining the split, allow user to define schema of 'unknowns'\n- If a feature is NOT marked 'known', the engine should DEFAULT to masking it in test set\n- Fail-safe rather than fail-open design\n\n## Implementation\n- Add optional `known_features` or `unknown_features` parameter to fold generation\n- Store this metadata with the fold config\n- Apply masking automatically during hydration/join\n- Warn if joining columns that aren't in known list","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:24:53.258934105+01:00","created_by":"simonm","updated_at":"2026-01-10T15:53:46.914305283+01:00","closed_at":"2026-01-10T15:53:46.914305283+01:00","close_reason":"Added ts_hydrate_split_strict for fail-safe proactive masking with tests and documentation","dependencies":[{"issue_id":"forecast-extension-95f","depends_on_id":"forecast-extension-woy","type":"blocks","created_at":"2026-01-10T14:25:07.939510572+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-95f","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:23.209581329+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-96j4","title":"Profile ts_fill_forward_native vs ts_fill_forward_by","description":"Compare CPU and memory usage between native table_in_out implementation and SQL macro. Document before/after metrics for PR description.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T12:18:14.417172119+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.661608242+01:00","closed_at":"2026-01-23T12:36:18.661608242+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-96j4","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.424077865+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-96j4","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:30.632359465+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-97m","title":"Add conformal prediction examples","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T14:07:09.309463281+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.153803737+01:00","closed_at":"2026-01-13T14:35:03.153803737+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-986","title":"Add documentation examples for multi-key functions","description":"Create examples/multi_key_hierarchy/README.md with runnable examples.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-13T20:35:53.370376912+01:00","created_by":"simonm","updated_at":"2026-01-13T21:00:10.438726913+01:00","closed_at":"2026-01-13T21:00:10.438726913+01:00","close_reason":"Added documentation with README.md and runnable SQL examples","dependencies":[{"issue_id":"forecast-extension-986","depends_on_id":"forecast-extension-w58","type":"blocks","created_at":"2026-01-13T20:36:01.062041646+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-98h","title":"Implement CalibrationProfile struct and ts_conformal_learn","description":"Core learning function. CalibrationProfile has: method VARCHAR, alphas DOUBLE[], scores_lower DOUBLE[], scores_upper DOUBLE[]. Supports symmetric, asymmetric, adaptive methods. Vectorized alphas for multi-coverage.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T22:21:22.979647944+01:00","created_by":"simonm","updated_at":"2026-01-17T20:18:54.97362464+01:00","closed_at":"2026-01-17T20:18:54.97362464+01:00","close_reason":"ts_conformal_learn implemented in C++ (conformal.cpp) with FFI bindings"}
{"id":"forecast-extension-9dk","title":"Write extreme value batch tests (1e308, 1e-308)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T17:49:02.970818796+01:00","created_by":"simonm","updated_at":"2026-01-08T19:52:14.66354638+01:00","closed_at":"2026-01-08T19:52:14.66354638+01:00","close_reason":"Added extreme value batch tests (1e308, 1e-308, inf, nan)","dependencies":[{"issue_id":"forecast-extension-9dk","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:18.064231251+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-9i4","title":"Update root README.md to remove backtesting docs references","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T23:58:26.222524813+01:00","created_by":"simonm","updated_at":"2026-01-10T23:59:48.439858357+01:00","closed_at":"2026-01-10T23:59:48.439858357+01:00","close_reason":"Root README.md already points to examples/backtesting/README.md - no references to deleted files"}
{"id":"forecast-extension-9lr","title":"Add unit tests for empty/small array edge cases","description":"Add tests for: empty arrays, single element, two elements. Verify graceful handling instead of crash.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T20:52:39.042590996+01:00","created_by":"simonm","updated_at":"2026-01-14T21:11:28.128828802+01:00","closed_at":"2026-01-14T21:11:28.128828802+01:00","close_reason":"Added unit tests for empty array, single element, and small array edge cases","dependencies":[{"issue_id":"forecast-extension-9lr","depends_on_id":"forecast-extension-z38","type":"blocks","created_at":"2026-01-14T20:52:53.942618215+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-9v2","title":"Add skip_length parameter for custom fold spacing","description":"Python has skip_length parameter allowing custom spacing between CV folds. Currently DuckDB automatically spaces folds by horizon. Add skip_length parameter to ts_cv_generate_folds and ts_backtest_auto to allow: skip_length=1 (dense overlapping folds), skip_length=horizon (default, current behavior), skip_length=30 (monthly spacing). Parameter goes in params MAP as 'skip_length'.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T21:43:20.422941932+01:00","created_by":"simonm","updated_at":"2026-01-10T21:51:52.179602867+01:00","closed_at":"2026-01-10T21:51:52.179602867+01:00","close_reason":"Implemented skip_length parameter in ts_cv_generate_folds and ts_backtest_auto with tests and documentation"}
{"id":"forecast-extension-9vhc","title":"Profile ts_data_quality CPU/memory usage","description":"Profile CPU and memory usage for data quality function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:37.217388199+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:30.87436715+01:00","closed_at":"2026-01-23T12:36:30.87436715+01:00","close_reason":"Conformal and some data quality functions skipped - require different input format. See PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-9vhc","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.06131345+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-9vhc","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:51.006862772+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-9wu","title":"Fix ts_seasonality.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:27.466401723+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.37841765+01:00","closed_at":"2026-01-08T20:26:45.37841765+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-a4m","title":"ts_forecast_by: Test Theta Methods (Theta, OptimizedTheta, DynamicTheta, DynamicOptimizedTheta)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:09.621124341+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.564967977+01:00","closed_at":"2026-01-08T15:52:30.564967977+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-a4z","title":"Doc: Standard layout for each example (Scenario, SQL, Why it Works)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:30:09.715512764+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.598675994+01:00","closed_at":"2026-01-10T19:34:00.598675994+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-a4z","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:30:23.409426486+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-a4z","depends_on_id":"forecast-extension-p54","type":"blocks","created_at":"2026-01-10T19:30:24.73375937+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-a5yb","title":"Update ts_forecast_by family macros for STRUCT params","description":"Update ts_forecast_by, ts_cv_forecast_by, and related forecasting macros to use STRUCT params via param_value helper. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:53.261048563+01:00","created_by":"simonm","updated_at":"2026-01-17T20:34:24.016426195+01:00","closed_at":"2026-01-17T20:34:24.016426195+01:00","close_reason":"ts_forecast, ts_forecast_by, ts_cv_forecast_by updated to use JSON extraction","dependencies":[{"issue_id":"forecast-extension-a5yb","depends_on_id":"forecast-extension-viff","type":"blocks","created_at":"2026-01-17T20:23:26.031403823+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-a5yb","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:42.490575491+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-a6k","title":"Demonstrate known vs unknown feature handling with ts_fill_unknown()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.641434462+01:00","created_by":"simonm","updated_at":"2026-01-10T00:12:16.59058097+01:00","closed_at":"2026-01-10T00:12:16.59058097+01:00","close_reason":"Created examples/06_known_unknown_features.sql demonstrating: known vs unknown feature concepts, ts_fill_unknown with last_value/null/default strategies, CV integration, ts_mark_unknown for custom logic"}
{"id":"forecast-extension-as8","title":"Create backtesting documentation examples (5 progressive SQL files)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T19:28:02.309828159+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.656574675+01:00","closed_at":"2026-01-10T19:34:00.656574675+01:00","close_reason":"Closed"}
{"id":"forecast-extension-asz","title":"ts_forecast_by: Test Exponential Smoothing Models (Holt, HoltWinters, SeasonalES, SeasonalESOptimized, SeasonalWindowAverage)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:08.190439073+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.552728964+01:00","closed_at":"2026-01-08T15:52:30.552728964+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-auh","title":"ts_forecast_by: Test Auto Selection Models (AutoETS, AutoARIMA, AutoTheta, AutoMFLES, AutoMSTL, AutoTBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:05.57740352+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.592521539+01:00","closed_at":"2026-01-08T15:52:30.592521539+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-aux2","title":"Convert ts_mstl_decomposition_by to native streaming","description":"ts_decompose_by uses ~35 MB peak memory with LIST() aggregation. Lower priority than ts_cv_forecast_by but should be converted for consistency with other streaming functions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T15:38:57.932979206+01:00","created_by":"simonm","updated_at":"2026-01-23T16:47:24.985037532+01:00","closed_at":"2026-01-23T16:47:24.985037532+01:00","close_reason":"Implemented native streaming for ts_mstl_decomposition_by. Memory was already low (~35 MB), so minimal improvement, but adds consistency."}
{"id":"forecast-extension-avz","title":"Test Basic Models (SMA, SeasonalNaive, SES, SESOptimized, RandomWalkDrift)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:32.132378283+01:00","created_by":"simonm","updated_at":"2026-01-08T16:04:08.615876577+01:00","closed_at":"2026-01-08T16:04:08.615876577+01:00","close_reason":"Added comprehensive tests for basic forecasting models (SMA, SeasonalNaive, SES, SESOptimized, RandomWalkDrift) in test/sql/ts_forecast_basic_models.test. All 19 test files pass with 608 assertions."}
{"id":"forecast-extension-ayfl","title":"Document profiling results for fill functions","description":"Write up CPU and memory profiling results comparing native vs macro implementations. Format results as before/after tables for inclusion in final PR description.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:18:15.929681146+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:44.610150847+01:00","closed_at":"2026-01-23T12:36:44.610150847+01:00","close_reason":"Results documented in benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-ayfl","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.431123859+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ayfl","depends_on_id":"forecast-extension-60vn","type":"blocks","created_at":"2026-01-23T12:19:19.282190234+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ayfl","depends_on_id":"forecast-extension-96j4","type":"blocks","created_at":"2026-01-23T12:19:19.324476004+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-b02","title":"Handle Known vs Unknown Features Automatically","description":"Handle 'External Factors' query automatically in ts_backtest_auto.\n\n**Add logic:**\n- If features list is provided, assume they are Known Features (Future covariates) by default (e.g., calendar, price)\n- If a feature is actually unknown (e.g., 'competitor_sales'), the user must flag it in the MAP\n\n**Action:** Apply ts_hydrate_split using the provided feature list.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T17:08:00.384499523+01:00","created_by":"simonm","updated_at":"2026-01-10T17:24:53.059883341+01:00","closed_at":"2026-01-10T17:24:53.059883341+01:00","close_reason":"All 4 tasks completed: ts_backtest_auto signature updated with features/metric params, ts_prepare_regression_input adapter implemented, ts_backtest_regression for model dispatch, ts_hydrate_features for known/unknown feature handling","dependencies":[{"issue_id":"forecast-extension-b02","depends_on_id":"forecast-extension-ebn","type":"blocks","created_at":"2026-01-10T17:08:13.080253367+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-b02","depends_on_id":"forecast-extension-b0t","type":"blocks","created_at":"2026-01-10T17:08:15.821937628+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-b0t","title":"Update ts_backtest_auto Signature","description":"Allow users to pass external regressors and select a reporting metric.\n\n**Modify Arguments:**\n- Add `features VARCHAR[]` (Default [] or NULL)\n- Add `metric VARCHAR` (Default 'rmse')\n\n**Pass-through:** Ensure features are passed down to the underlying ts_cv_split logic.\n\n**Metric Calculation:**\n- Wrap final result in window function that calculates requested metric per fold\n- Keep returning detailed table, but add column `fold_metric_score` with calculated error for that fold","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T17:07:57.053186568+01:00","created_by":"simonm","updated_at":"2026-01-10T17:16:11.993626545+01:00","closed_at":"2026-01-10T17:16:11.993626545+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-b0t","depends_on_id":"forecast-extension-ebn","type":"blocks","created_at":"2026-01-10T17:08:10.466125182+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-begh","title":"Profile ts_conformal_calibrate CPU/memory usage","description":"Profile CPU and memory usage for conformal calibration function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:34.384164+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:30.862412211+01:00","closed_at":"2026-01-23T12:36:30.862412211+01:00","close_reason":"Conformal and some data quality functions skipped - require different input format. See PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-begh","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.034130062+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-begh","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:50.941748495+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-bjq","title":"Create peak detection example SQL script","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T00:25:27.988065539+01:00","created_by":"simonm","updated_at":"2026-01-10T00:37:10.726231062+01:00","closed_at":"2026-01-10T00:37:10.726231062+01:00","close_reason":"Created peak detection example with sample data, basic detection, and timing analysis"}
{"id":"forecast-extension-bkhx","title":"Extract API_REFERENCE.md content to category files","description":"Move content from monolithic API_REFERENCE.md (~4000 lines) to the new category files in docs/api/. Target ≤500 lines per file. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:58.534284368+01:00","created_by":"simonm","updated_at":"2026-01-17T21:11:57.602607269+01:00","closed_at":"2026-01-17T21:11:57.602607269+01:00","close_reason":"Completed: Created docs/api/ with 11 category files and converted API_REFERENCE.md to index","dependencies":[{"issue_id":"forecast-extension-bkhx","depends_on_id":"forecast-extension-oz88","type":"blocks","created_at":"2026-01-17T20:23:29.038552112+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-bkhx","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:46.665273308+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-bni","title":"Add metrics examples","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-13T14:07:09.336298757+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.222759764+01:00","closed_at":"2026-01-13T14:35:03.222759764+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-bsw","title":"Add month/calendar features via SQL DATE_PART","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.556689067+01:00","created_by":"simonm","updated_at":"2026-01-10T00:04:50.389130981+01:00","closed_at":"2026-01-10T00:04:50.389130981+01:00","close_reason":"Created examples/04_calendar_features.sql demonstrating: DATE_PART extraction, derived features (season, holiday indicators), cyclical encoding (sin/cos), one-hot encoding, future date generation"}
{"id":"forecast-extension-byv","title":"Write unit tests for time column type preservation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:49.442964544+01:00","created_by":"simonm","updated_at":"2026-01-09T14:59:03.966581677+01:00","closed_at":"2026-01-09T14:59:03.966581677+01:00","close_reason":"Closed"}
{"id":"forecast-extension-c031","title":"Add violation_rate to ConformalEvaluation struct","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T22:41:49.65108137+01:00","created_by":"simonm","updated_at":"2026-01-14T22:49:51.767259669+01:00","closed_at":"2026-01-14T22:49:51.767259669+01:00","close_reason":"Added violation_rate field to ConformalEvaluation struct (1 - coverage). Added test for evaluation with violations."}
{"id":"forecast-extension-c4u","title":"Test Intermittent Demand Models (CrostonClassic, CrostonOptimized, CrostonSBA, ADIDA, IMAPA, TSB)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:40.457366777+01:00","created_by":"simonm","updated_at":"2026-01-08T16:20:39.579407743+01:00","closed_at":"2026-01-08T16:20:39.579407743+01:00","close_reason":"Added comprehensive tests for Intermittent Demand Models (CrostonClassic, CrostonOptimized, CrostonSBA, ADIDA, IMAPA, TSB) in test/sql/ts_forecast_intermittent.test. All 23 test files pass with 969 assertions."}
{"id":"forecast-extension-cbg","title":"Fix ts_stats.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:26.572560213+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.361202144+01:00","closed_at":"2026-01-08T20:26:45.361202144+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-cfe","title":"Update ts_fill_gaps_operator to use C++ table function","description":"Update ts_fill_gaps_operator to use the new C++ table function for type preservation. Depends on forecast-extension-e2n.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T15:57:18.704988679+01:00","created_by":"simonm","updated_at":"2026-01-09T17:25:38.374089436+01:00","closed_at":"2026-01-09T17:25:38.374089436+01:00","close_reason":"Native functions (ts_fill_gaps_native, ts_fill_forward_native) provide type preservation. Users can use these directly instead of modifying the existing operator. Keeping the original operator unchanged avoids breaking changes while the native functions offer the enhanced functionality.","dependencies":[{"issue_id":"forecast-extension-cfe","depends_on_id":"forecast-extension-e2n","type":"blocks","created_at":"2026-01-09T15:57:25.577809784+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-cfe","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.183201436+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-cme","title":"Fix ts_filter.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:26.862472512+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.366870741+01:00","closed_at":"2026-01-08T20:26:45.366870741+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-cmf","title":"ts_forecast_by: Test Intermittent Demand Models (CrostonClassic, CrostonOptimized, CrostonSBA, ADIDA, IMAPA, TSB)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:13.731609108+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.606004745+01:00","closed_at":"2026-01-08T15:52:30.606004745+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-co3","title":"Write model-specific batch tests (AutoETS, HoltWinters, etc.)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T17:49:00.875157072+01:00","created_by":"simonm","updated_at":"2026-01-08T19:52:14.634951925+01:00","closed_at":"2026-01-08T19:52:14.634951925+01:00","close_reason":"Added model-specific batch tests for 11 models","dependencies":[{"issue_id":"forecast-extension-co3","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:18.035333797+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-d51","title":"Fix time column type preservation issues","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:51.310963297+01:00","created_by":"simonm","updated_at":"2026-01-09T15:18:54.877974517+01:00","closed_at":"2026-01-09T15:18:54.877974517+01:00","close_reason":"Investigated DATE to TIMESTAMP conversion. This is a SQL/DuckDB limitation: generate_series returns TIMESTAMP and SQL type system is determined at query planning time. Documented limitation in test file with workaround: SELECT date_col::DATE FROM ts_fill_gaps(...)","dependencies":[{"issue_id":"forecast-extension-d51","depends_on_id":"forecast-extension-byv","type":"blocks","created_at":"2026-01-09T14:56:01.146514986+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-d8s","title":"Design and implement ts_fill_unknown C++ UDF","description":"Implement C++ window/aggregate UDF for filling unknown future features in test set. Strategies: default(value), last_value, null. Must respect series_id boundaries.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T11:47:55.362428823+01:00","created_by":"simonm","updated_at":"2026-01-09T12:54:47.551430641+01:00","closed_at":"2026-01-09T12:54:47.551430641+01:00","close_reason":"Implemented ts_fill_unknown as SQL table macro with strategies: default, last_value, null. Added comprehensive tests."}
{"id":"forecast-extension-db4","title":"Conformal Prediction for Distribution-Free Prediction Intervals","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-12T14:19:01.04384169+01:00","created_by":"simonm","updated_at":"2026-01-17T20:20:13.564276141+01:00","closed_at":"2026-01-17T20:20:13.564276141+01:00","close_reason":"All 7 subtasks completed: core algorithms, regression support, fcst-core, C++ scalar functions, FFI bindings, examples/docs, SQL table macros"}
{"id":"forecast-extension-ddt6","title":"Profile and document streaming conversions","description":"After converting ts_forecast_by and ts_cv_split_by to native streaming, re-run profiling to measure actual memory improvements. Update docs/dev/memory-patterns.md with before/after comparisons.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T14:51:18.299752812+01:00","created_by":"simonm","updated_at":"2026-01-23T15:26:58.953661871+01:00","closed_at":"2026-01-23T15:26:58.953661871+01:00","close_reason":"Updated docs/dev/memory-patterns.md with profiling results for ts_forecast_by (99% reduction) and ts_cv_split_by (47% reduction).","dependencies":[{"issue_id":"forecast-extension-ddt6","depends_on_id":"forecast-extension-jl0t","type":"blocks","created_at":"2026-01-23T14:51:24.934728168+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ddt6","depends_on_id":"forecast-extension-3omm","type":"blocks","created_at":"2026-01-23T14:51:24.969722636+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-dipl","title":"Refactor ts_fill_forward_by to use table_in_out","description":"If profiling shows table_in_out is more efficient, refactor ts_fill_forward_by to use it internally. Preserve column names and types.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:18:17.947661156+01:00","created_by":"simonm","updated_at":"2026-01-23T13:01:50.90758683+01:00","closed_at":"2026-01-23T13:01:50.90758683+01:00","close_reason":"Refactored fill macros to use native streaming implementations. Memory reduced from 181MB to 12MB (ts_fill_gaps_by) and 127MB to 13MB (ts_fill_forward_by). Tests pass.","dependencies":[{"issue_id":"forecast-extension-dipl","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.450270268+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-dipl","depends_on_id":"forecast-extension-ayfl","type":"blocks","created_at":"2026-01-23T12:19:20.757758835+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-dipl","depends_on_id":"forecast-extension-vrnw","type":"blocks","created_at":"2026-01-23T12:36:37.772470975+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-djz8","title":"Add ETS spec validation with error messages","description":"Validate ETS spec and return clear errors:\n- Use ETSSpec::is_valid() to check spec\n- Reject unstable models (MAA, MAdA) per FPP3\n- Return descriptive error message for invalid specs\n- Include valid options in error message\n\nRelated: GH #93","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T12:04:42.198790064+01:00","created_by":"simonm","updated_at":"2026-01-17T20:19:21.739612594+01:00","closed_at":"2026-01-17T20:19:21.739612594+01:00","close_reason":"ETS spec validation with clear error messages implemented - rejects unstable MAA/MAdA per FPP3, includes valid options in error message","dependencies":[{"issue_id":"forecast-extension-djz8","depends_on_id":"forecast-extension-7mpf","type":"blocks","created_at":"2026-01-16T12:04:49.827799786+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-dl9","title":"Implement conformal prediction in anofox-fcst-core Rust crate","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T14:19:03.787790147+01:00","created_by":"simonm","updated_at":"2026-01-12T14:46:17.507755415+01:00","closed_at":"2026-01-12T14:46:17.507755415+01:00","close_reason":"Implemented conformal prediction module with split, adaptive, and asymmetric methods. 13 unit tests pass.","dependencies":[{"issue_id":"forecast-extension-dl9","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:20.859399552+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-dp9","title":"Write individual error scenario tests (short, NULL, empty, constant)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:48:58.104844306+01:00","created_by":"simonm","updated_at":"2026-01-08T19:12:33.235409911+01:00","closed_at":"2026-01-08T19:12:33.235409911+01:00","close_reason":"Added 100+ individual error scenario tests (354 total assertions)","dependencies":[{"issue_id":"forecast-extension-dp9","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:17.975560987+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-dpg","title":"Investigate BOCPD implementation to understand why boundary observations are marked as changepoints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:53.534580758+01:00","created_by":"simonm","updated_at":"2026-01-08T21:32:26.769368498+01:00","closed_at":"2026-01-08T21:32:26.769374715+01:00"}
{"id":"forecast-extension-drm","title":"Refactor ts_cv_split to use params MAP instead of positional params","description":"Change ts_cv_split signature from positional optional params to MAP{} pattern consistent with ts_forecast_by.\n\nCurrent: ts_cv_split(source, group_col, date_col, target_col, training_end_times, horizon, frequency, window_type, min_train_size)\n\nProposed: ts_cv_split(source, group_col, date_col, target_col, training_end_times, horizon, frequency, params)\n\nWhere params MAP supports:\n- window_type: 'expanding' (default), 'fixed', 'sliding'\n- min_train_size: minimum training periods (default: 1)\n\nExample:\nSELECT * FROM ts_cv_split('sales', 'store_id', 'date', 'sales', [...], 5, '1d', MAP{'window_type': 'fixed', 'min_train_size': '8'});","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T01:13:28.545383684+01:00","created_by":"simonm","updated_at":"2026-01-10T02:49:49.164154035+01:00","closed_at":"2026-01-10T02:49:49.164154035+01:00","close_reason":"Refactored ts_cv_split to use params MAP. Code committed in feb8567. Testing blocked by pre-existing linker issue (multiple definition of LogicalType) - needs build fix before testing."}
{"id":"forecast-extension-e1p","title":"Implement ts_cv_split SQL table macro","description":"Implement SQL table macro that orchestrates CV split: parameter validation, fold generation (generated vs explicit), window type handling (expanding/fixed/sliding), output mode selection. Calls C++ UDFs for heavy lifting.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T11:47:58.554658295+01:00","created_by":"simonm","updated_at":"2026-01-09T14:00:29.807651153+01:00","closed_at":"2026-01-09T14:00:29.807651153+01:00","close_reason":"Implemented ts_cv_split, ts_cv_split_folds, and ts_cv_generate_folds SQL table macros. Supports expanding/fixed/sliding windows, explicit or auto-generated folds.","dependencies":[{"issue_id":"forecast-extension-e1p","depends_on_id":"forecast-extension-d8s","type":"blocks","created_at":"2026-01-09T11:48:12.277574942+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-e1p","depends_on_id":"forecast-extension-u2v","type":"blocks","created_at":"2026-01-09T11:48:12.30889064+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-e2n","title":"Port C++ ts_fill_gaps table function from cpp-legacy branch","description":"Replace SQL macro with C++ table-in-out function to preserve DATE type and support INTEGER date columns. Reference: origin/cpp-legacy:src/ts_fill_gaps_function.cpp","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T15:56:52.725330908+01:00","created_by":"simonm","updated_at":"2026-01-09T17:01:09.695504262+01:00","closed_at":"2026-01-09T17:01:09.695504262+01:00","close_reason":"Implemented ts_fill_gaps_native as C++ table-in-out function. Features: DATE/TIMESTAMP/INTEGER/BIGINT type preservation, uses Rust FFI for gap filling algorithm, supports Polars and DuckDB interval frequency formats. Tests added in test/sql/ts_fill_gaps_native.test with 101 assertions.","dependencies":[{"issue_id":"forecast-extension-e2n","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.127533972+01:00","created_by":"simonm"}],"comments":[{"id":4,"issue_id":"forecast-extension-e2n","author":"simonm","text":"## Problem\n\nCurrent SQL macro uses `generate_series()` which always returns TIMESTAMP, losing DATE type information.\n\n## Solution in cpp-legacy branch\n\nThe legacy implementation uses DuckDB's table-in-out function pattern:\n- `src/ts_fill_gaps_function.cpp` - Full C++ implementation\n- `src/include/ts_fill_gaps_function.hpp` - Header with data structures\n\n### Key features:\n1. **Type preservation**: Converts back to DATE or TIMESTAMP based on input type\n2. **INTEGER date support**: Handles INTEGER/BIGINT date columns with integer frequency\n3. **Table-in-out pattern**: Uses `in_out_function` and `in_out_function_final` callbacks\n\n### Files to port:\n- `src/ts_fill_gaps_function.cpp`\n- `src/include/ts_fill_gaps_function.hpp`\n\n### Key code sections:\n```cpp\n// Type preservation (lines 521-528)\nif (bind_data.date_col_type.id() == LogicalTypeId::DATE) {\n    date_value = Value::DATE(ts_fill_gaps_internal::TimePointToDate(time_point));\n} else {\n    date_value = Value::TIMESTAMP(ts_fill_gaps_internal::TimePointToTimestamp(time_point));\n}\n```\n\n## Acceptance Criteria\n- [ ] DATE input returns DATE output\n- [ ] TIMESTAMP input returns TIMESTAMP output\n- [ ] INTEGER date columns work with integer frequency\n- [ ] All existing tests pass\n- [ ] New type preservation tests added","created_at":"2026-01-09T14:57:05Z"},{"id":6,"issue_id":"forecast-extension-e2n","author":"simonm","text":"## Updated Approach\n\nThe core gap filling logic **already exists in Rust**:\n- `crates/anofox-fcst-core/src/gaps.rs` - `fill_gaps()`, `fill_forward()`\n- FFI: `anofox_ts_fill_gaps`, `anofox_ts_fill_forward_dates`\n\nThe current SQL macros bypass Rust and use `generate_series` directly.\n\n### Simpler Solution\nInstead of porting legacy C++, create a thin C++ table-in-out wrapper that:\n1. Reads input rows and converts dates to i64 (microseconds since epoch)\n2. Calls the existing Rust FFI function (`anofox_ts_fill_gaps`)\n3. Converts i64 back to original type (DATE or TIMESTAMP)\n\nThis reuses existing tested Rust code instead of duplicating logic.","created_at":"2026-01-09T15:00:17Z"}]}
{"id":"forecast-extension-e9b","title":"Update telemetry documentation with CI behavior","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-09T23:32:11.290677769+01:00","created_by":"simonm","updated_at":"2026-01-10T00:21:47.654365297+01:00","closed_at":"2026-01-10T00:21:47.654365297+01:00","close_reason":"PR #63 merged, GH issue #62 closed","dependencies":[{"issue_id":"forecast-extension-e9b","depends_on_id":"forecast-extension-4df","type":"blocks","created_at":"2026-01-09T23:32:17.980820388+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-e9b","depends_on_id":"forecast-extension-y8l","type":"blocks","created_at":"2026-01-09T23:32:18.085043411+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-eaz","title":"Add tests for ts_detect_changepoints_by and ts_detect_changepoints_agg","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T15:29:31.589493327+01:00","created_by":"simonm","updated_at":"2026-01-08T15:42:37.890495435+01:00","closed_at":"2026-01-08T15:42:37.890495435+01:00","close_reason":"Added 16 new tests for ts_detect_changepoints_agg and ts_detect_changepoints_by functions"}
{"id":"forecast-extension-ebn","title":"Regression Model Backtest Support","description":"Enable ts_backtest_auto to support regression models (OLS, Ridge, RF) from anofox-statistics extension, with external regressors and configurable metrics.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-10T17:06:34.402315242+01:00","created_by":"simonm","updated_at":"2026-01-10T17:24:53.073968417+01:00","closed_at":"2026-01-10T17:24:53.073968417+01:00","close_reason":"All 4 tasks completed: ts_backtest_auto signature updated with features/metric params, ts_prepare_regression_input adapter implemented, ts_backtest_regression for model dispatch, ts_hydrate_features for known/unknown feature handling"}
{"id":"forecast-extension-elf","title":"Implement purged/embargo logic for overlapping targets","description":"Implement embargo period when target variables involve windows (e.g., 'next 7 days sales').\n\n## Problem\nIf Fold 1 Test ends on Jan 5th and Fold 2 Train starts on Jan 6th, labels in Fold 1 (which see into the future) might be correlated with features in Fold 2.\n\n## Solution\nThe training set of subsequent folds should not start immediately after the test set if there is overlap in the target definition.\n\n## Implementation\n- Add `embargo` or `purge_window` parameter\n- Calculate label overlap based on target horizon\n- Exclude contaminated training samples\n- Document when this is needed (financial returns, rolling aggregates)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T14:24:47.527930975+01:00","created_by":"simonm","updated_at":"2026-01-10T16:13:08.455896126+01:00","closed_at":"2026-01-10T16:13:08.455896126+01:00","close_reason":"Implemented embargo parameter in ts_cv_split_folds, ts_cv_split, and ts_cv_split_index macros with tests and documentation","dependencies":[{"issue_id":"forecast-extension-elf","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:18.917541967+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-exz","title":"Implement ts_conformal_evaluate metric","description":"ts_conformal_evaluate(actuals[], points[], lowers[], uppers[]) -\u003e STRUCT(coverage, mean_width, winkler_score). Comprehensive evaluation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T22:21:26.440312301+01:00","created_by":"simonm","updated_at":"2026-01-15T08:51:39.02022605+01:00","closed_at":"2026-01-15T08:51:39.02022605+01:00","close_reason":"Implemented in PR #85: Conformal API v2 with Learn/Apply pattern","dependencies":[{"issue_id":"forecast-extension-exz","depends_on_id":"forecast-extension-p0i","type":"blocks","created_at":"2026-01-14T22:21:45.20899357+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-exz","depends_on_id":"forecast-extension-6nx","type":"blocks","created_at":"2026-01-14T22:21:45.237593108+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-fg8","title":"Add variable horizon support (clip to available data)","description":"Python has fix_forecasting_length parameter. When False, prediction range clips to available data instead of requiring exact horizon periods. Add 'clip_horizon' parameter to params MAP: clip_horizon='true' clips test window to max available date (variable horizon), clip_horizon='false' (default) requires exact horizon periods and skips fold if insufficient data. Useful for backtesting near end of time series.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T21:43:21.189823716+01:00","created_by":"simonm","updated_at":"2026-01-10T22:03:30.571048178+01:00","closed_at":"2026-01-10T22:03:30.571048178+01:00","close_reason":"Implemented clip_horizon parameter for variable horizon support with tests and documentation"}
{"id":"forecast-extension-flt","title":"Update changepoint detection documentation if needed","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T21:24:58.195826346+01:00","created_by":"simonm","updated_at":"2026-01-08T21:57:44.147923867+01:00","closed_at":"2026-01-08T21:57:44.147923867+01:00","close_reason":"Added Boundary Behavior section to changepoint documentation","dependencies":[{"issue_id":"forecast-extension-flt","depends_on_id":"forecast-extension-nzi","type":"blocks","created_at":"2026-01-08T21:25:06.004735701+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-fnq","title":"Fix ts_forecast C++ error handling to return NULL instead of throwing","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T17:48:55.116125304+01:00","created_by":"simonm","updated_at":"2026-01-08T19:03:09.833850128+01:00","closed_at":"2026-01-08T19:03:09.833850128+01:00","close_reason":"Fixed error handling to return NULL instead of throwing - verified with 22 test cases"}
{"id":"forecast-extension-fv6f","title":"Document streaming API profiling results","description":"Low-memory functions (32-36 MB) don't need streaming conversion: ts_stats_by, ts_features_by, ts_mstl_decomposition_by, ts_detect_changepoints_by, ts_detect_periods_by, ts_classify_seasonality_by. Document findings in memory-patterns.md.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T14:45:48.020986418+01:00","created_by":"simonm","updated_at":"2026-01-23T15:29:13.271063401+01:00","closed_at":"2026-01-23T15:29:13.271063401+01:00","close_reason":"Documented low-memory functions (32-36 MB) in memory-patterns.md. These don't need streaming conversion: ts_stats_by, ts_features_by, ts_mstl_decomposition_by, ts_detect_changepoints_by, ts_detect_periods_by, ts_classify_seasonality_by."}
{"id":"forecast-extension-fyd","title":"Create complete example pipeline script","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.664612364+01:00","created_by":"simonm","updated_at":"2026-01-10T00:16:30.558042869+01:00","closed_at":"2026-01-10T00:16:30.558042869+01:00","close_reason":"Organized examples into examples/backtest_pipeline/ subfolder with README.md documenting the full pipeline","dependencies":[{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-iar","type":"blocks","created_at":"2026-01-09T23:46:22.452216878+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-56h","type":"blocks","created_at":"2026-01-09T23:46:22.482247366+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-lwl","type":"blocks","created_at":"2026-01-09T23:46:22.509436637+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-bsw","type":"blocks","created_at":"2026-01-09T23:46:22.536153156+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-pn2","type":"blocks","created_at":"2026-01-09T23:46:22.560291374+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-g1b","type":"blocks","created_at":"2026-01-09T23:46:22.585144887+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-a6k","type":"blocks","created_at":"2026-01-09T23:46:22.614577101+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-g0g5","title":"Profile ts_data_quality_summary CPU/memory usage","description":"Profile CPU and memory usage for data quality summary function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:38.856188374+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:30.891505731+01:00","closed_at":"2026-01-23T12:36:30.891505731+01:00","close_reason":"Conformal and some data quality functions skipped - require different input format. See PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-g0g5","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.070155966+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-g0g5","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:51.037066781+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-g1b","title":"Apply MFLES model with exogenous variables","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.612091288+01:00","created_by":"simonm","updated_at":"2026-01-10T00:10:11.165544271+01:00","closed_at":"2026-01-10T00:10:11.165544271+01:00","close_reason":"Created examples/05_mfles_model.sql demonstrating: MFLES without exog, ARIMAX with exog (promotion+calendar), model comparison, CV backtesting with ~2-12% MAPE"}
{"id":"forecast-extension-g2i","title":"Write tests for ts_cv_split function","description":"Comprehensive tests: fold generation modes, all fill strategies, window types (expanding/fixed/sliding), output modes, error cases (missing timestamps, invalid params), multi-series data.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:48:01.103034405+01:00","created_by":"simonm","updated_at":"2026-01-09T14:00:49.639322915+01:00","closed_at":"2026-01-09T14:00:49.639322915+01:00","close_reason":"Tests already written in test/sql/ts_cv_split.test as part of implementation task","dependencies":[{"issue_id":"forecast-extension-g2i","depends_on_id":"forecast-extension-e1p","type":"blocks","created_at":"2026-01-09T11:48:14.026811918+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-g4b","title":"Implement skinny split table architecture","description":"Refactor cv_splits to be a metadata-only index table, not materializing data columns.\n\n## Problem\nCurrent ts_cv_split returns target_col. With millions of rows and 20 folds, this duplicates the target column 20 times.\n\n## Solution\nKeep cv_splits strictly as a Map:\n- Schema: fold_id, group_col, date_col, split_type (Enum: Train/Test/Gap)\n- Do NOT materialize any data columns (target or features)\n- Join to source table only when needed\n\n## Benefits\n- Reduces RAM usage by ~90% on large datasets\n- Faster fold generation\n- Cleaner separation of concerns","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T14:24:49.499160073+01:00","created_by":"simonm","updated_at":"2026-01-10T15:00:08.000382953+01:00","closed_at":"2026-01-10T15:00:08.000382953+01:00","close_reason":"Implemented ts_cv_split_index macro with tests and documentation","dependencies":[{"issue_id":"forecast-extension-g4b","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:20.761251998+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-ga27","title":"Add tests for new conformal API","description":"Comprehensive tests: symmetric/asymmetric/adaptive methods, multiple coverage levels, edge cases, evaluation metrics, difficulty score integration.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T22:21:30.371446473+01:00","created_by":"simonm","updated_at":"2026-01-15T08:51:39.041434103+01:00","closed_at":"2026-01-15T08:51:39.041434103+01:00","close_reason":"Implemented in PR #85: Conformal API v2 with Learn/Apply pattern"}
{"id":"forecast-extension-gds","title":"Add data preparation examples","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T14:07:09.214568098+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.206310729+01:00","closed_at":"2026-01-13T14:35:03.206310729+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-geb0","title":"Update ts_split_keys to handle variable hierarchy depth","description":"ts_split_keys is hardcoded to return exactly 3 parts (id_part_1, id_part_2, id_part_3). Need to make it dynamic based on actual hierarchy depth. Location: src/macros/ts_macros.cpp lines 1697-1720","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T20:53:03.458980063+01:00","created_by":"simonm","updated_at":"2026-01-24T21:30:08.53387254+01:00","closed_at":"2026-01-24T21:30:08.53387254+01:00","close_reason":"Native function ts_aggregate_hierarchy_native handles arbitrary depth; documentation updated","dependencies":[{"issue_id":"forecast-extension-geb0","depends_on_id":"forecast-extension-yzub","type":"blocks","created_at":"2026-01-24T20:53:15.310552071+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-gxw7","title":"Implement JackknifePlus calibration and inference logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T22:41:48.694151457+01:00","created_by":"simonm","updated_at":"2026-01-14T22:48:37.658803287+01:00","closed_at":"2026-01-14T22:48:37.658803287+01:00","close_reason":"Implemented JackknifePlus calibration storing full residual distribution, and apply logic using dynamic quantile computation. Added tests for JackknifePlus apply and equivalence with Split.","dependencies":[{"issue_id":"forecast-extension-gxw7","depends_on_id":"forecast-extension-hjq6","type":"blocks","created_at":"2026-01-14T22:41:58.638295221+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-h2of","title":"Add tests for consolidated fill APIs","description":"Add tests to verify the consolidated fill APIs work correctly and preserve column names/types.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:18:22.40704886+01:00","created_by":"simonm","updated_at":"2026-01-23T13:01:56.845306123+01:00","closed_at":"2026-01-23T13:01:56.845306123+01:00","close_reason":"All fill-related tests pass (ts_fill*, ts_gaps, ts_type*, ts_integer*). Existing test coverage validates the refactoring.","dependencies":[{"issue_id":"forecast-extension-h2of","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.489900489+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-h2of","depends_on_id":"forecast-extension-8v04","type":"blocks","created_at":"2026-01-23T12:19:24.094495689+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-h2of","depends_on_id":"forecast-extension-dipl","type":"blocks","created_at":"2026-01-23T12:19:24.12897491+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-h4w","title":"Update Rust FFI layer for exogenous variables","description":"Extend anofox-fcst-ffi to expose exogenous variable functions: (1) Add ForecastOptionsWithExog struct with xreg fields, (2) Add anofox_ts_forecast_with_exog FFI function, (3) Handle HashMap\u003cString, Vec\u003cf64\u003e\u003e for future_regressors, (4) Expose supports_exog/has_exog model queries","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:09.644698337+01:00","created_by":"simonm","updated_at":"2026-01-08T22:28:54.180136555+01:00","closed_at":"2026-01-08T22:28:54.180136555+01:00","close_reason":"Implemented FFI layer for exogenous variables: types.rs structs, lib.rs FFI function, core forecast_with_exog","dependencies":[{"issue_id":"forecast-extension-h4w","depends_on_id":"forecast-extension-1j1","type":"blocks","created_at":"2026-01-08T22:16:35.214409889+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-hgf","title":"Implement C++ scalar functions for conformal prediction","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T14:19:05.596534069+01:00","created_by":"simonm","updated_at":"2026-01-15T08:51:39.035854032+01:00","closed_at":"2026-01-15T08:51:39.035854032+01:00","close_reason":"Implemented in PR #85: Conformal API v2 with Learn/Apply pattern","dependencies":[{"issue_id":"forecast-extension-hgf","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:22.352029464+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-hgf","depends_on_id":"forecast-extension-rvv","type":"blocks","created_at":"2026-01-12T14:19:26.512609858+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-hjq6","title":"Refactor CalibrationProfile with state_vector storage pattern","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T22:41:47.886551567+01:00","created_by":"simonm","updated_at":"2026-01-14T22:47:13.901967441+01:00","closed_at":"2026-01-14T22:47:13.901967441+01:00","close_reason":"Refactored CalibrationProfile to include strategy and state_vector fields. Added tests for JackknifePlus strategy.","dependencies":[{"issue_id":"forecast-extension-hjq6","depends_on_id":"forecast-extension-mqnv","type":"blocks","created_at":"2026-01-14T22:41:57.775124195+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-hlp","title":"Refactor ts_cv_generate_folds to use params MAP","description":"Change ts_cv_generate_folds signature to use MAP{} for optional params.\n\nCurrent: ts_cv_generate_folds(source, date_col, n_folds, horizon, frequency, initial_train_size)\n\nProposed: ts_cv_generate_folds(source, date_col, n_folds, horizon, frequency, params)\n\nWhere params MAP supports:\n- initial_train_size: starting training size (default: 50% of data)\n\nExample:\nSELECT * FROM ts_cv_generate_folds('sales', 'date', 3, 5, '1d', MAP{'initial_train_size': '10'});","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T01:13:40.357737863+01:00","created_by":"simonm","updated_at":"2026-01-10T09:41:15.238434993+01:00","closed_at":"2026-01-10T09:41:15.238434993+01:00","close_reason":"Refactored to use params MAP. Code committed in 65a4341."}
{"id":"forecast-extension-hmj","title":"Implement Dispatch Logic for Model Type Routing","description":"Route execution based on model type inside ts_backtest_run (or internal runner).\n\n**Check configuration['model']:**\n\n**If Model is Univariate (AutoETS, ARIMA):**\n- Use existing logic: Train on split='train', Forecast h steps\n- Ignore features (or treat as Xregs if model supports it)\n\n**If Model is Multivariate/Regression (OLS, Ridge, RF):**\n- Call ts_prepare_regression_input\n- Run the anofox-statistics model on prepared table\n- Filter result: WHERE original_target IS NOT NULL (to isolate test set predictions)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T17:07:59.442596433+01:00","created_by":"simonm","updated_at":"2026-01-10T17:20:59.998895738+01:00","closed_at":"2026-01-10T17:20:59.998895738+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-hmj","depends_on_id":"forecast-extension-ebn","type":"blocks","created_at":"2026-01-10T17:08:12.086355955+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-hmj","depends_on_id":"forecast-extension-7jv","type":"blocks","created_at":"2026-01-10T17:08:14.834722346+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-hsf","title":"ts_forecast_by: Test Basic Models (SMA, SeasonalNaive, SES, SESOptimized, RandomWalkDrift)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:07.234893932+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.535005819+01:00","closed_at":"2026-01-08T15:52:30.535005819+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-hyw0","title":"Profile ts_cv_split_by memory usage","description":"High priority candidate. Profile CPU and memory usage with large dataset, identify LIST() aggregations and bottlenecks.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T12:17:52.04352954+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.677185078+01:00","closed_at":"2026-01-23T12:36:18.677185078+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-hyw0","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.072191118+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-hyw0","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:15.875925576+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-hyxh","title":"Setup memory profiling benchmark framework","description":"Create reusable profiling scripts for benchmarking both CPU and memory usage with 1M+ rows. Use PRAGMA enable_profiling='json' and profile_output. Capture timing metrics for CPU performance comparison.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:17:49.791215014+01:00","created_by":"simonm","updated_at":"2026-01-23T12:33:35.358129452+01:00","closed_at":"2026-01-23T12:33:35.358129452+01:00","close_reason":"Created profiling framework in benchmark/streaming_api_profiling/","dependencies":[{"issue_id":"forecast-extension-hyxh","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.05850329+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-i6r","title":"Remove deprecated conformal functions","description":"Remove old API: ts_conformal_quantile, ts_conformal_intervals, ts_conformal_predict, ts_conformal_predict_asymmetric, ts_conformal_calibrate (old macro).","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-14T22:21:29.60354346+01:00","created_by":"simonm","updated_at":"2026-01-23T14:26:51.526430041+01:00","closed_at":"2026-01-23T14:26:51.526430041+01:00","close_reason":"Implemented ts_difficulty_score, ts_conformalize, and removed deprecated conformal functions","dependencies":[{"issue_id":"forecast-extension-i6r","depends_on_id":"forecast-extension-98h","type":"blocks","created_at":"2026-01-14T22:21:46.413309577+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-i6r","depends_on_id":"forecast-extension-ul1","type":"blocks","created_at":"2026-01-14T22:21:46.447864685+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-i6r","depends_on_id":"forecast-extension-ga27","type":"blocks","created_at":"2026-01-14T22:21:46.483616583+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-i9zy","title":"Profile ts_classify_seasonality_by CPU/memory usage","description":"Lower priority candidate. Profile CPU and memory usage for seasonality classification function.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T12:25:10.258211079+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.783989917+01:00","closed_at":"2026-01-23T12:36:18.783989917+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-i9zy","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:25:10.297914404+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-i9zy","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:25:19.848813922+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-iae","title":"Fix ts_detrend.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:26.260942797+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.352019332+01:00","closed_at":"2026-01-08T20:26:45.352019332+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-iar","title":"Create sample dataset for backtest example","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:44:50.49579192+01:00","created_by":"simonm","updated_at":"2026-01-09T23:50:22.326034283+01:00","closed_at":"2026-01-09T23:50:22.326034283+01:00","close_reason":"Created examples/backtest_pipeline_data.sql with 3-year monthly retail dataset for 2 categories, including seasonality, trend, changepoint, and both known (promotion) and unknown (temperature) features"}
{"id":"forecast-extension-igal","title":"Profile ts_data_quality_by CPU/memory usage","description":"Profile CPU and memory usage for grouped data quality function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:36.051232059+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.809407377+01:00","closed_at":"2026-01-23T12:36:18.809407377+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-igal","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.047286971+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-igal","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:50.977108586+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-is2","title":"Implement ts_conformalize convenience wrapper","description":"One-step wrapper combining ts_conformal_learn and ts_conformal_apply for simple use cases.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T22:21:24.741235375+01:00","created_by":"simonm","updated_at":"2026-01-23T14:26:51.522999677+01:00","closed_at":"2026-01-23T14:26:51.522999677+01:00","close_reason":"Implemented ts_difficulty_score, ts_conformalize, and removed deprecated conformal functions","dependencies":[{"issue_id":"forecast-extension-is2","depends_on_id":"forecast-extension-98h","type":"blocks","created_at":"2026-01-14T22:21:43.036309776+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-is2","depends_on_id":"forecast-extension-ul1","type":"blocks","created_at":"2026-01-14T22:21:43.068538298+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-iv7","title":"Fix last observation being incorrectly marked as changepoint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:56.220274271+01:00","created_by":"simonm","updated_at":"2026-01-08T21:32:38.644649204+01:00","closed_at":"2026-01-08T21:32:38.644649204+01:00","close_reason":"Bug already fixed in Rust rewrite - old C++ code had explicit first/last changepoint insertion","dependencies":[{"issue_id":"forecast-extension-iv7","depends_on_id":"forecast-extension-dpg","type":"blocks","created_at":"2026-01-08T21:25:05.935323291+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-iwfr","title":"Update CV split macros for STRUCT params","description":"Update ts_cv_split, ts_cv_split_folds, ts_cv_split_index, ts_cv_generate_folds to support STRUCT params. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:54.58796535+01:00","created_by":"simonm","updated_at":"2026-01-17T20:34:24.889234315+01:00","closed_at":"2026-01-17T20:34:24.889234315+01:00","close_reason":"ts_cv_split, ts_cv_split_folds, ts_cv_split_index, ts_cv_generate_folds updated","dependencies":[{"issue_id":"forecast-extension-iwfr","depends_on_id":"forecast-extension-viff","type":"blocks","created_at":"2026-01-17T20:23:26.813020667+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwfr","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:43.2556003+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-iwjt","title":"Create prioritized implementation plan for streaming conversion","description":"Based on CPU and memory profiling results, create prioritized list of functions to convert and implementation plan for top 3 candidates. Include before/after performance metrics for PR description.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:17:58.787725534+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:46.005280979+01:00","closed_at":"2026-01-23T12:36:46.005280979+01:00","close_reason":"Implementation plan complete in PROFILING_RESULTS.md - Tier 1: ts_stats_by, ts_forecast_by, ts_cv_split_by. Tier 2: decomposition/detection functions.","dependencies":[{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.119038678+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-46bo","type":"blocks","created_at":"2026-01-23T12:19:17.609751158+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-hyw0","type":"blocks","created_at":"2026-01-23T12:19:17.661803503+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-q4vh","type":"blocks","created_at":"2026-01-23T12:19:17.698948775+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-ixx5","type":"blocks","created_at":"2026-01-23T12:19:17.734881977+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-ndqx","type":"blocks","created_at":"2026-01-23T12:19:17.770271783+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-24o6","type":"blocks","created_at":"2026-01-23T12:19:17.808407151+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-50uj","type":"blocks","created_at":"2026-01-23T12:25:19.917388831+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-i9zy","type":"blocks","created_at":"2026-01-23T12:25:19.949023782+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-1q6h","type":"blocks","created_at":"2026-01-23T12:25:19.980964537+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-92f6","type":"blocks","created_at":"2026-01-23T12:27:53.214953811+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-qlye","type":"blocks","created_at":"2026-01-23T12:27:53.262021992+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-begh","type":"blocks","created_at":"2026-01-23T12:27:53.298732302+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-igal","type":"blocks","created_at":"2026-01-23T12:27:53.332281299+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-9vhc","type":"blocks","created_at":"2026-01-23T12:27:53.363360585+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-g0g5","type":"blocks","created_at":"2026-01-23T12:27:53.398117608+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-iwjt","depends_on_id":"forecast-extension-8oy8","type":"blocks","created_at":"2026-01-23T12:27:53.435505694+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-ixx5","title":"Profile ts_stats_by memory usage","description":"Medium priority candidate. Profile CPU and memory usage for grouped statistics function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:17:55.690953468+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.708488421+01:00","closed_at":"2026-01-23T12:36:18.708488421+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-ixx5","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.092775352+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ixx5","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:15.953959744+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-j3dp","title":"Implement _ts_stats_native streaming function","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T20:46:00.191710122+01:00","created_by":"simonm","updated_at":"2026-01-23T20:52:52.648842519+01:00","closed_at":"2026-01-23T20:52:52.648842519+01:00","close_reason":"Implemented _ts_stats_native streaming function with: header file, implementation with bind/in-out/finalize functions, 36 output columns (group + 35 stats), preserves original column name, registered in extension, updated ts_stats_by macro to use native function"}
{"id":"forecast-extension-j6u","title":"Add decomposition examples","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T14:07:09.26484156+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.183227399+01:00","closed_at":"2026-01-13T14:35:03.183227399+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-j7q","title":"Update API documentation for exogenous variables","description":"Update docs/API_REFERENCE.md: (1) Document which models support exog (ARIMA, SARIMA, AutoARIMA, Theta, MFLES), (2) Add examples for ts_forecast with xreg, (3) Document future_X requirements, (4) Add troubleshooting section","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T22:16:14.433082425+01:00","created_by":"simonm","updated_at":"2026-01-08T23:09:35.681480579+01:00","closed_at":"2026-01-08T23:09:35.681480579+01:00","close_reason":"Added documentation for _ts_forecast_exog scalar function, ts_forecast_exog and ts_forecast_exog_by table macros to API_REFERENCE.md","dependencies":[{"issue_id":"forecast-extension-j7q","depends_on_id":"forecast-extension-kik","type":"blocks","created_at":"2026-01-08T22:16:35.330933983+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-jl0t","title":"Convert ts_forecast_by to native streaming","description":"Memory: 358 MB (highest). Convert to table_in_out streaming pattern like ts_backtest_auto_by.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T14:45:37.481833937+01:00","created_by":"simonm","updated_at":"2026-01-23T15:05:22.560970906+01:00","closed_at":"2026-01-23T15:05:22.560970906+01:00","close_reason":"Implemented native streaming for ts_forecast_by. Memory reduced from ~358MB to ~4MB (99% reduction). Verified with 100K row test."}
{"id":"forecast-extension-jl3","title":"Fix ts_forecast_exog_by table macro - src2 reference bug","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:50:31.147449267+01:00","created_by":"simonm","updated_at":"2026-01-09T20:56:22.644968619+01:00","closed_at":"2026-01-09T20:56:22.644968619+01:00","close_reason":"Fixed ts_forecast_exog and ts_forecast_exog_by macros. The issue was DuckDB's requirement for constant strings in column/struct access. Solution: Use JSON-based dynamic column access (json_extract with to_json) and JOIN-based aggregation instead of correlated subqueries. Requires JSON extension for dynamic column names.","comments":[{"id":2,"issue_id":"forecast-extension-jl3","author":"simonm","text":"## Problem\n\nThe ts_forecast_exog_by table macro fails with:\n```\nBinder Error: Referenced table \"src2\" not found!\nCandidate tables: \"src\"\n```\n\n## Root Cause\n\nIn ts_macros.cpp line 593-595, the macro uses:\n```sql\nLIST_TRANSFORM(xreg_cols, col -\u003e\n    (SELECT LIST(src2[col] ORDER BY src2.date_col) FROM src src2 WHERE src2.group_col = src.group_col)\n) AS _xreg_list\n```\n\nThe `src2` alias is not being properly resolved in the subquery context.\n\n## Impact\n\n- ts_forecast_exog_by is completely non-functional\n- Integer frequency support was added but cannot be tested until this is fixed\n\n## Fix Required\n\nReview the SQL macro and fix the table alias reference in the LIST_TRANSFORM subquery.","created_at":"2026-01-09T14:50:43Z"},{"id":3,"issue_id":"forecast-extension-jl3","author":"simonm","text":"GitHub issue: https://github.com/DataZooDE/anofox-forecast/issues/57","created_at":"2026-01-09T14:53:42Z"}]}
{"id":"forecast-extension-jxp","title":"Add tests for specialized period methods (ts_cfd_autoperiod, ts_aic_period, ts_ssa_period, ts_stl_period, ts_matrix_profile_period, ts_sazed_period)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T15:29:35.118727625+01:00","created_by":"simonm","updated_at":"2026-01-08T16:53:13.43440642+01:00","closed_at":"2026-01-08T16:53:13.43440642+01:00","close_reason":"Added comprehensive tests for specialized period detection methods (ts_aic_period, ts_ssa_period, ts_stl_period, ts_matrix_profile_period, ts_sazed_period)"}
{"id":"forecast-extension-jxvw","title":"Convert ts_cv_forecast_by to native streaming","description":"ts_cv_forecast_by uses 212 MB peak memory due to LIST() aggregation and CROSS JOIN patterns. Convert to native streaming using table_in_out pattern like ts_forecast_native and ts_cv_split_native.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-23T15:38:56.220467354+01:00","created_by":"simonm","updated_at":"2026-01-23T16:21:13.48148766+01:00","closed_at":"2026-01-23T16:21:13.48148766+01:00","close_reason":"Closed"}
{"id":"forecast-extension-k57","title":"Add SQL API for exogenous forecasting","description":"Define SQL function signatures: (1) ts_forecast(y, x1, x2, ..., future_x1, future_x2, ..., model, horizon), (2) ts_forecast with named parameters: xreg := [col1, col2], future_xreg := [[v1,v2], [v3,v4]], (3) Consider JSON parameter for complex cases","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:12.112462349+01:00","created_by":"simonm","updated_at":"2026-01-08T23:00:21.153283438+01:00","closed_at":"2026-01-08T23:00:21.153283438+01:00","close_reason":"SQL API implemented via ts_forecast_exog and ts_forecast_exog_by macros in ts_macros.cpp","dependencies":[{"issue_id":"forecast-extension-k57","depends_on_id":"forecast-extension-1rh","type":"blocks","created_at":"2026-01-08T22:16:35.272549116+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-k5v","title":"Add multiple use case scenarios (demand, anomaly, seasonality)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T00:25:30.697626943+01:00","created_by":"simonm","updated_at":"2026-01-10T00:37:16.166922854+01:00","closed_at":"2026-01-10T00:37:16.166922854+01:00","close_reason":"Documentation and use cases included in the example files","dependencies":[{"issue_id":"forecast-extension-k5v","depends_on_id":"forecast-extension-bjq","type":"blocks","created_at":"2026-01-10T00:25:37.157628592+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-k66g","title":"Update README with logo and benchmark results","description":"Add Anofox logo to top center, add performance comparison tables for Docker size, memory, and speed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T14:34:58.182444726+01:00","created_by":"simonm","updated_at":"2026-01-26T15:31:15.755072585+01:00","closed_at":"2026-01-26T15:31:15.755072585+01:00","close_reason":"README updated with centered logo and benchmark comparison table","dependencies":[{"issue_id":"forecast-extension-k66g","depends_on_id":"forecast-extension-w7m5","type":"blocks","created_at":"2026-01-26T14:35:05.945642952+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-k66g","depends_on_id":"forecast-extension-yhk7","type":"blocks","created_at":"2026-01-26T14:35:05.978503688+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-k66g","depends_on_id":"forecast-extension-l2bg","type":"blocks","created_at":"2026-01-26T14:35:06.011533692+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-k66g","depends_on_id":"forecast-extension-67dv","type":"blocks","created_at":"2026-01-26T14:35:06.04384468+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-kik","title":"Add tests for exogenous variable forecasting","description":"Create SQL tests in test/sql/ts_forecast_exog.test: (1) ARIMAX with single regressor, (2) ARIMAX with multiple regressors, (3) AutoARIMA with exog, (4) Error cases (mismatched lengths, unsupported models), (5) Verify forecast accuracy with known exog effects","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:12.945998647+01:00","created_by":"simonm","updated_at":"2026-01-08T23:06:39.939095582+01:00","closed_at":"2026-01-08T23:06:39.939095582+01:00","close_reason":"Created ts_forecast_exog.test with 10 test assertions covering scalar function, multiple model types (ARIMAX, ThetaX, MFLESX), and error handling","dependencies":[{"issue_id":"forecast-extension-kik","depends_on_id":"forecast-extension-k57","type":"blocks","created_at":"2026-01-08T22:16:35.298725195+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-kwxp","title":"Implement Corrective RAG (Self-Evaluation)","description":"## Context\nSenior Rust Engineer task for leann-rs (high-performance vector database and RAG engine).\nStack: Rust 1.88+, candle-core, surrealdb/hnsw, tokio.\n\n## Target Module\nleann-search (specifically the ask logic)\n\n## Implementation Steps\n\n### 1. Relevance Grader\nCreate lightweight prompt function:\n```rust\ngrade_documents(query: \u0026str, docs: \u0026[str]) -\u003e Vec\u003cbool\u003e\n```\nPrompt: \"For the following document snippet, does it contain the answer to '{query}'? Reply strictly with 'YES' or 'NO'.\"\n\n### 2. Conditional Flow\nModify `leann ask` command flow:\n- Step 1: Retrieve and Grade\n- Step 2: If \u003e50% of docs are 'NO', trigger a fallback\n\n### 3. Fallback Strategy Options\n- Option A (Strict): Return \"I cannot answer this based on the available documentation.\"\n- Option B (Refined Search): Strip specific keywords and re-run search (broaden scope)\n- Option C (Web): If web-search trait exists, trigger it here\n\n### 4. Transparency\nFinal output should indicate confidence:\n- \"Answer generated with high confidence (verified context)\"\n- \"Answer generated with low confidence\"\n\n## Constraints\n- Prioritize local inference where possible\n- Maintain zero-copy principles and high performance","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-19T16:23:24.482024936+01:00","created_by":"simonm","updated_at":"2026-01-19T16:23:48.266305305+01:00","deleted_at":"2026-01-19T16:23:48.266305305+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"forecast-extension-kx8","title":"Write unit tests for integer frequency support","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:50.424532568+01:00","created_by":"simonm","updated_at":"2026-01-09T15:00:11.385285496+01:00","closed_at":"2026-01-09T15:00:11.385285496+01:00","close_reason":"Closed"}
{"id":"forecast-extension-kzq","title":"Backtesting Infrastructure Improvements","description":"Comprehensive improvements to the TSCV backtesting system covering methodological rigor, performance/storage, and developer experience.\n\n## Goals\n- Add safety rails to prevent data leakage\n- Improve production realism with gap/lag support\n- Optimize memory usage with skinny index tables\n- Enable parallel fold execution\n- Simplify API for common use cases","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T14:23:59.659081292+01:00","created_by":"simonm","updated_at":"2026-01-10T16:24:10.642142303+01:00","closed_at":"2026-01-10T16:24:10.642142303+01:00","close_reason":"All 7 tasks completed: ts_hydrate_split, parallel fold execution, fail-safe masking, embargo logic, skinny index tables, gap parameter, and ts_backtest_auto"}
{"id":"forecast-extension-l2bg","title":"Benchmark memory footprint on M5 dataset","description":"Compare memory usage for AutoARIMA on M5 dataset: DuckDB+anofox_forecast vs Python+statsforecast","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T14:34:55.321910585+01:00","created_by":"simonm","updated_at":"2026-01-26T15:29:50.850076577+01:00","closed_at":"2026-01-26T15:29:50.850076577+01:00","close_reason":"Benchmarks complete: 1M rows - DuckDB 23.7x faster, memory similar"}
{"id":"forecast-extension-lj0","title":"Add comprehensive model tests for ts_forecast_by table macro","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T15:34:53.701212619+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:40.919741721+01:00","closed_at":"2026-01-08T15:52:40.919741721+01:00","close_reason":"All sub-tasks completed. Comprehensive tests added in test/sql/ts_forecast_by.test covering all 28 models","dependencies":[{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-auh","type":"blocks","created_at":"2026-01-08T15:35:30.729667973+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-hsf","type":"blocks","created_at":"2026-01-08T15:35:30.756982188+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-asz","type":"blocks","created_at":"2026-01-08T15:35:30.785849523+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-a4m","type":"blocks","created_at":"2026-01-08T15:35:30.812098964+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-muh","type":"blocks","created_at":"2026-01-08T15:35:30.840499025+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-3v0","type":"blocks","created_at":"2026-01-08T15:35:30.87406247+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-cmf","type":"blocks","created_at":"2026-01-08T15:35:30.905085871+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-8dd","type":"blocks","created_at":"2026-01-08T15:35:30.932088947+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-lk0","title":"Refactor exog to use anofox-regression for OLS","description":"Replace simplified OLS implementation in forecast.rs with anofox-regression crate. Use proper matrix-based regression for accurate coefficient estimation with multiple regressors.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T22:33:18.163044414+01:00","created_by":"simonm","updated_at":"2026-01-08T22:47:53.761006113+01:00","closed_at":"2026-01-08T22:47:53.761006113+01:00","close_reason":"Implemented OLS using anofox-regression with faer matrices"}
{"id":"forecast-extension-lqx","title":"Fix column name string conversion and interval casting bugs in SQL macros","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-12T14:22:58.457090852+01:00","created_by":"simonm","updated_at":"2026-01-12T14:34:54.311569439+01:00","closed_at":"2026-01-12T14:34:54.311569439+01:00","close_reason":"Fixed by adding missing bare integer frequency handler pattern to 5 SQL macros: ts_cv_split_folds, ts_cv_split, ts_cv_split_index, ts_cv_generate_folds, ts_backtest_auto"}
{"id":"forecast-extension-lw9","title":"Add regression tests for ts_detect_peaks with actual peak count verification","description":"Current tests in ts_peaks.test only check that results are not NULL and n_peaks \u003e= 0. Need to add tests that verify actual peak detection:\n\n1. Add test that verifies n_peaks \u003e 0 for data with obvious peaks\n2. Test the example from issue #59: `[1.0, 3.0, 2.0, 5.0, 1.0, 4.0, 2.0]` should detect peaks\n3. Test `[0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 10.0, 0.0, 0.0]` should detect 2 peaks\n4. Test ts_analyze_peak_timing also detects peaks","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T22:16:32.985300722+01:00","created_by":"simonm","updated_at":"2026-01-09T22:23:29.933159398+01:00","closed_at":"2026-01-09T22:23:29.933159398+01:00","close_reason":"Regression test test_issue_59_peaks_detected added in commit 5d850cc","dependencies":[{"issue_id":"forecast-extension-lw9","depends_on_id":"forecast-extension-2em","type":"blocks","created_at":"2026-01-09T22:16:39.039767262+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-lwl","title":"Add changepoint features using BOCPD","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.530115995+01:00","created_by":"simonm","updated_at":"2026-01-10T00:03:23.500691093+01:00","closed_at":"2026-01-10T00:03:23.500691093+01:00","close_reason":"Created examples/03_changepoint_features.sql demonstrating: ts_detect_changepoints_by, changepoint probability extraction, rolling/cumulative changepoint features, integration with CV splits"}
{"id":"forecast-extension-m3tx","title":"Research streaming API adoption for memory-intensive functions (GH#115)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-23T12:17:27.505064252+01:00","created_by":"simonm","updated_at":"2026-01-23T12:37:00.793916448+01:00","closed_at":"2026-01-23T12:37:00.793916448+01:00","close_reason":"All profiling tasks complete. See PROFILING_RESULTS.md for implementation plan."}
{"id":"forecast-extension-mjj","title":"Fix ts_imputation.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:27.776014059+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.384382497+01:00","closed_at":"2026-01-08T20:26:45.384382497+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-mqnv","title":"Add Strategy enum (Split, CrossVal, JackknifePlus)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T22:41:47.024699175+01:00","created_by":"simonm","updated_at":"2026-01-14T22:43:46.59812736+01:00","closed_at":"2026-01-14T22:43:46.59812736+01:00","close_reason":"Added ConformalStrategy enum with Split, CrossVal, JackknifePlus variants including FromStr, Display, Default impls and tests"}
{"id":"forecast-extension-mu1","title":"Implement ts_validate_separator function","description":"Create function to check if separator exists in any ID column values. Should suggest alternatives if separator is found.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T20:35:49.005521626+01:00","created_by":"simonm","updated_at":"2026-01-13T20:46:14.798407786+01:00","closed_at":"2026-01-13T20:46:14.798407786+01:00","close_reason":"Implemented and tested ts_validate_separator function"}
{"id":"forecast-extension-muh","title":"ts_forecast_by: Test State Space and ARIMA Models (ETS, ARIMA)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:10.857936245+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.576750003+01:00","closed_at":"2026-01-08T15:52:30.576750003+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-mvrs","title":"Update DuckDB table function for new ts_stats fields","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T07:39:46.580310659+01:00","created_by":"simonm","updated_at":"2026-01-16T07:49:58.487808058+01:00","closed_at":"2026-01-16T07:49:58.487808058+01:00","close_reason":"Implemented in PR for issue #86","dependencies":[{"issue_id":"forecast-extension-mvrs","depends_on_id":"forecast-extension-u66b","type":"blocks","created_at":"2026-01-16T07:39:55.078697707+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-n8y","title":"Example 1: Quick Start - Simple Univariate Backtest","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:28:10.739825255+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.545114323+01:00","closed_at":"2026-01-10T19:34:00.545114323+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-n8y","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:28:22.909755626+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-ndqx","title":"Profile ts_features_by memory usage","description":"Medium priority candidate. Profile CPU and memory usage for feature extraction function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:17:56.443767719+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.740452867+01:00","closed_at":"2026-01-23T12:36:18.740452867+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-ndqx","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.100016543+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ndqx","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:15.98883402+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-njw","title":"Example 2: Multivariate Regression with External Factors","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:28:11.746481136+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.555004739+01:00","closed_at":"2026-01-10T19:34:00.555004739+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-njw","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:28:22.943001644+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-njw","depends_on_id":"forecast-extension-n8y","type":"blocks","created_at":"2026-01-10T19:28:23.989193445+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-nox4","title":"Convert API_REFERENCE.md to navigable index","description":"Transform API_REFERENCE.md into a slim index with function quick-reference table and links to category docs. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:59.262090473+01:00","created_by":"simonm","updated_at":"2026-01-17T21:11:57.593112427+01:00","closed_at":"2026-01-17T21:11:57.593112427+01:00","close_reason":"Completed: Created docs/api/ with 11 category files and converted API_REFERENCE.md to index","dependencies":[{"issue_id":"forecast-extension-nox4","depends_on_id":"forecast-extension-oz88","type":"blocks","created_at":"2026-01-17T20:23:29.894926717+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-nox4","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:47.36374784+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-nzi","title":"Add tests for BOCPD boundary conditions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:57.320177988+01:00","created_by":"simonm","updated_at":"2026-01-08T21:56:43.720135737+01:00","closed_at":"2026-01-08T21:56:43.720135737+01:00","close_reason":"Added 10 boundary condition tests for GH#50 regression prevention","dependencies":[{"issue_id":"forecast-extension-nzi","depends_on_id":"forecast-extension-xtu","type":"blocks","created_at":"2026-01-08T21:25:05.954767892+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-nzi","depends_on_id":"forecast-extension-iv7","type":"blocks","created_at":"2026-01-08T21:25:05.978913932+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-o9u","title":"Fix metrics.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:25.388693531+01:00","created_by":"simonm","updated_at":"2026-01-08T20:03:11.67643767+01:00","closed_at":"2026-01-08T20:03:11.67643767+01:00","close_reason":"Fixed all 12 metric functions to return NULL instead of throwing on error"}
{"id":"forecast-extension-ola","title":"Doc: Example-specific narrative callouts and warnings","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:30:10.497276238+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.610027578+01:00","closed_at":"2026-01-10T19:34:00.610027578+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-ola","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:30:23.439382041+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ola","depends_on_id":"forecast-extension-a4z","type":"blocks","created_at":"2026-01-10T19:30:24.765096712+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-oz88","title":"Create docs/api/ directory structure","description":"Create docs/api/ with 11 category files: 01-table-macros, 02-statistics, 03-data-preparation, 04-seasonality, 05-forecasting, 06-cross-validation, 07-evaluation-metrics, 08-feature-extraction, 09-changepoint-detection, 10-hierarchical, 11-conformal-prediction. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:57.879821549+01:00","created_by":"simonm","updated_at":"2026-01-17T21:12:02.438459117+01:00","closed_at":"2026-01-17T21:12:02.438459117+01:00","close_reason":"Completed: Created all 11 category files in docs/api/","dependencies":[{"issue_id":"forecast-extension-oz88","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:45.834945599+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-ozd","title":"GH#8: Exogenous Variables Support","description":"Implement exogenous variable (xreg) support for forecasting models. Enables users to include external regressors like promotions, holidays, weather etc. in their forecasts. Models supporting exog: ARIMA, SARIMA, AutoARIMA, OptimizedTheta, DynamicTheta, MFLES. Ref: https://github.com/DataZooDE/anofox-forecast/issues/8","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T22:16:23.16533901+01:00","created_by":"simonm","updated_at":"2026-01-08T23:09:46.087084722+01:00","closed_at":"2026-01-08T23:09:46.087084722+01:00","close_reason":"All subtasks completed: API design, Rust FFI, C++ extension, SQL macros, tests, and documentation for exogenous variables"}
{"id":"forecast-extension-p0i","title":"Implement ts_conformal_coverage metric","description":"ts_conformal_coverage(actuals[], lowers[], uppers[]) -\u003e DOUBLE. Check empirical vs nominal coverage percentage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T22:21:25.613573118+01:00","created_by":"simonm","updated_at":"2026-01-15T08:51:39.028620184+01:00","closed_at":"2026-01-15T08:51:39.028620184+01:00","close_reason":"Implemented in PR #85: Conformal API v2 with Learn/Apply pattern"}
{"id":"forecast-extension-p48","title":"Add SQL integration test for ts_detect_changepoints","description":"Create SQL test that verifies ts_detect_changepoints works correctly through the DuckDB interface. Test with synthetic data having obvious changepoints.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T11:09:01.912223851+01:00","created_by":"simonm","updated_at":"2026-01-13T11:36:33.042463876+01:00","closed_at":"2026-01-13T11:36:33.042463876+01:00","close_reason":"Added SQL integration tests for Issue #71 regression testing","dependencies":[{"issue_id":"forecast-extension-p48","depends_on_id":"forecast-extension-vyl","type":"blocks","created_at":"2026-01-13T11:09:07.964313486+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-p54","title":"Doc: High-level intro with Gap vs Embargo diagram","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:30:09.076655917+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.589470583+01:00","closed_at":"2026-01-10T19:34:00.589470583+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-p54","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:30:23.382159171+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-pn2","title":"Document available integrated features for dataset","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.583141112+01:00","created_by":"simonm","updated_at":"2026-01-09T23:48:24.145336623+01:00","deleted_at":"2026-01-09T23:48:24.145336623+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"forecast-extension-pxz5","title":"Implement Query Transformation (Multi-Query \u0026 HyDE)","description":"## Context\nSenior Rust Engineer task for leann-rs (high-performance vector database and RAG engine).\nStack: Rust 1.88+, candle-core, surrealdb/hnsw, tokio.\n\n## Target Module\nleann-search\n\n## Implementation Steps\n\n### 1. New Trait\nDefine `QueryTransformer` trait in leann-core:\n```rust\nfn transform(query: \u0026str) -\u003e Vec\u003cString\u003e\n```\n\n### 2. Implementation A: Multi-Query\n- Use configured LLM provider (Ollama/OpenAI) to generate 3 query variations\n- Prompt: \"You are an AI search assistant. Generate 3 different versions of this search query to retrieve relevant technical documentation: '{query}'. Output only the queries, one per line.\"\n\n### 3. Implementation B: HyDE (Hypothetical Document Embeddings)\n- Create `HyDEGenerator` struct\n- Prompt: \"Write a hypothetical abstract or code snippet that answers this question: '{query}'.\"\n- Embed the hypothetical answer and use that vector for HNSW search\n\n### 4. Deduplication\nEnsure search results from multiple queries are deduplicated by doc_id before returning.\n\n## Constraints\n- Prioritize local inference where possible\n- Maintain zero-copy principles and high performance","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-19T16:23:23.861014273+01:00","created_by":"simonm","updated_at":"2026-01-19T16:23:48.266305305+01:00","deleted_at":"2026-01-19T16:23:48.266305305+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"forecast-extension-q4vh","title":"Profile ts_forecast_by memory usage","description":"Medium priority candidate. Profile CPU and memory usage for grouped forecasting function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:17:53.244718192+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:18.691650655+01:00","closed_at":"2026-01-23T12:36:18.691650655+01:00","close_reason":"Profiling complete - see benchmark/streaming_api_profiling/PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-q4vh","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:19:01.083899665+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-q4vh","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:19:15.916684296+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-qcb","title":"Example 3: Production Reality - Handling Data Latency (gap/embargo)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:28:12.759462553+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.562552739+01:00","closed_at":"2026-01-10T19:34:00.562552739+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-qcb","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:28:22.97401319+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-qcb","depends_on_id":"forecast-extension-njw","type":"blocks","created_at":"2026-01-10T19:28:24.014810931+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-qlye","title":"Profile ts_conformal_apply_by CPU/memory usage","description":"Profile CPU and memory usage for conformal apply function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T12:27:32.875609222+01:00","created_by":"simonm","updated_at":"2026-01-23T12:36:30.850392171+01:00","closed_at":"2026-01-23T12:36:30.850392171+01:00","close_reason":"Conformal and some data quality functions skipped - require different input format. See PROFILING_RESULTS.md","dependencies":[{"issue_id":"forecast-extension-qlye","depends_on_id":"forecast-extension-m3tx","type":"parent-child","created_at":"2026-01-23T12:27:49.025842833+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-qlye","depends_on_id":"forecast-extension-hyxh","type":"blocks","created_at":"2026-01-23T12:27:50.901681882+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-qwe","title":"Add gap/lag parameter to ts_cv_generate_folds","description":"Add a 'gap' parameter to simulate real-world data latency in backtesting.\n\n## Problem\nIn production, you rarely forecast immediately after training data ends. ETL delays mean Sunday's data might not be available until Tuesday, making backtests optimistic.\n\n## Solution\nAdd a `gap` parameter to `ts_cv_generate_folds`:\n```\n[Train: Jan 1 - Jan 31] [Gap: 2 days] [Test: Feb 3 - Feb 9]\n```\n\n## Implementation\n- Add gap parameter (integer, default 0) to ts_cv_generate_folds\n- Adjust test period start to account for gap\n- Update documentation with examples","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T14:24:46.60204554+01:00","created_by":"simonm","updated_at":"2026-01-10T14:46:15.298669098+01:00","closed_at":"2026-01-10T14:46:15.298669098+01:00","close_reason":"Added gap parameter to ts_cv_split and ts_cv_split_folds with tests and documentation","dependencies":[{"issue_id":"forecast-extension-qwe","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:17.868492694+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-r0k","title":"Add peak timing analysis examples (inter-peak intervals, clustering)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T00:25:28.77330613+01:00","created_by":"simonm","updated_at":"2026-01-10T00:37:10.739329356+01:00","closed_at":"2026-01-10T00:37:10.739329356+01:00","close_reason":"Created peak detection example with sample data, basic detection, and timing analysis"}
{"id":"forecast-extension-r14j","title":"Implement _ts_detect_changepoints_native streaming function","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T20:57:07.992589952+01:00","created_by":"simonm","updated_at":"2026-01-23T21:02:26.688788861+01:00","closed_at":"2026-01-23T21:02:26.688788861+01:00","close_reason":"Implemented _ts_detect_changepoints_native streaming function with: header file, implementation with bind/in-out/finalize pattern, output columns (group + is_changepoint, changepoint_probability, changepoint_indices, n_changepoints), preserves original column name, supports hazard_lambda and include_probabilities params","comments":[{"id":12,"issue_id":"forecast-extension-r14j","author":"simonm","text":"## Memory Profiling Results\n\n### Fix Applied\n- Replaced low-level ListVector manipulation with `Value::LIST()` approach\n- Removed custom GlobalState that forced single-threaded execution\n- Fixed BatchedDataCollection::Merge error that blocked direct query execution\n\n### Memory Comparison (1M rows, 10K groups)\n| Implementation | Memory | Latency |\n|---------------|--------|---------|\n| Native Streaming | 17.6 MB | 0.73 sec |\n| Old LIST-based | 33.9 MB | 0.02 sec |\n| **Improvement** | **48% less** | **36x slower** |\n\n### Memory Comparison (10M rows, 10K groups)\n| Implementation | Memory | Latency |\n|---------------|--------|---------|\n| Native Streaming | 351.9 MB | 28.98 sec |\n| Old LIST-based | 361.8 MB | 0.07 sec |\n| **Improvement** | **~3% less** | **414x slower** |\n\n### Analysis\nThe streaming pattern provides modest memory savings but significant latency increase because:\n1. BOCPD algorithm requires ALL data for a group before processing (can't stream incrementally)\n2. Output is ONE row per group with LIST columns (can't stream output)\n3. The ORDER BY requirement adds significant overhead\n\nThis differs from `ts_backtest_native` which achieves 62x memory improvement because it outputs ONE row per INPUT row (true streaming).","created_at":"2026-01-23T21:01:39Z"},{"id":13,"issue_id":"forecast-extension-r14j","author":"simonm","text":"## Final Investigation Results\n\n### Row-per-point Output Comparison (1M rows, 10K groups)\n\n| Implementation | Memory | Latency | Output Format |\n|----------------|--------|---------|---------------|\n| Old Aggregate (struct) | 33.9 MB | 0.02 s | STRUCT (not row-per-point) |\n| **Native Streaming** | **89.3 MB** | **0.75 s** | **row-per-point** ✓ |\n| Aggregate + UNNEST | 390.9 MB | 3.27 s | row-per-point |\n\n### Key Findings\n\n1. **Native streaming is optimal for row-per-point output** - 4.4x better memory than UNNEST approach\n2. The UNNEST approach reads the table twice and creates intermediate CTEs, causing 4x memory overhead\n3. The old struct output (34 MB) is most memory efficient but doesn't provide row-per-point format\n4. Using `int64_t` for dates (like ts_fill_gaps_native) didn't improve memory - the overhead is in the streaming pattern itself\n\n### Why ts_fill_gaps_native achieves 15x improvement but this doesn't\n\n- **ts_fill_gaps OLD**: Complex SQL with cross joins + generate_series = 181 MB\n- **ts_fill_gaps NATIVE**: Simple streaming = 12 MB (15x better)\n\n- **ts_detect_changepoints OLD**: Simple GROUP BY + aggregate = 34 MB (already efficient)\n- **ts_detect_changepoints NATIVE**: Streaming with buffering = 89 MB (2.6x worse for struct, but best for row-per-point)\n\n### Conclusion\n\nNative streaming is the correct choice for `ts_detect_changepoints_by` because row-per-point output is required.","created_at":"2026-01-23T21:24:18Z"},{"id":14,"issue_id":"forecast-extension-r14j","author":"simonm","text":"## ts_stats_by Row-per-point Implementation\n\n### Approach\nSwitched from native streaming (which had BatchedDataCollection::Merge errors) to SQL-based approach using aggregate function with JOIN back to original data.\n\n### Memory Comparison (1M rows, 10K groups)\n| Approach | Memory | Latency | Rows |\n|----------|--------|---------|------|\n| Row-per-point (new) | 338.8 MB | 0.36 sec | 1,000,000 |\n| One-per-group (old) | 73.2 MB | 0.03 sec | 10,000 |\n\n### Trade-offs\n- 4.6x more memory for row-per-point output\n- 12x slower due to JOIN operation\n- BUT: delivers the required row-per-point format\n\n### Implementation\nThe macro uses a CTE to compute stats once per group, then JOINs back to the original data to repeat stats for each row. This avoids the BatchedDataCollection::Merge error that occurred with the native streaming implementation.","created_at":"2026-01-23T21:57:19Z"}]}
{"id":"forecast-extension-r6j","title":"Implement ts_split_keys macro","description":"Reverse operation: split combined unique_id back into original columns. Handle AGGREGATED keyword.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T20:35:51.84208726+01:00","created_by":"simonm","updated_at":"2026-01-13T20:56:55.828407816+01:00","closed_at":"2026-01-13T20:56:55.828407816+01:00","close_reason":"Implemented and tested ts_split_keys macro"}
{"id":"forecast-extension-rjqd","title":"Create guides/ directory with conceptual docs","description":"Create docs/guides/ with frequency-formats.md, model-selection.md, params-reference.md. External ref: GH#95","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T20:23:00.680678526+01:00","created_by":"simonm","updated_at":"2026-01-17T21:13:31.426394329+01:00","closed_at":"2026-01-17T21:13:31.426394329+01:00","close_reason":"Completed: Created guides/ directory with 3 conceptual docs (getting-started, model-selection, cross-validation)","dependencies":[{"issue_id":"forecast-extension-rjqd","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:48.065131934+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-rp7d","title":"Update remaining macros for STRUCT params","description":"Update ts_fill_unknown, ts_combine_keys, ts_aggregate_hierarchy and any other macros accepting params MAP. External ref: GH#95","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T20:22:55.859032122+01:00","created_by":"simonm","updated_at":"2026-01-17T20:34:25.799692701+01:00","closed_at":"2026-01-17T20:34:25.799692701+01:00","close_reason":"ts_fill_unknown, ts_hydrate_split, ts_combine_keys, ts_aggregate_hierarchy, ts_conformal, ts_conformal_calibrate, ts_detect_changepoints updated","dependencies":[{"issue_id":"forecast-extension-rp7d","depends_on_id":"forecast-extension-viff","type":"blocks","created_at":"2026-01-17T20:23:27.536149217+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-rp7d","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:43.993507199+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-rvv","title":"Add FFI bindings for conformal prediction in anofox-fcst-ffi","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T14:19:04.579350978+01:00","created_by":"simonm","updated_at":"2026-01-17T20:18:55.933463561+01:00","closed_at":"2026-01-17T20:18:55.933463561+01:00","close_reason":"FFI bindings for conformal_learn/apply implemented in anofox-fcst-ffi","dependencies":[{"issue_id":"forecast-extension-rvv","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:21.564047222+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-rvv","depends_on_id":"forecast-extension-dl9","type":"blocks","created_at":"2026-01-12T14:19:25.002622833+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-ryva","title":"Update hierarchy documentation for arbitrary levels","description":"Update docs/api/02-hierarchical.md and examples to document the new arbitrary hierarchy depth support","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T20:53:09.828571623+01:00","created_by":"simonm","updated_at":"2026-01-24T21:30:08.54752546+01:00","closed_at":"2026-01-24T21:30:08.54752546+01:00","close_reason":"Native function ts_aggregate_hierarchy_native handles arbitrary depth; documentation updated","dependencies":[{"issue_id":"forecast-extension-ryva","depends_on_id":"forecast-extension-geb0","type":"blocks","created_at":"2026-01-24T20:53:15.353974148+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-s1j","title":"Add changepoint detection examples","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T14:07:09.182981312+01:00","created_by":"simonm","updated_at":"2026-01-13T14:35:03.13176849+01:00","closed_at":"2026-01-13T14:35:03.13176849+01:00","close_reason":"Implemented synthetic examples with README documentation"}
{"id":"forecast-extension-sac","title":"Document peak detection parameters and interpretation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T00:25:29.852822312+01:00","created_by":"simonm","updated_at":"2026-01-10T00:37:16.156213506+01:00","closed_at":"2026-01-10T00:37:16.156213506+01:00","close_reason":"Documentation and use cases included in the example files","dependencies":[{"issue_id":"forecast-extension-sac","depends_on_id":"forecast-extension-bjq","type":"blocks","created_at":"2026-01-10T00:25:37.126681417+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sf3","title":"Remove docs/BACKTESTING_CAPABILITIES.md and BACKTESTING_EXAMPLES.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T23:58:25.194248552+01:00","created_by":"simonm","updated_at":"2026-01-10T23:59:20.999107926+01:00","closed_at":"2026-01-10T23:59:20.999107926+01:00","close_reason":"Removed docs/BACKTESTING_CAPABILITIES.md and docs/BACKTESTING_EXAMPLES.md"}
{"id":"forecast-extension-sin","title":"Date type preservation and INTEGER date column support","description":"Port C++ table functions from cpp-legacy branch to preserve DATE type and support INTEGER date columns in gap filling functions.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T15:57:28.131631006+01:00","created_by":"simonm","updated_at":"2026-01-09T17:25:48.750305236+01:00","closed_at":"2026-01-09T17:25:48.750305236+01:00","close_reason":"All children completed. Implemented ts_fill_gaps_native and ts_fill_forward_native C++ table functions with DATE/TIMESTAMP/INTEGER/BIGINT type preservation. Total 195 new test assertions added."}
{"id":"forecast-extension-soy","title":"Doc: Pro Tips / Best Practices section","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:30:12.777456693+01:00","created_by":"simonm","updated_at":"2026-01-10T19:34:00.631784857+01:00","closed_at":"2026-01-10T19:34:00.631784857+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-soy","depends_on_id":"forecast-extension-as8","type":"blocks","created_at":"2026-01-10T19:30:23.493963698+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-soy","depends_on_id":"forecast-extension-ola","type":"blocks","created_at":"2026-01-10T19:30:24.831747743+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sq9","title":"Expose SeasonalType and ModulationType classifications from fdars","description":"Expose the SeasonalType and ModulationType classifications from fdars in the ts_classify_seasonality function and add aggregate/table macro variants.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-13T11:56:12.489562404+01:00","created_by":"simonm","updated_at":"2026-01-13T12:11:36.67677746+01:00","closed_at":"2026-01-13T12:11:36.67677746+01:00","close_reason":"Closed"}
{"id":"forecast-extension-sq9.1","title":"Research fdars SeasonalityClassification struct","description":"Investigate fdars-core/src/seasonal.rs for SeasonalType, ModulationType enums. Understand timing_variability, cycle_strengths, weak_seasons fields. Document how to access these from Rust.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T11:56:20.562399633+01:00","created_by":"simonm","updated_at":"2026-01-13T12:00:01.160960382+01:00","closed_at":"2026-01-13T12:00:01.160960382+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-sq9.1","depends_on_id":"forecast-extension-sq9","type":"parent-child","created_at":"2026-01-13T11:56:20.563932976+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sq9.2","title":"Extend ts_classify_seasonality return struct","description":"Add timing_classification, modulation_type VARCHAR fields. Add has_stable_timing BOOLEAN, timing_variability DOUBLE. Add cycle_strengths DOUBLE[], weak_seasons BIGINT[].","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T11:56:22.251033257+01:00","created_by":"simonm","updated_at":"2026-01-13T12:03:47.712108124+01:00","closed_at":"2026-01-13T12:03:47.712108124+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-sq9.2","depends_on_id":"forecast-extension-sq9","type":"parent-child","created_at":"2026-01-13T11:56:22.253386917+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.2","depends_on_id":"forecast-extension-sq9.1","type":"blocks","created_at":"2026-01-13T11:56:54.511672035+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sq9.3","title":"Add ts_classify_seasonality_agg aggregate function","description":"New aggregate function with _agg suffix. Takes (date_col TIMESTAMP, value_col DOUBLE) signature. Optional period INTEGER parameter.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T11:56:23.997611395+01:00","created_by":"simonm","updated_at":"2026-01-13T12:06:27.58618887+01:00","closed_at":"2026-01-13T12:06:27.58618887+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-sq9.3","depends_on_id":"forecast-extension-sq9","type":"parent-child","created_at":"2026-01-13T11:56:23.998947866+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.3","depends_on_id":"forecast-extension-sq9.2","type":"blocks","created_at":"2026-01-13T11:56:55.476147996+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sq9.4","title":"Add ts_classify_seasonality_by table macro","description":"New table macro with _by suffix. Takes (table_name, group_col, date_col, value_col) signature. Optional period INTEGER parameter.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T11:56:24.959692002+01:00","created_by":"simonm","updated_at":"2026-01-13T12:07:34.789369684+01:00","closed_at":"2026-01-13T12:07:34.789369684+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-sq9.4","depends_on_id":"forecast-extension-sq9","type":"parent-child","created_at":"2026-01-13T11:56:24.961606056+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.4","depends_on_id":"forecast-extension-sq9.2","type":"blocks","created_at":"2026-01-13T11:56:56.180949291+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sq9.5","title":"Add tests for new seasonality classifications","description":"SQL tests for extended struct fields. Tests for aggregate function. Tests for table macro.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T11:56:25.663390558+01:00","created_by":"simonm","updated_at":"2026-01-13T12:09:33.275705515+01:00","closed_at":"2026-01-13T12:09:33.275705515+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-sq9.5","depends_on_id":"forecast-extension-sq9","type":"parent-child","created_at":"2026-01-13T11:56:25.664969481+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.5","depends_on_id":"forecast-extension-sq9.2","type":"blocks","created_at":"2026-01-13T11:56:57.111199182+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-sq9.6","title":"Update API documentation","description":"Document new struct fields in API_REFERENCE.md. Add examples for _agg and _by variants.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-13T11:56:26.590908695+01:00","created_by":"simonm","updated_at":"2026-01-13T12:10:17.181258219+01:00","closed_at":"2026-01-13T12:10:17.181258219+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-sq9.6","depends_on_id":"forecast-extension-sq9","type":"parent-child","created_at":"2026-01-13T11:56:26.592141709+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.6","depends_on_id":"forecast-extension-sq9.3","type":"blocks","created_at":"2026-01-13T11:56:58.316280679+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.6","depends_on_id":"forecast-extension-sq9.4","type":"blocks","created_at":"2026-01-13T11:56:59.350585519+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-sq9.6","depends_on_id":"forecast-extension-sq9.5","type":"blocks","created_at":"2026-01-13T11:57:00.300193896+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-syvq","title":"Consolidate ts_fill_gaps_* and ts_fill_forward_* APIs (GH#113)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-23T12:17:29.085892151+01:00","created_by":"simonm","updated_at":"2026-01-23T14:02:51.431277186+01:00","closed_at":"2026-01-23T14:02:51.431277186+01:00","close_reason":"All tasks complete. Fill functions consolidated: ts_fill_gaps_by and ts_fill_forward_by now use native streaming implementations with 10-15x memory reduction. Removed redundant ts_fill_gaps_operator_by. Native functions renamed to internal (_ts_fill_*_native)."}
{"id":"forecast-extension-tid6","title":"Fix ts_cv_forecast_by profiling error","description":"Profiling failed with 'Referenced column series_id not found'. Investigate and fix the query.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-23T14:45:40.985906075+01:00","created_by":"simonm","updated_at":"2026-01-23T15:28:17.071246018+01:00","closed_at":"2026-01-23T15:28:17.071246018+01:00","close_reason":"Not a bug. ts_cv_forecast_by requires input from ts_cv_split_by (which provides fold_id column). The profiling error was caused by incorrect usage - passing raw data instead of cv_split output. Function works correctly when given proper input."}
{"id":"forecast-extension-to3","title":"Add tests for ts_forecast_agg aggregate forecasting","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T15:29:30.651483547+01:00","created_by":"simonm","updated_at":"2026-01-08T15:57:31.941316892+01:00","closed_at":"2026-01-08T15:57:31.941316892+01:00","close_reason":"Added comprehensive tests for ts_forecast_agg aggregate function covering: basic functionality, output structure, model tests (basic, exponential smoothing, theta, state space, auto selection, multiple seasonality), confidence bounds, GROUP BY behavior, horizon variations, fitted values, and SQL integration","dependencies":[{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-4c7","type":"blocks","created_at":"2026-01-08T15:32:54.961286679+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-avz","type":"blocks","created_at":"2026-01-08T15:32:54.992715946+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-5fi","type":"blocks","created_at":"2026-01-08T15:32:55.023525485+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-xpc","type":"blocks","created_at":"2026-01-08T15:32:55.056097898+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-3x2","type":"blocks","created_at":"2026-01-08T15:32:55.083380397+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-7cg","type":"blocks","created_at":"2026-01-08T15:32:55.111129628+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-c4u","type":"blocks","created_at":"2026-01-08T15:32:55.138907041+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-1ub","type":"blocks","created_at":"2026-01-08T15:32:55.170553382+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-tos","title":"Implement ts_difficulty_score bridge function","description":"ts_difficulty_score(values[], method) -\u003e DOUBLE[]. Bridges Part 1 (Changepoints/Stats) to Part 2 (Adaptive Conformal). Methods: volatility, changepoint_prob, rolling_std.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T22:21:28.831162139+01:00","created_by":"simonm","updated_at":"2026-01-23T14:26:51.514647287+01:00","closed_at":"2026-01-23T14:26:51.514647287+01:00","close_reason":"Implemented ts_difficulty_score, ts_conformalize, and removed deprecated conformal functions"}
{"id":"forecast-extension-txty","title":"Add tests for STRUCT params API","description":"Create comprehensive tests verifying STRUCT params work with mixed types, backward compatibility with MAP, and error handling. External ref: GH#95","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T20:22:57.149704983+01:00","created_by":"simonm","updated_at":"2026-01-17T20:52:29.336201192+01:00","closed_at":"2026-01-17T20:52:29.336201192+01:00","close_reason":"STRUCT params tests added to ts_backtest_auto.test, ts_forecast_by.test, ts_cv_split.test - all passing","dependencies":[{"issue_id":"forecast-extension-txty","depends_on_id":"forecast-extension-viff","type":"blocks","created_at":"2026-01-17T20:23:28.261379264+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-txty","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:44.704075101+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-txy","title":"Add tests for feature config loading (ts_features_config_from_json, ts_features_config_from_csv)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T15:29:36.541852376+01:00","created_by":"simonm","updated_at":"2026-01-08T16:47:14.957805399+01:00","closed_at":"2026-01-08T16:47:14.957805399+01:00","close_reason":"Added comprehensive tests for ts_features_config_from_json and ts_features_config_from_csv functions"}
{"id":"forecast-extension-u2v","title":"Design and implement ts_validate_timestamps C++ UDF","description":"Implement C++ UDF to validate that explicit training_end_times exist in the data. Return error details if any timestamps are missing.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T11:47:56.428973683+01:00","created_by":"simonm","updated_at":"2026-01-09T13:50:53.697852749+01:00","closed_at":"2026-01-09T13:50:53.697852749+01:00","close_reason":"Implemented ts_validate_timestamps and ts_validate_timestamps_summary SQL table macros. Returns per-group validation with missing timestamps details."}
{"id":"forecast-extension-u66b","title":"Update FFI layer for new ts_stats fields","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T07:39:45.132783327+01:00","created_by":"simonm","updated_at":"2026-01-16T07:49:58.479473763+01:00","closed_at":"2026-01-16T07:49:58.479473763+01:00","close_reason":"Implemented in PR for issue #86","dependencies":[{"issue_id":"forecast-extension-u66b","depends_on_id":"forecast-extension-7j55","type":"blocks","created_at":"2026-01-16T07:39:55.002484984+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-u66b","depends_on_id":"forecast-extension-6cc2","type":"blocks","created_at":"2026-01-16T07:39:55.04079463+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-ul1","title":"Implement ts_conformal_apply","description":"Apply CalibrationProfile to forecasts. Returns PredictionInterval struct with lower/upper arrays matching alphas. Handle symmetric and asymmetric profiles.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T22:21:23.754741032+01:00","created_by":"simonm","updated_at":"2026-01-15T08:51:39.008672259+01:00","closed_at":"2026-01-15T08:51:39.008672259+01:00","close_reason":"Implemented in PR #85: Conformal API v2 with Learn/Apply pattern","dependencies":[{"issue_id":"forecast-extension-ul1","depends_on_id":"forecast-extension-98h","type":"blocks","created_at":"2026-01-14T22:21:42.999690962+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-uok","title":"Create SQL table macros for conformal prediction","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-12T14:19:06.56363739+01:00","created_by":"simonm","updated_at":"2026-01-17T20:20:05.751632754+01:00","closed_at":"2026-01-17T20:20:05.751632754+01:00","close_reason":"SQL table macros implemented: ts_conformal, ts_conformal_calibrate, ts_conformal_apply in ts_macros.cpp:1783-1879","dependencies":[{"issue_id":"forecast-extension-uok","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:23.335911776+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-uok","depends_on_id":"forecast-extension-hgf","type":"blocks","created_at":"2026-01-12T14:19:27.533645645+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-uyg","title":"Fix ts_features.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:28.731063681+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.402642266+01:00","closed_at":"2026-01-08T20:26:45.402642266+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-viff","title":"Create param_value helper macro for MAP/STRUCT extraction","description":"Create a helper macro that extracts parameter values from either MAP or STRUCT using JSON conversion: json_extract_string(to_json(params), '$.key'). This enables backward compatibility during transition.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T20:21:38.37100772+01:00","created_by":"simonm","updated_at":"2026-01-17T20:34:22.503302422+01:00","closed_at":"2026-01-17T20:34:22.503302422+01:00","close_reason":"JSON extraction pattern implemented: json_extract_string(to_json(params), '$.key') - supports both MAP and STRUCT","external_ref":"GH#95","dependencies":[{"issue_id":"forecast-extension-viff","depends_on_id":"forecast-extension-6rir","type":"parent-child","created_at":"2026-01-17T20:23:39.704362921+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-vrnw","title":"Work around DuckDB profiling bug for table_in_out functions","description":"DuckDB has a bug where table_in_out functions fail with BatchedDataCollection::Merge error when using SELECT * with profiling enabled. The workaround is to wrap queries in SELECT COUNT(*) FROM (...) which still measures memory/CPU accurately. Native fill functions work correctly - this was a profiling-only issue.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-23T12:36:29.410225181+01:00","created_by":"simonm","updated_at":"2026-01-23T12:44:25.118456217+01:00","closed_at":"2026-01-23T12:44:25.118456217+01:00","close_reason":"Not a bug in our code. DuckDB profiling bug - worked around by using COUNT(*) wrapper in profiling script.","dependencies":[{"issue_id":"forecast-extension-vrnw","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:36:37.709764525+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-vyl","title":"Fix BOCPD posterior probability computation","description":"Apply the fix to the detect_changepoints_bocpd function based on investigation findings. Ensure posterior probabilities vary based on data likelihood instead of staying constant at 1/hazard_lambda.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-13T11:08:56.384275092+01:00","created_by":"simonm","updated_at":"2026-01-13T11:21:20.231073891+01:00","closed_at":"2026-01-13T11:21:20.231073891+01:00","close_reason":"Changed changepoint probability from P(r=0) to P(r=1) in changepoint.rs","dependencies":[{"issue_id":"forecast-extension-vyl","depends_on_id":"forecast-extension-0cj","type":"blocks","created_at":"2026-01-13T11:09:07.89257613+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-vyl","depends_on_id":"forecast-extension-0do","type":"blocks","created_at":"2026-01-13T11:09:07.928182881+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-vz5y","title":"Implement GraphRAG Lite (Hierarchy Traversal)","description":"## Context\nSenior Rust Engineer task for leann-rs (high-performance vector database and RAG engine).\nStack: Rust 1.88+, candle-core, surrealdb/hnsw, tokio.\n\n## Target Modules\n- leann-storage\n- leann-core\n\n## Implementation Steps\n\n### 1. Schema Upgrade\nIn leann-core, ensure Document struct has optional fields:\n```rust\nparent_id: Option\u003cUuid\u003e\nchildren_ids: Vec\u003cUuid\u003e\n```\n\n### 2. Indexing Update\nBuilding on \"Hierarchy-aware markdown chunking\" (Commit db4155d):\n- H1 title stored as \"Parent\" node\n- Sections (H2, H3) stored as \"Child\" nodes linking back to Parent\n\n### 3. Retrieval Strategy (The \"Graph\" part)\nImplement `retrieve_context_window` function:\n- If search hit matches a \"Child\" node (e.g., specific parameter definition)\n- Automatically fetch the \"Parent\" node (Function Name/Summary)\n- Inject parent into LLM context\n\n## Reasoning\nProvides \"Global Context\" (which function uses this param?) that vector search often misses.\n\n## Constraints\n- Prioritize local inference where possible\n- Maintain zero-copy principles and high performance","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-19T16:23:26.153474578+01:00","created_by":"simonm","updated_at":"2026-01-19T16:23:48.266305305+01:00","deleted_at":"2026-01-19T16:23:48.266305305+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"forecast-extension-w3sk","title":"Document ts_mstl_decomposition_by seasonal parameters and MAP behavior","description":"Update decomposition examples to: 1) Add examples showing seasonal periods via params MAP, 2) Document MAP{} default behavior (auto-detect periods), 3) Update README.md. Files: examples/decomposition/synthetic_decomposition_examples.sql, examples/decomposition/README.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T21:10:11.80623348+01:00","created_by":"simonm","updated_at":"2026-01-22T21:27:23.874918896+01:00","closed_at":"2026-01-22T21:27:23.874918896+01:00","close_reason":"Added documentation for seasonal parameters and MAP{} behavior in examples and README"}
{"id":"forecast-extension-w58","title":"Add SQL integration tests for multi-key functions","description":"Create comprehensive tests for ts_validate_separator, ts_combine_keys, ts_aggregate_hierarchy, and ts_split_keys.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T20:35:52.581037262+01:00","created_by":"simonm","updated_at":"2026-01-13T20:58:31.701066174+01:00","closed_at":"2026-01-13T20:58:31.701066174+01:00","close_reason":"Added comprehensive SQL integration tests (47 assertions)","dependencies":[{"issue_id":"forecast-extension-w58","depends_on_id":"forecast-extension-mu1","type":"blocks","created_at":"2026-01-13T20:36:00.927051994+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-w58","depends_on_id":"forecast-extension-4uo","type":"blocks","created_at":"2026-01-13T20:36:00.961280031+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-w58","depends_on_id":"forecast-extension-5v0","type":"blocks","created_at":"2026-01-13T20:36:00.993900742+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-w58","depends_on_id":"forecast-extension-r6j","type":"blocks","created_at":"2026-01-13T20:36:01.029001323+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-w74","title":"Port C++ ts_fill_forward table function from cpp-legacy branch","description":"Replace SQL macro with C++ table-in-out function to preserve DATE type and support INTEGER date columns. Reference: origin/cpp-legacy:src/ts_fill_forward_function.cpp","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T15:57:06.483815084+01:00","created_by":"simonm","updated_at":"2026-01-09T17:24:59.724631808+01:00","closed_at":"2026-01-09T17:24:59.724631808+01:00","close_reason":"Implemented ts_fill_forward_native as C++ table-in-out function with DATE/TIMESTAMP/INTEGER/BIGINT type preservation. Uses Rust FFI (anofox_ts_fill_forward_dates). Tests added with 94 assertions.","dependencies":[{"issue_id":"forecast-extension-w74","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.153368031+01:00","created_by":"simonm"}],"comments":[{"id":5,"issue_id":"forecast-extension-w74","author":"simonm","text":"## Problem\n\nCurrent SQL macro uses `generate_series()` which always returns TIMESTAMP, losing DATE type information.\n\n## Solution in cpp-legacy branch\n\nPort `src/ts_fill_forward_function.cpp` which uses similar table-in-out pattern as ts_fill_gaps.\n\n### Key features:\n1. **Type preservation**: DATE in -\u003e DATE out, TIMESTAMP in -\u003e TIMESTAMP out\n2. **INTEGER date support**: Works with INTEGER/BIGINT date columns\n3. **Target date conversion**: Properly handles target_date parameter for all types\n\n### Files to port:\n- `src/ts_fill_forward_function.cpp`\n- `src/include/ts_fill_forward_function.hpp`\n\n## Acceptance Criteria\n- [ ] DATE input returns DATE output\n- [ ] TIMESTAMP input returns TIMESTAMP output\n- [ ] INTEGER date columns supported\n- [ ] All existing tests pass","created_at":"2026-01-09T14:57:16Z"},{"id":7,"issue_id":"forecast-extension-w74","author":"simonm","text":"## Updated Approach\n\nUse existing Rust FFI function `anofox_ts_fill_forward_dates` instead of porting legacy C++.\n\nC++ wrapper just needs to:\n1. Convert DATE/TIMESTAMP/INTEGER → i64\n2. Call Rust FFI\n3. Convert i64 → original type","created_at":"2026-01-09T15:00:17Z"}]}
{"id":"forecast-extension-w7m5","title":"Extract Anofox logo from website","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T14:33:11.104233101+01:00","created_by":"simonm","updated_at":"2026-01-26T15:22:49.768968428+01:00","closed_at":"2026-01-26T15:22:49.768968428+01:00","close_reason":"Logo files already exist in docs/assets/ - using existing logo.svg"}
{"id":"forecast-extension-w7w7","title":"Update FFI bindings for strategy-based conformal API","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T22:41:50.359990205+01:00","created_by":"simonm","updated_at":"2026-01-14T22:53:24.739790207+01:00","closed_at":"2026-01-14T22:53:24.739790207+01:00","close_reason":"Updated FFI bindings: added ConformalStrategyFFI enum, updated CalibrationProfileFFI with strategy and state_vector, added violation_rate to ConformalEvaluationFFI, updated conformal_learn FFI to accept strategy parameter","dependencies":[{"issue_id":"forecast-extension-w7w7","depends_on_id":"forecast-extension-gxw7","type":"blocks","created_at":"2026-01-14T22:41:59.477852743+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-woy","title":"Create leakage-proof ts_hydrate_split macro","description":"Create a safe join macro that prevents accidental data leakage when joining features to CV splits.\n\n## Problem\nCurrent Step 3 (JOIN back original features) is the danger zone. Direct joins on date can accidentally pull in 'unknown' features (like actual temperature) for the test period.\n\n## Solution\nCreate `ts_hydrate_split` macro:\n- Takes cv_splits, source table, and list of unknown_cols\n- Logic:\n  - If split = 'train', return value\n  - If split = 'test' AND col is unknown, return NULL (or fill value)\n  - If split = 'test' AND col is known, return value\n\n## Benefits\n- Fail-safe rather than fail-open\n- Prevents accidental look-ahead bias\n- Single point of control for feature masking","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-10T14:24:48.705237277+01:00","created_by":"simonm","updated_at":"2026-01-10T14:39:32.141521832+01:00","closed_at":"2026-01-10T14:39:32.141521832+01:00","close_reason":"Implemented ts_hydrate_split and ts_hydrate_split_full macros with tests and documentation","dependencies":[{"issue_id":"forecast-extension-woy","depends_on_id":"forecast-extension-kzq","type":"parent-child","created_at":"2026-01-10T14:25:19.801423132+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-xpc","title":"Test Theta Methods (Theta, OptimizedTheta, DynamicTheta, DynamicOptimizedTheta)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:36.160428914+01:00","created_by":"simonm","updated_at":"2026-01-08T16:13:23.352192387+01:00","closed_at":"2026-01-08T16:13:23.352192387+01:00","close_reason":"Added comprehensive tests for Theta forecasting methods (Theta, OptimizedTheta, DynamicTheta, DynamicOptimizedTheta) in test/sql/ts_forecast_theta.test. All 21 test files pass with 794 assertions."}
{"id":"forecast-extension-xtu","title":"Fix first observation being incorrectly marked as changepoint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:54.662703006+01:00","created_by":"simonm","updated_at":"2026-01-08T21:32:38.628297299+01:00","closed_at":"2026-01-08T21:32:38.628297299+01:00","close_reason":"Bug already fixed in Rust rewrite - old C++ code had explicit first/last changepoint insertion","dependencies":[{"issue_id":"forecast-extension-xtu","depends_on_id":"forecast-extension-dpg","type":"blocks","created_at":"2026-01-08T21:25:05.907312636+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-y1x","title":"Refactor ts_fill_unknown to use params MAP","description":"Change ts_fill_unknown signature to use MAP{} for optional params.\n\nCurrent: ts_fill_unknown(source, group_col, date_col, value_col, cutoff_date, strategy, fill_value)\n\nProposed: ts_fill_unknown(source, group_col, date_col, value_col, cutoff_date, params)\n\nWhere params MAP supports:\n- strategy: 'last_value' (default), 'null', 'default'\n- fill_value: constant value for 'default' strategy (default: 0.0)\n\nExample:\nSELECT * FROM ts_fill_unknown('data', 'category', 'date', 'temp', '2023-06-01'::DATE, MAP{'strategy': 'null'});","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T01:13:41.51657798+01:00","created_by":"simonm","updated_at":"2026-01-10T09:42:52.693371433+01:00","closed_at":"2026-01-10T09:42:52.693371433+01:00","close_reason":"Refactored to use params MAP. Code committed in bd1169b."}
{"id":"forecast-extension-y8l","title":"Add unit test for CI detection in telemetry","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:32:10.056519896+01:00","created_by":"simonm","updated_at":"2026-01-09T23:36:40.970531774+01:00","closed_at":"2026-01-09T23:36:40.970531774+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-y8l","depends_on_id":"forecast-extension-4df","type":"blocks","created_at":"2026-01-09T23:32:17.885064011+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-yhk7","title":"Benchmark Docker image sizes (DuckDB vs Python)","description":"Compare Docker image sizes for DuckDB+anofox_forecast vs Python+statsforecast","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T14:34:53.555531526+01:00","created_by":"simonm","updated_at":"2026-01-26T15:25:45.438289462+01:00","closed_at":"2026-01-26T15:25:45.438289462+01:00","close_reason":"DuckDB+extension ~180MB vs Python+statsforecast 849MB (4.7x smaller)"}
{"id":"forecast-extension-yim4","title":"Add missing statistics to ts_stats table function","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-15T20:11:28.795007673+01:00","created_by":"simonm","updated_at":"2026-01-15T21:05:06.25882547+01:00","closed_at":"2026-01-15T21:05:06.25882547+01:00","close_reason":"Closed","comments":[{"id":11,"issue_id":"forecast-extension-yim4","author":"simonm","text":"## Feature Request\n\nAdd the following statistics to the ts_stats table function:\n\n### Value-based Statistics\n- n_nan: Count of NaN values\n- n_unique_values: Count of distinct values  \n- is_constant: Whether series has only one unique value\n\n### Time-based Statistics (requires timestamp column)\n- start_date: First timestamp\n- end_date: Last timestamp\n- expected_length: Expected periods between start/end based on frequency\n\n### Leading/Trailing Pattern Statistics\n- n_zeros_start: Count of leading zeros\n- n_zeros_end: Count of trailing zeros\n- plateau_size: Longest run of constant values\n- plateau_size_nonzero: Longest run of constant non-zero values\n\n## Files to Modify\n- crates/anofox-fcst-core/src/stats.rs\n- crates/anofox-fcst-ffi/src/types.rs\n- crates/anofox-fcst-ffi/src/lib.rs\n- src/table_functions/ts_stats.cpp\n- src/include/anofox_fcst_ffi.h","created_at":"2026-01-15T19:12:05Z"}]}
{"id":"forecast-extension-ymrt","title":"Update documentation for consolidated fill APIs","description":"Update README and API docs for the consolidated fill function APIs.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T12:18:21.560198664+01:00","created_by":"simonm","updated_at":"2026-01-23T14:02:07.994570963+01:00","closed_at":"2026-01-23T14:02:07.994570963+01:00","close_reason":"Updated docs/api/04-data-preparation.md with performance notes and complete parameter documentation for ts_fill_gaps_by and ts_fill_forward_by","dependencies":[{"issue_id":"forecast-extension-ymrt","depends_on_id":"forecast-extension-syvq","type":"parent-child","created_at":"2026-01-23T12:19:02.481896697+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-ymrt","depends_on_id":"forecast-extension-12ww","type":"blocks","created_at":"2026-01-23T12:19:24.055502395+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-yy0","title":"Add tests for ts_stats_summary and ts_data_quality_summary","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:29:32.511847245+01:00","created_by":"simonm","updated_at":"2026-01-08T16:42:12.973766294+01:00","closed_at":"2026-01-08T16:42:12.973766294+01:00","close_reason":"Added comprehensive tests for ts_stats_summary and ts_data_quality_summary functions"}
{"id":"forecast-extension-yzub","title":"Extend ts_aggregate_hierarchy to support arbitrary depth","description":"The ts_aggregate_hierarchy function is hardcoded to exactly 3 hierarchy levels. Need to make it support 2-5+ levels dynamically. Location: src/macros/ts_macros.cpp lines 1615-1695","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T20:52:56.770571564+01:00","created_by":"simonm","updated_at":"2026-01-24T21:29:54.548660217+01:00","closed_at":"2026-01-24T21:29:54.548660217+01:00","close_reason":"Implemented ts_aggregate_hierarchy_native supporting arbitrary hierarchy levels (2-N columns)"}
{"id":"forecast-extension-z38","title":"Add empty array validation in _ts_detect_changepoints_bocpd","description":"The scalar function _ts_detect_changepoints_bocpd crashes with 'INTERNAL Error: Operation requires a flat vector' when given an empty array. Fix: Add early return with empty/NULL result for arrays with length \u003c 2.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-14T20:52:32.223812992+01:00","created_by":"simonm","updated_at":"2026-01-14T21:09:18.839210125+01:00","closed_at":"2026-01-14T21:09:18.839210125+01:00","close_reason":"Fixed: Added empty array validation in ExtractListAsDouble and all changepoint functions"}
{"id":"forecast-extension-zgu","title":"Add conformal prediction support to anofox-regression crate","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-12T14:19:02.874866984+01:00","created_by":"simonm","updated_at":"2026-01-12T15:03:13.046913816+01:00","closed_at":"2026-01-12T15:03:13.046913816+01:00","close_reason":"External crates anofox-forecast and anofox-regression already have conformal prediction support","dependencies":[{"issue_id":"forecast-extension-zgu","depends_on_id":"forecast-extension-db4","type":"blocks","created_at":"2026-01-12T14:19:20.046619162+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-zwrx","title":"Update API documentation for ETS model parameter","description":"Update docs/API_REFERENCE.md:\n- Document 'model' parameter for ETS\n- Add notation reference table\n- Show examples with different ETS specs\n- Note default (AAA) and validation behavior\n\nRelated: GH #93","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T12:04:42.98017866+01:00","created_by":"simonm","updated_at":"2026-01-17T20:19:49.349096764+01:00","closed_at":"2026-01-17T20:19:49.349096764+01:00","close_reason":"ETS model parameter documented in API_REFERENCE.md:3847-3869 with component table and example specifications","dependencies":[{"issue_id":"forecast-extension-zwrx","depends_on_id":"forecast-extension-djz8","type":"blocks","created_at":"2026-01-16T12:04:49.861307953+01:00","created_by":"simonm"}]}
