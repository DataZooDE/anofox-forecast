{"id":"forecast-extension-05t","title":"Add documentation for ts_cv_split","description":"Document API, parameters, examples, and best practices for handling data leakage in time series CV.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-09T11:48:02.148978859+01:00","created_by":"simonm","updated_at":"2026-01-09T14:50:07.37423794+01:00","closed_at":"2026-01-09T14:50:07.37423794+01:00","close_reason":"Added comprehensive documentation for ts_cv_split covering API, examples, window types, data leakage prevention, and best practices","dependencies":[{"issue_id":"forecast-extension-05t","depends_on_id":"forecast-extension-g2i","type":"blocks","created_at":"2026-01-09T11:48:14.832299398+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-1j1","title":"Design exogenous variable API for ts_forecast","description":"## Approved API Design\n\n### Scalar Function\n```sql\n_ts_forecast_exog(values, horizon, model, xreg, future_xreg)\n-- Types:\n--   values: LIST\u003cDOUBLE\u003e           -- y values\n--   horizon: INTEGER               -- forecast horizon\n--   model: VARCHAR                 -- model name (AutoARIMA, ARIMAX, etc.)\n--   xreg: LIST\u003cLIST\u003cDOUBLE\u003e\u003e       -- historical X [n_regressors][n_obs]\n--   future_xreg: LIST\u003cLIST\u003cDOUBLE\u003e\u003e -- future X [n_regressors][horizon]\n```\n\n### Table Macros\n\n#### Option 1: Future X from table (primary use case)\n```sql\n-- Single series with future X from table\nts_forecast_exog(source, date_col, target_col, xreg_cols, \n                 future_source, future_date_col, future_xreg_cols,\n                 method, horizon, params)\n\n-- Grouped series with future X from table\nts_forecast_exog_by(source, group_col, date_col, target_col, xreg_cols,\n                    future_source, future_date_col, future_xreg_cols,\n                    method, horizon, params, frequency='1d')\n```\n\n### Example Usage\n\n#### Historical data table\n```sql\nCREATE TABLE sales_data AS\nSELECT * FROM (VALUES\n    ('A', '2024-01-01'::DATE, 100, 20.0, 0),\n    ('A', '2024-01-02'::DATE, 120, 22.0, 1),\n    ('A', '2024-01-03'::DATE, 115, 19.0, 0)\n) AS t(store_id, date, sales, temperature, promotion);\n```\n\n#### Future exogenous table (e.g., weather forecast + planned promos)\n```sql\nCREATE TABLE future_features AS\nSELECT * FROM (VALUES\n    ('A', '2024-01-04'::DATE, 21.0, 1),\n    ('A', '2024-01-05'::DATE, 23.0, 0),\n    ('A', '2024-01-06'::DATE, 20.0, 1)\n) AS t(store_id, date, temperature, promotion);\n```\n\n#### Forecast with exogenous from tables\n```sql\nSELECT * FROM ts_forecast_exog_by(\n    'sales_data',                    -- historical data\n    'store_id',                      -- group column\n    'date',                          -- date column\n    'sales',                         -- target column\n    ['temperature', 'promotion'],    -- X columns (same names in both tables)\n    'future_features',               -- future X source table\n    'date',                          -- future date column (for ordering)\n    ['temperature', 'promotion'],    -- future X columns\n    'AutoARIMA',                     -- model\n    3,                               -- horizon\n    {},                              -- params\n    '1d'                             -- frequency\n);\n```\n\n### Alternative: Inline future X (for simple cases)\n```sql\n-- Using literal arrays when future X is simple\nts_forecast_exog_by(\n    'sales_data', 'store_id', 'date', 'sales',\n    ['temp', 'promo'],\n    NULL,                            -- no future table\n    NULL,\n    [[21, 23, 20], [1, 0, 1]],       -- inline future X arrays\n    'AutoARIMA', 3, {}, '1d'\n)\n```\n\n### Supported Models\nARIMA, ARIMAX, SARIMA, SARIMAX, AutoARIMA, OptimizedTheta, DynamicTheta, MFLES\n\n### Validation Rules\n1. len(future_xreg) == horizon (from table rows or array length)\n2. xreg_cols and future_xreg_cols must have same length\n3. Column names in xreg_cols must exist in source table\n4. Column names in future_xreg_cols must exist in future_source table\n5. For grouped: future_source must have matching group_col values\n6. Model must support exog (error otherwise)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T22:12:33.688945038+01:00","created_by":"simonm","updated_at":"2026-01-08T22:23:50.72034317+01:00","closed_at":"2026-01-08T22:23:50.72034317+01:00","close_reason":"API design approved"}
{"id":"forecast-extension-1rh","title":"Update C++ extension for exogenous variables","description":"Extend ts_forecast.cpp to handle exogenous data: (1) Accept additional columns for X regressors, (2) Accept future_X parameter (LIST or subquery), (3) Validate future_X length matches horizon, (4) Pass data to Rust FFI layer","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:10.782164761+01:00","created_by":"simonm","updated_at":"2026-01-08T22:47:53.794958148+01:00","closed_at":"2026-01-08T22:47:53.794958148+01:00","close_reason":"Implemented C++ extension: _ts_forecast_exog scalar function, ts_forecast_exog and ts_forecast_exog_by macros","dependencies":[{"issue_id":"forecast-extension-1rh","depends_on_id":"forecast-extension-h4w","type":"blocks","created_at":"2026-01-08T22:16:35.244810242+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-1rh","depends_on_id":"forecast-extension-lk0","type":"blocks","created_at":"2026-01-08T22:33:31.177876531+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-1ub","title":"Test forecast parameters (confidence_level, seasonal_period, auto_detect_seasonality)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:41.604058088+01:00","created_by":"simonm","updated_at":"2026-01-08T16:34:31.648410718+01:00","closed_at":"2026-01-08T16:34:31.648410718+01:00","close_reason":"Added comprehensive tests for forecast parameters including confidence_level, seasonal_period, auto_detect, MAP params interface, and frequency parameter"}
{"id":"forecast-extension-2em","title":"Fix ts_detect_peaks n/m parameter swap in fdars-core call","description":"The detect_peaks and analyze_peak_timing functions passed n and m parameters in wrong order to fdars-core.\n\n**Root Cause:**\nfdars-core's detect_peaks expects: `data, n_samples, m_timepoints, argvals`\nWe were passing: `values, n, 1, argvals` (treating n as samples, m=1 timepoints)\nShould be: `values, 1, n, argvals` (1 sample, n timepoints)\n\n**Fix:**\nIn `crates/anofox-fcst-core/src/peaks.rs`:\n- Changed `fdars_detect_peaks(values, n, 1, ...)` to `fdars_detect_peaks(values, 1, n, ...)`\n- Changed `fdars_analyze_peak_timing(values, n, 1, ...)` to `fdars_analyze_peak_timing(values, 1, n, ...)`\n\n**Verification:**\n- Test case `[1.0, 3.0, 2.0, 5.0, 1.0, 4.0, 2.0]` now returns n_peaks=2 instead of 0\n- All 135 Rust tests pass\n- All 1845 DuckDB assertions pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T22:16:23.794065033+01:00","created_by":"simonm","updated_at":"2026-01-09T22:23:18.041264252+01:00","closed_at":"2026-01-09T22:23:18.041264252+01:00","close_reason":"Fixed n/m parameter swap in fdars-core calls. Commit 5d850cc."}
{"id":"forecast-extension-2hi","title":"Write mixed batch isolation tests - key test for 10k series resilience","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T17:48:59.386193943+01:00","created_by":"simonm","updated_at":"2026-01-08T19:08:17.675602528+01:00","closed_at":"2026-01-08T19:08:17.675602528+01:00","close_reason":"Added mixed batch isolation tests with 250 assertions covering 10k series resilience","dependencies":[{"issue_id":"forecast-extension-2hi","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:18.001775511+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-2vj","title":"Fix ts_peaks.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:27.157291643+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.371801963+01:00","closed_at":"2026-01-08T20:26:45.371801963+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-38f","title":"Fix ts_changepoints.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:25.945915811+01:00","created_by":"simonm","updated_at":"2026-01-08T20:20:53.940009168+01:00","closed_at":"2026-01-08T20:20:53.940009168+01:00","close_reason":"Fixed 3 changepoint detection functions"}
{"id":"forecast-extension-3in","title":"Add test for ts_fill_forward_operator","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-08T15:29:37.324622465+01:00","created_by":"simonm","updated_at":"2026-01-08T17:12:59.762494073+01:00","closed_at":"2026-01-08T17:12:59.762494073+01:00","close_reason":"Added comprehensive tests for ts_fill_forward macro (note: ts_fill_forward_operator native function has a bug that causes it to hang - tests use the working ts_fill_forward macro instead)"}
{"id":"forecast-extension-3tt","title":"Add scenario expression support for unknown features","description":"Extend ts_fill_unknown to support scenario expressions like CASE WHEN month(date) = 12 THEN 1 ELSE 0 END for simulation studies.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:48:00.267025861+01:00","created_by":"simonm","updated_at":"2026-01-09T14:15:25.832543087+01:00","closed_at":"2026-01-09T14:15:25.832543087+01:00","close_reason":"Implemented ts_mark_unknown helper function that marks rows as known/unknown, enabling users to apply custom scenario expressions via standard SQL CASE statements.","dependencies":[{"issue_id":"forecast-extension-3tt","depends_on_id":"forecast-extension-e1p","type":"blocks","created_at":"2026-01-09T11:48:13.2528125+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-3v0","title":"ts_forecast_by: Test Multiple Seasonality Models (MFLES, MSTL, TBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:12.493342423+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.620640456+01:00","closed_at":"2026-01-08T15:52:30.620640456+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-3x2","title":"Test State Space and ARIMA Models (ETS, ARIMA)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:37.284167311+01:00","created_by":"simonm","updated_at":"2026-01-08T16:16:16.190990865+01:00","closed_at":"2026-01-08T16:16:16.190990865+01:00","close_reason":"Added comprehensive tests for State Space and ARIMA models (ETS, ARIMA) in test/sql/ts_forecast_statespace.test. All 22 test files pass with 875 assertions."}
{"id":"forecast-extension-4c7","title":"Test Auto Selection Models (AutoETS, AutoARIMA, AutoTheta, AutoMFLES, AutoMSTL, AutoTBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:28.342878669+01:00","created_by":"simonm","updated_at":"2026-01-08T16:28:47.020296692+01:00","closed_at":"2026-01-08T16:28:47.020296692+01:00","close_reason":"Added comprehensive tests for Auto Selection Models (AutoETS, AutoARIMA, AutoTheta, AutoMFLES, AutoMSTL, AutoTBATS)"}
{"id":"forecast-extension-4df","title":"Add CI environment detection to telemetry init","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:32:08.954153378+01:00","created_by":"simonm","updated_at":"2026-01-09T23:35:29.508343228+01:00","closed_at":"2026-01-09T23:35:29.508343228+01:00","close_reason":"Closed"}
{"id":"forecast-extension-56h","title":"Demonstrate ts_cv_split() for backtest folds","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.504442245+01:00","created_by":"simonm","updated_at":"2026-01-10T00:00:15.145068132+01:00","closed_at":"2026-01-10T00:00:15.145068132+01:00","close_reason":"Created examples/02_ts_cv_split_demo.sql demonstrating: ts_cv_generate_folds, ts_cv_split_folds, ts_cv_split with expanding/fixed windows, joining back features for forecasting"}
{"id":"forecast-extension-56y","title":"Support integer date columns in ts_fill_gaps and related functions","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T15:42:01.830548562+01:00","created_by":"simonm","updated_at":"2026-01-09T17:25:38.332613772+01:00","closed_at":"2026-01-09T17:25:38.332613772+01:00","close_reason":"INTEGER/BIGINT date column support implemented in ts_fill_gaps_native and ts_fill_forward_native. Both functions handle INTEGER/BIGINT columns with raw integer frequency (e.g., '1' for sequential integers). Verified with tests.","dependencies":[{"issue_id":"forecast-extension-56y","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.211903871+01:00","created_by":"simonm"}],"comments":[{"id":1,"issue_id":"forecast-extension-56y","author":"simonm","text":"## Problem\n\nCurrently ts_fill_gaps, ts_fill_forward, ts_fill_gaps_operator, and related functions only support DATE/TIMESTAMP date columns. When an integer column is passed as the date column, the function fails with:\n\nConversion Error: Unimplemented type for cast (INTEGER -\u003e TIMESTAMP)\n\n## Use Cases\n\n1. Unix timestamps - Seconds/milliseconds since epoch stored as INTEGER/BIGINT\n2. Sequential integers - Simple 1, 2, 3... representing time periods\n3. Custom epoch - Days/hours from a custom start date\n\n## Proposed Solution\n\nDetect integer date columns and handle them appropriately:\n- For sequential integers: Use integer arithmetic instead of generate_series\n- For Unix timestamps: Auto-convert to TIMESTAMP internally\n- Consider adding a date_type parameter to specify interpretation\n\n## Affected Functions\n\n- ts_fill_gaps\n- ts_fill_forward\n- ts_fill_gaps_operator\n- ts_forecast_by\n- ts_forecast_exog_by\n\n## Workaround\n\nUsers can currently cast integer dates before calling the function.","created_at":"2026-01-09T14:42:20Z"},{"id":8,"issue_id":"forecast-extension-56y","author":"simonm","text":"## Note on Architecture\n\nThe Rust `fill_gaps()` and `fill_forward()` functions already work with `i64` dates.\n\nFor INTEGER date column support:\n- The C++ wrapper just needs to pass INTEGER values directly as i64\n- No Rust changes needed - just C++ type handling\n\nThis task can be closed once forecast-extension-e2n is done, as INTEGER support comes naturally from the i64-based Rust implementation.","created_at":"2026-01-09T15:00:27Z"}]}
{"id":"forecast-extension-5fi","title":"Test Exponential Smoothing Models (Holt, HoltWinters, SeasonalES, SeasonalESOptimized, SeasonalWindowAverage)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:33.261004861+01:00","created_by":"simonm","updated_at":"2026-01-08T16:08:34.649370705+01:00","closed_at":"2026-01-08T16:08:34.649370705+01:00","close_reason":"Added comprehensive tests for exponential smoothing models (Holt, HoltWinters, SeasonalES, SeasonalESOptimized, SeasonalWindowAverage) in test/sql/ts_forecast_exp_smoothing.test. All 20 test files pass with 707 assertions."}
{"id":"forecast-extension-5iu","title":"Implement or document integer frequency support","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:52.201284358+01:00","created_by":"simonm","updated_at":"2026-01-09T15:30:49.242756738+01:00","closed_at":"2026-01-09T15:30:49.242756738+01:00","close_reason":"Integer frequency support implemented - accepts pure integers (as days), Polars-style, and DuckDB INTERVAL formats","dependencies":[{"issue_id":"forecast-extension-5iu","depends_on_id":"forecast-extension-kx8","type":"blocks","created_at":"2026-01-09T14:56:01.175748039+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-5p4","title":"[GH#50] Fix BOCPD marking first/last observations as changepoints","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T21:23:47.933487225+01:00","created_by":"simonm","updated_at":"2026-01-08T21:57:51.718638065+01:00","closed_at":"2026-01-08T21:57:51.718638065+01:00","close_reason":"Bug was already fixed in Rust rewrite. Added 10 regression tests and updated documentation."}
{"id":"forecast-extension-69h","title":"Fix ts_periods.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:25.662640436+01:00","created_by":"simonm","updated_at":"2026-01-08T20:18:32.900173694+01:00","closed_at":"2026-01-08T20:18:32.900173694+01:00","close_reason":"Fixed all 12 period detection functions to return NULL instead of throwing"}
{"id":"forecast-extension-6a8","title":"Fix ts_data_quality.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:28.065204333+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.391333902+01:00","closed_at":"2026-01-08T20:26:45.391333902+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-6gt","title":"Fix ts_decomposition.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:28.3742221+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.397479853+01:00","closed_at":"2026-01-08T20:26:45.397479853+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-7cg","title":"Test Multiple Seasonality Models (MFLES, MSTL, TBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:39.397323256+01:00","created_by":"simonm","updated_at":"2026-01-08T16:24:18.102280626+01:00","closed_at":"2026-01-08T16:24:18.102280626+01:00","close_reason":"Added comprehensive tests for Multiple Seasonality Models (MFLES, MSTL, TBATS) in test/sql/ts_forecast_multi_seasonal.test. All 24 test files pass with 1054 assertions."}
{"id":"forecast-extension-7cw","title":"Add tests for advanced period detection methods (ts_autoperiod, ts_lomb_scargle)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:29:34.106009311+01:00","created_by":"simonm","updated_at":"2026-01-08T16:37:55.012892562+01:00","closed_at":"2026-01-08T16:37:55.012892562+01:00","close_reason":"Added comprehensive tests for advanced period detection methods (ts_autoperiod, ts_cfd_autoperiod, ts_lomb_scargle)"}
{"id":"forecast-extension-7ps","title":"Create batch error isolation test file ts_forecast_error_isolation.test","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:48:57.220036597+01:00","created_by":"simonm","updated_at":"2026-01-08T19:06:00.465435107+01:00","closed_at":"2026-01-08T19:06:00.465435107+01:00","close_reason":"Created test file with 122 assertions covering batch error isolation scenarios","dependencies":[{"issue_id":"forecast-extension-7ps","depends_on_id":"forecast-extension-fnq","type":"blocks","created_at":"2026-01-08T17:49:17.942415032+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-8dd","title":"ts_forecast_by: Test parameters via MAP (confidence_level, seasonal_period)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:15.974724151+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.63610543+01:00","closed_at":"2026-01-08T15:52:30.63610543+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-9dk","title":"Write extreme value batch tests (1e308, 1e-308)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T17:49:02.970818796+01:00","created_by":"simonm","updated_at":"2026-01-08T19:52:14.66354638+01:00","closed_at":"2026-01-08T19:52:14.66354638+01:00","close_reason":"Added extreme value batch tests (1e308, 1e-308, inf, nan)","dependencies":[{"issue_id":"forecast-extension-9dk","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:18.064231251+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-9wu","title":"Fix ts_seasonality.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:27.466401723+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.37841765+01:00","closed_at":"2026-01-08T20:26:45.37841765+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-a4m","title":"ts_forecast_by: Test Theta Methods (Theta, OptimizedTheta, DynamicTheta, DynamicOptimizedTheta)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:09.621124341+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.564967977+01:00","closed_at":"2026-01-08T15:52:30.564967977+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-a6k","title":"Demonstrate known vs unknown feature handling with ts_fill_unknown()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.641434462+01:00","created_by":"simonm","updated_at":"2026-01-10T00:12:16.59058097+01:00","closed_at":"2026-01-10T00:12:16.59058097+01:00","close_reason":"Created examples/06_known_unknown_features.sql demonstrating: known vs unknown feature concepts, ts_fill_unknown with last_value/null/default strategies, CV integration, ts_mark_unknown for custom logic"}
{"id":"forecast-extension-asz","title":"ts_forecast_by: Test Exponential Smoothing Models (Holt, HoltWinters, SeasonalES, SeasonalESOptimized, SeasonalWindowAverage)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:08.190439073+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.552728964+01:00","closed_at":"2026-01-08T15:52:30.552728964+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-auh","title":"ts_forecast_by: Test Auto Selection Models (AutoETS, AutoARIMA, AutoTheta, AutoMFLES, AutoMSTL, AutoTBATS)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:05.57740352+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.592521539+01:00","closed_at":"2026-01-08T15:52:30.592521539+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-avz","title":"Test Basic Models (SMA, SeasonalNaive, SES, SESOptimized, RandomWalkDrift)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:32.132378283+01:00","created_by":"simonm","updated_at":"2026-01-08T16:04:08.615876577+01:00","closed_at":"2026-01-08T16:04:08.615876577+01:00","close_reason":"Added comprehensive tests for basic forecasting models (SMA, SeasonalNaive, SES, SESOptimized, RandomWalkDrift) in test/sql/ts_forecast_basic_models.test. All 19 test files pass with 608 assertions."}
{"id":"forecast-extension-bsw","title":"Add month/calendar features via SQL DATE_PART","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.556689067+01:00","created_by":"simonm","updated_at":"2026-01-10T00:04:50.389130981+01:00","closed_at":"2026-01-10T00:04:50.389130981+01:00","close_reason":"Created examples/04_calendar_features.sql demonstrating: DATE_PART extraction, derived features (season, holiday indicators), cyclical encoding (sin/cos), one-hot encoding, future date generation"}
{"id":"forecast-extension-byv","title":"Write unit tests for time column type preservation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:49.442964544+01:00","created_by":"simonm","updated_at":"2026-01-09T14:59:03.966581677+01:00","closed_at":"2026-01-09T14:59:03.966581677+01:00","close_reason":"Closed"}
{"id":"forecast-extension-c4u","title":"Test Intermittent Demand Models (CrostonClassic, CrostonOptimized, CrostonSBA, ADIDA, IMAPA, TSB)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:40.457366777+01:00","created_by":"simonm","updated_at":"2026-01-08T16:20:39.579407743+01:00","closed_at":"2026-01-08T16:20:39.579407743+01:00","close_reason":"Added comprehensive tests for Intermittent Demand Models (CrostonClassic, CrostonOptimized, CrostonSBA, ADIDA, IMAPA, TSB) in test/sql/ts_forecast_intermittent.test. All 23 test files pass with 969 assertions."}
{"id":"forecast-extension-cbg","title":"Fix ts_stats.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:26.572560213+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.361202144+01:00","closed_at":"2026-01-08T20:26:45.361202144+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-cfe","title":"Update ts_fill_gaps_operator to use C++ table function","description":"Update ts_fill_gaps_operator to use the new C++ table function for type preservation. Depends on forecast-extension-e2n.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T15:57:18.704988679+01:00","created_by":"simonm","updated_at":"2026-01-09T17:25:38.374089436+01:00","closed_at":"2026-01-09T17:25:38.374089436+01:00","close_reason":"Native functions (ts_fill_gaps_native, ts_fill_forward_native) provide type preservation. Users can use these directly instead of modifying the existing operator. Keeping the original operator unchanged avoids breaking changes while the native functions offer the enhanced functionality.","dependencies":[{"issue_id":"forecast-extension-cfe","depends_on_id":"forecast-extension-e2n","type":"blocks","created_at":"2026-01-09T15:57:25.577809784+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-cfe","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.183201436+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-cme","title":"Fix ts_filter.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:26.862472512+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.366870741+01:00","closed_at":"2026-01-08T20:26:45.366870741+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-cmf","title":"ts_forecast_by: Test Intermittent Demand Models (CrostonClassic, CrostonOptimized, CrostonSBA, ADIDA, IMAPA, TSB)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:13.731609108+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.606004745+01:00","closed_at":"2026-01-08T15:52:30.606004745+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-co3","title":"Write model-specific batch tests (AutoETS, HoltWinters, etc.)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T17:49:00.875157072+01:00","created_by":"simonm","updated_at":"2026-01-08T19:52:14.634951925+01:00","closed_at":"2026-01-08T19:52:14.634951925+01:00","close_reason":"Added model-specific batch tests for 11 models","dependencies":[{"issue_id":"forecast-extension-co3","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:18.035333797+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-d51","title":"Fix time column type preservation issues","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:51.310963297+01:00","created_by":"simonm","updated_at":"2026-01-09T15:18:54.877974517+01:00","closed_at":"2026-01-09T15:18:54.877974517+01:00","close_reason":"Investigated DATE to TIMESTAMP conversion. This is a SQL/DuckDB limitation: generate_series returns TIMESTAMP and SQL type system is determined at query planning time. Documented limitation in test file with workaround: SELECT date_col::DATE FROM ts_fill_gaps(...)","dependencies":[{"issue_id":"forecast-extension-d51","depends_on_id":"forecast-extension-byv","type":"blocks","created_at":"2026-01-09T14:56:01.146514986+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-d8s","title":"Design and implement ts_fill_unknown C++ UDF","description":"Implement C++ window/aggregate UDF for filling unknown future features in test set. Strategies: default(value), last_value, null. Must respect series_id boundaries.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T11:47:55.362428823+01:00","created_by":"simonm","updated_at":"2026-01-09T12:54:47.551430641+01:00","closed_at":"2026-01-09T12:54:47.551430641+01:00","close_reason":"Implemented ts_fill_unknown as SQL table macro with strategies: default, last_value, null. Added comprehensive tests."}
{"id":"forecast-extension-dp9","title":"Write individual error scenario tests (short, NULL, empty, constant)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:48:58.104844306+01:00","created_by":"simonm","updated_at":"2026-01-08T19:12:33.235409911+01:00","closed_at":"2026-01-08T19:12:33.235409911+01:00","close_reason":"Added 100+ individual error scenario tests (354 total assertions)","dependencies":[{"issue_id":"forecast-extension-dp9","depends_on_id":"forecast-extension-7ps","type":"blocks","created_at":"2026-01-08T17:49:17.975560987+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-dpg","title":"Investigate BOCPD implementation to understand why boundary observations are marked as changepoints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:53.534580758+01:00","created_by":"simonm","updated_at":"2026-01-08T21:32:26.769368498+01:00","closed_at":"2026-01-08T21:32:26.769374715+01:00"}
{"id":"forecast-extension-e1p","title":"Implement ts_cv_split SQL table macro","description":"Implement SQL table macro that orchestrates CV split: parameter validation, fold generation (generated vs explicit), window type handling (expanding/fixed/sliding), output mode selection. Calls C++ UDFs for heavy lifting.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T11:47:58.554658295+01:00","created_by":"simonm","updated_at":"2026-01-09T14:00:29.807651153+01:00","closed_at":"2026-01-09T14:00:29.807651153+01:00","close_reason":"Implemented ts_cv_split, ts_cv_split_folds, and ts_cv_generate_folds SQL table macros. Supports expanding/fixed/sliding windows, explicit or auto-generated folds.","dependencies":[{"issue_id":"forecast-extension-e1p","depends_on_id":"forecast-extension-d8s","type":"blocks","created_at":"2026-01-09T11:48:12.277574942+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-e1p","depends_on_id":"forecast-extension-u2v","type":"blocks","created_at":"2026-01-09T11:48:12.30889064+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-e2n","title":"Port C++ ts_fill_gaps table function from cpp-legacy branch","description":"Replace SQL macro with C++ table-in-out function to preserve DATE type and support INTEGER date columns. Reference: origin/cpp-legacy:src/ts_fill_gaps_function.cpp","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T15:56:52.725330908+01:00","created_by":"simonm","updated_at":"2026-01-09T17:01:09.695504262+01:00","closed_at":"2026-01-09T17:01:09.695504262+01:00","close_reason":"Implemented ts_fill_gaps_native as C++ table-in-out function. Features: DATE/TIMESTAMP/INTEGER/BIGINT type preservation, uses Rust FFI for gap filling algorithm, supports Polars and DuckDB interval frequency formats. Tests added in test/sql/ts_fill_gaps_native.test with 101 assertions.","dependencies":[{"issue_id":"forecast-extension-e2n","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.127533972+01:00","created_by":"simonm"}],"comments":[{"id":4,"issue_id":"forecast-extension-e2n","author":"simonm","text":"## Problem\n\nCurrent SQL macro uses `generate_series()` which always returns TIMESTAMP, losing DATE type information.\n\n## Solution in cpp-legacy branch\n\nThe legacy implementation uses DuckDB's table-in-out function pattern:\n- `src/ts_fill_gaps_function.cpp` - Full C++ implementation\n- `src/include/ts_fill_gaps_function.hpp` - Header with data structures\n\n### Key features:\n1. **Type preservation**: Converts back to DATE or TIMESTAMP based on input type\n2. **INTEGER date support**: Handles INTEGER/BIGINT date columns with integer frequency\n3. **Table-in-out pattern**: Uses `in_out_function` and `in_out_function_final` callbacks\n\n### Files to port:\n- `src/ts_fill_gaps_function.cpp`\n- `src/include/ts_fill_gaps_function.hpp`\n\n### Key code sections:\n```cpp\n// Type preservation (lines 521-528)\nif (bind_data.date_col_type.id() == LogicalTypeId::DATE) {\n    date_value = Value::DATE(ts_fill_gaps_internal::TimePointToDate(time_point));\n} else {\n    date_value = Value::TIMESTAMP(ts_fill_gaps_internal::TimePointToTimestamp(time_point));\n}\n```\n\n## Acceptance Criteria\n- [ ] DATE input returns DATE output\n- [ ] TIMESTAMP input returns TIMESTAMP output\n- [ ] INTEGER date columns work with integer frequency\n- [ ] All existing tests pass\n- [ ] New type preservation tests added","created_at":"2026-01-09T14:57:05Z"},{"id":6,"issue_id":"forecast-extension-e2n","author":"simonm","text":"## Updated Approach\n\nThe core gap filling logic **already exists in Rust**:\n- `crates/anofox-fcst-core/src/gaps.rs` - `fill_gaps()`, `fill_forward()`\n- FFI: `anofox_ts_fill_gaps`, `anofox_ts_fill_forward_dates`\n\nThe current SQL macros bypass Rust and use `generate_series` directly.\n\n### Simpler Solution\nInstead of porting legacy C++, create a thin C++ table-in-out wrapper that:\n1. Reads input rows and converts dates to i64 (microseconds since epoch)\n2. Calls the existing Rust FFI function (`anofox_ts_fill_gaps`)\n3. Converts i64 back to original type (DATE or TIMESTAMP)\n\nThis reuses existing tested Rust code instead of duplicating logic.","created_at":"2026-01-09T15:00:17Z"}]}
{"id":"forecast-extension-e9b","title":"Update telemetry documentation with CI behavior","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T23:32:11.290677769+01:00","created_by":"simonm","updated_at":"2026-01-09T23:32:11.290677769+01:00","dependencies":[{"issue_id":"forecast-extension-e9b","depends_on_id":"forecast-extension-4df","type":"blocks","created_at":"2026-01-09T23:32:17.980820388+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-e9b","depends_on_id":"forecast-extension-y8l","type":"blocks","created_at":"2026-01-09T23:32:18.085043411+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-eaz","title":"Add tests for ts_detect_changepoints_by and ts_detect_changepoints_agg","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T15:29:31.589493327+01:00","created_by":"simonm","updated_at":"2026-01-08T15:42:37.890495435+01:00","closed_at":"2026-01-08T15:42:37.890495435+01:00","close_reason":"Added 16 new tests for ts_detect_changepoints_agg and ts_detect_changepoints_by functions"}
{"id":"forecast-extension-flt","title":"Update changepoint detection documentation if needed","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T21:24:58.195826346+01:00","created_by":"simonm","updated_at":"2026-01-08T21:57:44.147923867+01:00","closed_at":"2026-01-08T21:57:44.147923867+01:00","close_reason":"Added Boundary Behavior section to changepoint documentation","dependencies":[{"issue_id":"forecast-extension-flt","depends_on_id":"forecast-extension-nzi","type":"blocks","created_at":"2026-01-08T21:25:06.004735701+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-fnq","title":"Fix ts_forecast C++ error handling to return NULL instead of throwing","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T17:48:55.116125304+01:00","created_by":"simonm","updated_at":"2026-01-08T19:03:09.833850128+01:00","closed_at":"2026-01-08T19:03:09.833850128+01:00","close_reason":"Fixed error handling to return NULL instead of throwing - verified with 22 test cases"}
{"id":"forecast-extension-fyd","title":"Create complete example pipeline script","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.664612364+01:00","created_by":"simonm","updated_at":"2026-01-10T00:16:30.558042869+01:00","closed_at":"2026-01-10T00:16:30.558042869+01:00","close_reason":"Organized examples into examples/backtest_pipeline/ subfolder with README.md documenting the full pipeline","dependencies":[{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-iar","type":"blocks","created_at":"2026-01-09T23:46:22.452216878+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-56h","type":"blocks","created_at":"2026-01-09T23:46:22.482247366+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-lwl","type":"blocks","created_at":"2026-01-09T23:46:22.509436637+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-bsw","type":"blocks","created_at":"2026-01-09T23:46:22.536153156+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-pn2","type":"blocks","created_at":"2026-01-09T23:46:22.560291374+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-g1b","type":"blocks","created_at":"2026-01-09T23:46:22.585144887+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-fyd","depends_on_id":"forecast-extension-a6k","type":"blocks","created_at":"2026-01-09T23:46:22.614577101+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-g1b","title":"Apply MFLES model with exogenous variables","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.612091288+01:00","created_by":"simonm","updated_at":"2026-01-10T00:10:11.165544271+01:00","closed_at":"2026-01-10T00:10:11.165544271+01:00","close_reason":"Created examples/05_mfles_model.sql demonstrating: MFLES without exog, ARIMAX with exog (promotion+calendar), model comparison, CV backtesting with ~2-12% MAPE"}
{"id":"forecast-extension-g2i","title":"Write tests for ts_cv_split function","description":"Comprehensive tests: fold generation modes, all fill strategies, window types (expanding/fixed/sliding), output modes, error cases (missing timestamps, invalid params), multi-series data.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:48:01.103034405+01:00","created_by":"simonm","updated_at":"2026-01-09T14:00:49.639322915+01:00","closed_at":"2026-01-09T14:00:49.639322915+01:00","close_reason":"Tests already written in test/sql/ts_cv_split.test as part of implementation task","dependencies":[{"issue_id":"forecast-extension-g2i","depends_on_id":"forecast-extension-e1p","type":"blocks","created_at":"2026-01-09T11:48:14.026811918+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-h4w","title":"Update Rust FFI layer for exogenous variables","description":"Extend anofox-fcst-ffi to expose exogenous variable functions: (1) Add ForecastOptionsWithExog struct with xreg fields, (2) Add anofox_ts_forecast_with_exog FFI function, (3) Handle HashMap\u003cString, Vec\u003cf64\u003e\u003e for future_regressors, (4) Expose supports_exog/has_exog model queries","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:09.644698337+01:00","created_by":"simonm","updated_at":"2026-01-08T22:28:54.180136555+01:00","closed_at":"2026-01-08T22:28:54.180136555+01:00","close_reason":"Implemented FFI layer for exogenous variables: types.rs structs, lib.rs FFI function, core forecast_with_exog","dependencies":[{"issue_id":"forecast-extension-h4w","depends_on_id":"forecast-extension-1j1","type":"blocks","created_at":"2026-01-08T22:16:35.214409889+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-hsf","title":"ts_forecast_by: Test Basic Models (SMA, SeasonalNaive, SES, SESOptimized, RandomWalkDrift)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:07.234893932+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.535005819+01:00","closed_at":"2026-01-08T15:52:30.535005819+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-iae","title":"Fix ts_detrend.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:26.260942797+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.352019332+01:00","closed_at":"2026-01-08T20:26:45.352019332+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-iar","title":"Create sample dataset for backtest example","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:44:50.49579192+01:00","created_by":"simonm","updated_at":"2026-01-09T23:50:22.326034283+01:00","closed_at":"2026-01-09T23:50:22.326034283+01:00","close_reason":"Created examples/backtest_pipeline_data.sql with 3-year monthly retail dataset for 2 categories, including seasonality, trend, changepoint, and both known (promotion) and unknown (temperature) features"}
{"id":"forecast-extension-iv7","title":"Fix last observation being incorrectly marked as changepoint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:56.220274271+01:00","created_by":"simonm","updated_at":"2026-01-08T21:32:38.644649204+01:00","closed_at":"2026-01-08T21:32:38.644649204+01:00","close_reason":"Bug already fixed in Rust rewrite - old C++ code had explicit first/last changepoint insertion","dependencies":[{"issue_id":"forecast-extension-iv7","depends_on_id":"forecast-extension-dpg","type":"blocks","created_at":"2026-01-08T21:25:05.935323291+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-j7q","title":"Update API documentation for exogenous variables","description":"Update docs/API_REFERENCE.md: (1) Document which models support exog (ARIMA, SARIMA, AutoARIMA, Theta, MFLES), (2) Add examples for ts_forecast with xreg, (3) Document future_X requirements, (4) Add troubleshooting section","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T22:16:14.433082425+01:00","created_by":"simonm","updated_at":"2026-01-08T23:09:35.681480579+01:00","closed_at":"2026-01-08T23:09:35.681480579+01:00","close_reason":"Added documentation for _ts_forecast_exog scalar function, ts_forecast_exog and ts_forecast_exog_by table macros to API_REFERENCE.md","dependencies":[{"issue_id":"forecast-extension-j7q","depends_on_id":"forecast-extension-kik","type":"blocks","created_at":"2026-01-08T22:16:35.330933983+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-jl3","title":"Fix ts_forecast_exog_by table macro - src2 reference bug","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:50:31.147449267+01:00","created_by":"simonm","updated_at":"2026-01-09T20:56:22.644968619+01:00","closed_at":"2026-01-09T20:56:22.644968619+01:00","close_reason":"Fixed ts_forecast_exog and ts_forecast_exog_by macros. The issue was DuckDB's requirement for constant strings in column/struct access. Solution: Use JSON-based dynamic column access (json_extract with to_json) and JOIN-based aggregation instead of correlated subqueries. Requires JSON extension for dynamic column names.","comments":[{"id":2,"issue_id":"forecast-extension-jl3","author":"simonm","text":"## Problem\n\nThe ts_forecast_exog_by table macro fails with:\n```\nBinder Error: Referenced table \"src2\" not found!\nCandidate tables: \"src\"\n```\n\n## Root Cause\n\nIn ts_macros.cpp line 593-595, the macro uses:\n```sql\nLIST_TRANSFORM(xreg_cols, col -\u003e\n    (SELECT LIST(src2[col] ORDER BY src2.date_col) FROM src src2 WHERE src2.group_col = src.group_col)\n) AS _xreg_list\n```\n\nThe `src2` alias is not being properly resolved in the subquery context.\n\n## Impact\n\n- ts_forecast_exog_by is completely non-functional\n- Integer frequency support was added but cannot be tested until this is fixed\n\n## Fix Required\n\nReview the SQL macro and fix the table alias reference in the LIST_TRANSFORM subquery.","created_at":"2026-01-09T14:50:43Z"},{"id":3,"issue_id":"forecast-extension-jl3","author":"simonm","text":"GitHub issue: https://github.com/DataZooDE/anofox-forecast/issues/57","created_at":"2026-01-09T14:53:42Z"}]}
{"id":"forecast-extension-jxp","title":"Add tests for specialized period methods (ts_cfd_autoperiod, ts_aic_period, ts_ssa_period, ts_stl_period, ts_matrix_profile_period, ts_sazed_period)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T15:29:35.118727625+01:00","created_by":"simonm","updated_at":"2026-01-08T16:53:13.43440642+01:00","closed_at":"2026-01-08T16:53:13.43440642+01:00","close_reason":"Added comprehensive tests for specialized period detection methods (ts_aic_period, ts_ssa_period, ts_stl_period, ts_matrix_profile_period, ts_sazed_period)"}
{"id":"forecast-extension-k57","title":"Add SQL API for exogenous forecasting","description":"Define SQL function signatures: (1) ts_forecast(y, x1, x2, ..., future_x1, future_x2, ..., model, horizon), (2) ts_forecast with named parameters: xreg := [col1, col2], future_xreg := [[v1,v2], [v3,v4]], (3) Consider JSON parameter for complex cases","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:12.112462349+01:00","created_by":"simonm","updated_at":"2026-01-08T23:00:21.153283438+01:00","closed_at":"2026-01-08T23:00:21.153283438+01:00","close_reason":"SQL API implemented via ts_forecast_exog and ts_forecast_exog_by macros in ts_macros.cpp","dependencies":[{"issue_id":"forecast-extension-k57","depends_on_id":"forecast-extension-1rh","type":"blocks","created_at":"2026-01-08T22:16:35.272549116+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-kik","title":"Add tests for exogenous variable forecasting","description":"Create SQL tests in test/sql/ts_forecast_exog.test: (1) ARIMAX with single regressor, (2) ARIMAX with multiple regressors, (3) AutoARIMA with exog, (4) Error cases (mismatched lengths, unsupported models), (5) Verify forecast accuracy with known exog effects","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:16:12.945998647+01:00","created_by":"simonm","updated_at":"2026-01-08T23:06:39.939095582+01:00","closed_at":"2026-01-08T23:06:39.939095582+01:00","close_reason":"Created ts_forecast_exog.test with 10 test assertions covering scalar function, multiple model types (ARIMAX, ThetaX, MFLESX), and error handling","dependencies":[{"issue_id":"forecast-extension-kik","depends_on_id":"forecast-extension-k57","type":"blocks","created_at":"2026-01-08T22:16:35.298725195+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-kx8","title":"Write unit tests for integer frequency support","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:55:50.424532568+01:00","created_by":"simonm","updated_at":"2026-01-09T15:00:11.385285496+01:00","closed_at":"2026-01-09T15:00:11.385285496+01:00","close_reason":"Closed"}
{"id":"forecast-extension-lj0","title":"Add comprehensive model tests for ts_forecast_by table macro","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T15:34:53.701212619+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:40.919741721+01:00","closed_at":"2026-01-08T15:52:40.919741721+01:00","close_reason":"All sub-tasks completed. Comprehensive tests added in test/sql/ts_forecast_by.test covering all 28 models","dependencies":[{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-auh","type":"blocks","created_at":"2026-01-08T15:35:30.729667973+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-hsf","type":"blocks","created_at":"2026-01-08T15:35:30.756982188+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-asz","type":"blocks","created_at":"2026-01-08T15:35:30.785849523+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-a4m","type":"blocks","created_at":"2026-01-08T15:35:30.812098964+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-muh","type":"blocks","created_at":"2026-01-08T15:35:30.840499025+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-3v0","type":"blocks","created_at":"2026-01-08T15:35:30.87406247+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-cmf","type":"blocks","created_at":"2026-01-08T15:35:30.905085871+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-lj0","depends_on_id":"forecast-extension-8dd","type":"blocks","created_at":"2026-01-08T15:35:30.932088947+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-lk0","title":"Refactor exog to use anofox-regression for OLS","description":"Replace simplified OLS implementation in forecast.rs with anofox-regression crate. Use proper matrix-based regression for accurate coefficient estimation with multiple regressors.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T22:33:18.163044414+01:00","created_by":"simonm","updated_at":"2026-01-08T22:47:53.761006113+01:00","closed_at":"2026-01-08T22:47:53.761006113+01:00","close_reason":"Implemented OLS using anofox-regression with faer matrices"}
{"id":"forecast-extension-lw9","title":"Add regression tests for ts_detect_peaks with actual peak count verification","description":"Current tests in ts_peaks.test only check that results are not NULL and n_peaks \u003e= 0. Need to add tests that verify actual peak detection:\n\n1. Add test that verifies n_peaks \u003e 0 for data with obvious peaks\n2. Test the example from issue #59: `[1.0, 3.0, 2.0, 5.0, 1.0, 4.0, 2.0]` should detect peaks\n3. Test `[0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 10.0, 0.0, 0.0]` should detect 2 peaks\n4. Test ts_analyze_peak_timing also detects peaks","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T22:16:32.985300722+01:00","created_by":"simonm","updated_at":"2026-01-09T22:23:29.933159398+01:00","closed_at":"2026-01-09T22:23:29.933159398+01:00","close_reason":"Regression test test_issue_59_peaks_detected added in commit 5d850cc","dependencies":[{"issue_id":"forecast-extension-lw9","depends_on_id":"forecast-extension-2em","type":"blocks","created_at":"2026-01-09T22:16:39.039767262+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-lwl","title":"Add changepoint features using BOCPD","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.530115995+01:00","created_by":"simonm","updated_at":"2026-01-10T00:03:23.500691093+01:00","closed_at":"2026-01-10T00:03:23.500691093+01:00","close_reason":"Created examples/03_changepoint_features.sql demonstrating: ts_detect_changepoints_by, changepoint probability extraction, rolling/cumulative changepoint features, integration with CV splits"}
{"id":"forecast-extension-mjj","title":"Fix ts_imputation.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:27.776014059+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.384382497+01:00","closed_at":"2026-01-08T20:26:45.384382497+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-muh","title":"ts_forecast_by: Test State Space and ARIMA Models (ETS, ARIMA)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:35:10.857936245+01:00","created_by":"simonm","updated_at":"2026-01-08T15:52:30.576750003+01:00","closed_at":"2026-01-08T15:52:30.576750003+01:00","close_reason":"Tests added in test/sql/ts_forecast_by.test"}
{"id":"forecast-extension-nzi","title":"Add tests for BOCPD boundary conditions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:57.320177988+01:00","created_by":"simonm","updated_at":"2026-01-08T21:56:43.720135737+01:00","closed_at":"2026-01-08T21:56:43.720135737+01:00","close_reason":"Added 10 boundary condition tests for GH#50 regression prevention","dependencies":[{"issue_id":"forecast-extension-nzi","depends_on_id":"forecast-extension-xtu","type":"blocks","created_at":"2026-01-08T21:25:05.954767892+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-nzi","depends_on_id":"forecast-extension-iv7","type":"blocks","created_at":"2026-01-08T21:25:05.978913932+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-o9u","title":"Fix metrics.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:25.388693531+01:00","created_by":"simonm","updated_at":"2026-01-08T20:03:11.67643767+01:00","closed_at":"2026-01-08T20:03:11.67643767+01:00","close_reason":"Fixed all 12 metric functions to return NULL instead of throwing on error"}
{"id":"forecast-extension-ozd","title":"GH#8: Exogenous Variables Support","description":"Implement exogenous variable (xreg) support for forecasting models. Enables users to include external regressors like promotions, holidays, weather etc. in their forecasts. Models supporting exog: ARIMA, SARIMA, AutoARIMA, OptimizedTheta, DynamicTheta, MFLES. Ref: https://github.com/DataZooDE/anofox-forecast/issues/8","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T22:16:23.16533901+01:00","created_by":"simonm","updated_at":"2026-01-08T23:09:46.087084722+01:00","closed_at":"2026-01-08T23:09:46.087084722+01:00","close_reason":"All subtasks completed: API design, Rust FFI, C++ extension, SQL macros, tests, and documentation for exogenous variables"}
{"id":"forecast-extension-pn2","title":"Document available integrated features for dataset","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-09T23:46:14.583141112+01:00","created_by":"simonm","updated_at":"2026-01-09T23:48:24.145336623+01:00","deleted_at":"2026-01-09T23:48:24.145336623+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"forecast-extension-sin","title":"Date type preservation and INTEGER date column support","description":"Port C++ table functions from cpp-legacy branch to preserve DATE type and support INTEGER date columns in gap filling functions.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T15:57:28.131631006+01:00","created_by":"simonm","updated_at":"2026-01-09T17:25:48.750305236+01:00","closed_at":"2026-01-09T17:25:48.750305236+01:00","close_reason":"All children completed. Implemented ts_fill_gaps_native and ts_fill_forward_native C++ table functions with DATE/TIMESTAMP/INTEGER/BIGINT type preservation. Total 195 new test assertions added."}
{"id":"forecast-extension-to3","title":"Add tests for ts_forecast_agg aggregate forecasting","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T15:29:30.651483547+01:00","created_by":"simonm","updated_at":"2026-01-08T15:57:31.941316892+01:00","closed_at":"2026-01-08T15:57:31.941316892+01:00","close_reason":"Added comprehensive tests for ts_forecast_agg aggregate function covering: basic functionality, output structure, model tests (basic, exponential smoothing, theta, state space, auto selection, multiple seasonality), confidence bounds, GROUP BY behavior, horizon variations, fitted values, and SQL integration","dependencies":[{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-4c7","type":"blocks","created_at":"2026-01-08T15:32:54.961286679+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-avz","type":"blocks","created_at":"2026-01-08T15:32:54.992715946+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-5fi","type":"blocks","created_at":"2026-01-08T15:32:55.023525485+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-xpc","type":"blocks","created_at":"2026-01-08T15:32:55.056097898+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-3x2","type":"blocks","created_at":"2026-01-08T15:32:55.083380397+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-7cg","type":"blocks","created_at":"2026-01-08T15:32:55.111129628+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-c4u","type":"blocks","created_at":"2026-01-08T15:32:55.138907041+01:00","created_by":"simonm"},{"issue_id":"forecast-extension-to3","depends_on_id":"forecast-extension-1ub","type":"blocks","created_at":"2026-01-08T15:32:55.170553382+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-txy","title":"Add tests for feature config loading (ts_features_config_from_json, ts_features_config_from_csv)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T15:29:36.541852376+01:00","created_by":"simonm","updated_at":"2026-01-08T16:47:14.957805399+01:00","closed_at":"2026-01-08T16:47:14.957805399+01:00","close_reason":"Added comprehensive tests for ts_features_config_from_json and ts_features_config_from_csv functions"}
{"id":"forecast-extension-u2v","title":"Design and implement ts_validate_timestamps C++ UDF","description":"Implement C++ UDF to validate that explicit training_end_times exist in the data. Return error details if any timestamps are missing.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T11:47:56.428973683+01:00","created_by":"simonm","updated_at":"2026-01-09T13:50:53.697852749+01:00","closed_at":"2026-01-09T13:50:53.697852749+01:00","close_reason":"Implemented ts_validate_timestamps and ts_validate_timestamps_summary SQL table macros. Returns per-group validation with missing timestamps details."}
{"id":"forecast-extension-uyg","title":"Fix ts_features.cpp error handling - return NULL instead of throwing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T19:58:28.731063681+01:00","created_by":"simonm","updated_at":"2026-01-08T20:26:45.402642266+01:00","closed_at":"2026-01-08T20:26:45.402642266+01:00","close_reason":"Fixed all error handling to return NULL"}
{"id":"forecast-extension-w74","title":"Port C++ ts_fill_forward table function from cpp-legacy branch","description":"Replace SQL macro with C++ table-in-out function to preserve DATE type and support INTEGER date columns. Reference: origin/cpp-legacy:src/ts_fill_forward_function.cpp","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T15:57:06.483815084+01:00","created_by":"simonm","updated_at":"2026-01-09T17:24:59.724631808+01:00","closed_at":"2026-01-09T17:24:59.724631808+01:00","close_reason":"Implemented ts_fill_forward_native as C++ table-in-out function with DATE/TIMESTAMP/INTEGER/BIGINT type preservation. Uses Rust FFI (anofox_ts_fill_forward_dates). Tests added with 94 assertions.","dependencies":[{"issue_id":"forecast-extension-w74","depends_on_id":"forecast-extension-sin","type":"parent-child","created_at":"2026-01-09T15:57:49.153368031+01:00","created_by":"simonm"}],"comments":[{"id":5,"issue_id":"forecast-extension-w74","author":"simonm","text":"## Problem\n\nCurrent SQL macro uses `generate_series()` which always returns TIMESTAMP, losing DATE type information.\n\n## Solution in cpp-legacy branch\n\nPort `src/ts_fill_forward_function.cpp` which uses similar table-in-out pattern as ts_fill_gaps.\n\n### Key features:\n1. **Type preservation**: DATE in -\u003e DATE out, TIMESTAMP in -\u003e TIMESTAMP out\n2. **INTEGER date support**: Works with INTEGER/BIGINT date columns\n3. **Target date conversion**: Properly handles target_date parameter for all types\n\n### Files to port:\n- `src/ts_fill_forward_function.cpp`\n- `src/include/ts_fill_forward_function.hpp`\n\n## Acceptance Criteria\n- [ ] DATE input returns DATE output\n- [ ] TIMESTAMP input returns TIMESTAMP output\n- [ ] INTEGER date columns supported\n- [ ] All existing tests pass","created_at":"2026-01-09T14:57:16Z"},{"id":7,"issue_id":"forecast-extension-w74","author":"simonm","text":"## Updated Approach\n\nUse existing Rust FFI function `anofox_ts_fill_forward_dates` instead of porting legacy C++.\n\nC++ wrapper just needs to:\n1. Convert DATE/TIMESTAMP/INTEGER  i64\n2. Call Rust FFI\n3. Convert i64  original type","created_at":"2026-01-09T15:00:17Z"}]}
{"id":"forecast-extension-xpc","title":"Test Theta Methods (Theta, OptimizedTheta, DynamicTheta, DynamicOptimizedTheta)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:32:36.160428914+01:00","created_by":"simonm","updated_at":"2026-01-08T16:13:23.352192387+01:00","closed_at":"2026-01-08T16:13:23.352192387+01:00","close_reason":"Added comprehensive tests for Theta forecasting methods (Theta, OptimizedTheta, DynamicTheta, DynamicOptimizedTheta) in test/sql/ts_forecast_theta.test. All 21 test files pass with 794 assertions."}
{"id":"forecast-extension-xtu","title":"Fix first observation being incorrectly marked as changepoint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T21:24:54.662703006+01:00","created_by":"simonm","updated_at":"2026-01-08T21:32:38.628297299+01:00","closed_at":"2026-01-08T21:32:38.628297299+01:00","close_reason":"Bug already fixed in Rust rewrite - old C++ code had explicit first/last changepoint insertion","dependencies":[{"issue_id":"forecast-extension-xtu","depends_on_id":"forecast-extension-dpg","type":"blocks","created_at":"2026-01-08T21:25:05.907312636+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-y8l","title":"Add unit test for CI detection in telemetry","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T23:32:10.056519896+01:00","created_by":"simonm","updated_at":"2026-01-09T23:36:40.970531774+01:00","closed_at":"2026-01-09T23:36:40.970531774+01:00","close_reason":"Closed","dependencies":[{"issue_id":"forecast-extension-y8l","depends_on_id":"forecast-extension-4df","type":"blocks","created_at":"2026-01-09T23:32:17.885064011+01:00","created_by":"simonm"}]}
{"id":"forecast-extension-yy0","title":"Add tests for ts_stats_summary and ts_data_quality_summary","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T15:29:32.511847245+01:00","created_by":"simonm","updated_at":"2026-01-08T16:42:12.973766294+01:00","closed_at":"2026-01-08T16:42:12.973766294+01:00","close_reason":"Added comprehensive tests for ts_stats_summary and ts_data_quality_summary functions"}
